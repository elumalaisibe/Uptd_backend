/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","./Handles","./maybe","./accessorSupport/beforeDestroy","./accessorSupport/get","./accessorSupport/metadata","./accessorSupport/Properties","./accessorSupport/set","./accessorSupport/testSupport","./accessorSupport/watch","./accessorSupport/decorators/property","./accessorSupport/decorators/subclass"],(function(t,e,r,s,n,o,i,c,a,u,_,l){"use strict";var h,p;function d(t){if(null==t)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return t.constructor?.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const f=Symbol("Accessor-Handles"),y=Symbol("Accessor-Initialized");let v=function(){function v(...t){if(this[h]=null,this[p]=!1,this.constructor===v)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const e=new i(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:e}),t.length>0&&this.normalizeCtorArgs&&(e.ctorArgs=this.normalizeCtorArgs.apply(this,t)),a.getAccessorInterceptor()?.onInstanceConstruct(this),g.register(this,e.propertiesByName,this)}v.createSubclass=function(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:s,constructor:n}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const i=this;let c=function(e){function r(...r){var s;return(s=e.call(this,...r)||this).inherited=null,n&&n.apply(t._assertThisInitialized(s),r),s}return t._inherits(r,e),t._createClass(r)}(i);o.getPropertiesMetadata(c.prototype);for(const t in e){const r=e[t];c.prototype[t]="function"==typeof r?function(...e){const s=this.inherited;let n;this.inherited=function(...e){if(i.prototype[t])return i.prototype[t].apply(this,e)};try{n=r.apply(this,e)}catch(o){throw this.inherited=s,o}return this.inherited=s,n}:e[t]}for(const t in r){const e=d(r[t]);_.property(e)(c.prototype,t)}return l.subclass(s)(c)};var b=v.prototype;return b.postscript=function(t){const e=this.__accessor__,r=e.ctorArgs||t;e.initialize(),r&&(this.set(r),e.ctorArgs=null),e.constructed(),this.initialize(),this[y]=!0},b.initialize=function(){},b[s.BEFORE_DESTROY_SYMBOL]=function(){this[f]=r.destroyMaybe(this[f])},b.destroy=function(){this.destroyed||(g.unregister(this),u.removeTarget(this),this.__accessor__.destroy(),a.getAccessorInterceptor()?.onInstanceDestroy(this))},b.commitProperty=function(t){this.get(t)},b.get=function(t){return n.get(this,t)},b.hasOwnProperty=function(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)},b.keys=function(){return this.__accessor__?this.__accessor__.keys():[]},b.set=function(t,e){return c.set(this,t,e),this},b.watch=function(t,e,r){return u.watch(this,t,e,r)},b.own=function(t){this.addHandles(t)},b.addHandles=function(t,r){if(this.destroyed){const e=Array.isArray(t)?t:[t];for(const t of e)t.remove();return}let s=this[f];null==s&&(s=this[f]=new e),s.add(t,r)},b.removeHandles=function(t){const e=this[f];null!=e&&e.remove(t)},b.removeAllHandles=function(){const t=this[f];null!=t&&t.removeAll()},b.hasHandles=function(t){const e=this[f];return null!=e&&e.has(t)},b._override=function(t,e){void 0===e?this.__accessor__.clearOverride(t):this.__accessor__.override(t,e)},b._clearOverride=function(t){return this.__accessor__.clearOverride(t)},b._overrideIfSome=function(t,e){null==e?this.__accessor__.clearOverride(t):this.__accessor__.override(t,e)},b._isOverridden=function(t){return this.__accessor__.isOverridden(t)},b.notifyChange=function(t){this.__accessor__.notifyChange(t)},b._get=function(t){return this.__accessor__.internalGet(t)},b._set=function(t,e){return this.__accessor__.internalSet(t,e),this},t._createClass(v,[{key:"constructed",get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},{key:"initialized",get:function(){return this[y]}},{key:"destroyed",get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}]),v}();h=f,p=y;const g=new FinalizationRegistry((t=>{for(const e of t.values())e.destroy()}));return v}));
