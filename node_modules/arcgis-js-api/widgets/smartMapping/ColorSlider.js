/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","./SmartMappingSliderBase","./ColorSlider/ColorSliderViewModel","../support/widgetUtils","../support/decorators/messageBundle","../support/jsxFactory"],(function(e,r,t,i,s,a,n,o,l,d,p,c){"use strict";var u;const m="esri-color-slider",g={base:m,rampElement:`${m}__ramp`,sliderContainer:`${m}__slider-container`,histogramContainer:`${m}__histogram-container`,primaryHandle:`${m}--primary-handle`,track:`${m}--interactive-track`,esriWidget:"esri-widget",esriWidgetPanel:"esri-widget--panel",widgetIcon:"esri-icon-edit",disabled:"esri-disabled"};let h=u=function(r){function t(e,t){var i;return(i=r.call(this,e,t)||this).messages=null,i.viewModel=new l,i._bgFillId=`${i.id}-bg-fill`,i._rampFillId=`${i.id}-linear-gradient`,i}e._inherits(t,r),t.fromRendererResult=function(e,r){const{visualVariable:{stops:t},statistics:i}=e,{avg:s,stddev:a}=i,n=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),o=n.minSliderValue,l=n.maxSliderValue;return new u({max:l,min:o,stops:t,histogramConfig:{average:s,standardDeviation:a,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==n.theme})};var i=t.prototype;return i.updateFromRendererResult=function(e,r){const{visualVariable:{stops:t},statistics:i}=e,{avg:s,stddev:a}=i,n=e.renderer.authoringInfo.visualVariables.find((e=>"color"===e.type)),o=n.minSliderValue,l=n.maxSliderValue;this.set({max:l,min:o,stops:t,histogramConfig:{average:s,standardDeviation:a,bins:r?r.bins:[]},primaryHandleEnabled:"high-to-low"!==n.theme})},i.render=function(){const{label:e,primaryHandleEnabled:r,state:t,visibleElements:i}=this,s="disabled"===t,a=this.classes(g.base,g.esriWidget,g.esriWidgetPanel,{[g.disabled]:s,[g.primaryHandle]:r,[g.track]:!!i.interactiveTrack});return c.tsx("div",{"aria-label":e,class:a},s?null:this.renderContent(this.renderRamp(),g.sliderContainer,g.histogramContainer))},i.renderRamp=function(){const{_bgFillId:e,_rampFillId:r,viewModel:t,zoomOptions:i}=this,s=t.getStopInfo();return c.tsx("div",{class:g.rampElement},c.tsx("svg",{xmlns:"http://www.w3.org/2000/svg"},c.tsx("defs",null,this.renderRampFillDefinition(r,s),this.renderBackgroundFillDefinition(e)),c.tsx("rect",{x:"0",y:"0",fill:`url(#${e})`,height:"100%",width:"100%"}),c.tsx("rect",{x:"0",y:"0",fill:`url(#${r})`,height:"100%",width:"100%"})),i?this.renderZoomCaps():null)},e._createClass(t,[{key:"handlesSyncedToPrimary",get:function(){return this.viewModel.handlesSyncedToPrimary},set:function(e){this.viewModel.handlesSyncedToPrimary=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}},{key:"primaryHandleEnabled",get:function(){return this.viewModel.primaryHandleEnabled},set:function(e){this.viewModel.primaryHandleEnabled=e}},{key:"stops",get:function(){return this.viewModel.stops},set:function(e){this.viewModel.stops=e}}]),t}(o.SmartMappingSliderBase);r.__decorate([t.property()],h.prototype,"handlesSyncedToPrimary",null),r.__decorate([t.property()],h.prototype,"label",null),r.__decorate([t.property(),p.messageBundle("esri/widgets/smartMapping/ColorSlider/t9n/ColorSlider")],h.prototype,"messages",void 0),r.__decorate([t.property()],h.prototype,"primaryHandleEnabled",null),r.__decorate([t.property()],h.prototype,"stops",null),r.__decorate([t.property()],h.prototype,"viewModel",void 0),h=u=r.__decorate([n.subclass("esri.widgets.smartMapping.ColorSlider")],h);return h}));
