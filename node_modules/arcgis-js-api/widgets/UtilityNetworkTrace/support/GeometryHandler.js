/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry","../../../geometry/geometryEngine","../../../geometry/Polyline","../../../geometry/projection","../../../geometry/SpatialReference"],(function(e,t,r,n,o,i,a){"use strict";function c(e){return"polygon"===e.type||"polyline"===e.type}function l(e){return e.hasOwnProperty("points")}function s(e){return l(e)&&2===e.points.length}let u=function(){function e(){}var r=e.prototype;return r.createBuffer=function(e,t,r,o){if(Array.isArray(e)){if(e.length>0){const i=a.fromJSON(e[0].spatialReference);return i.isWGS84||i.isWebMercator?n.geodesicBuffer(e,t,r):n.buffer(e,t,r,o)}return}const i=a.fromJSON(e.spatialReference);return i.isWGS84||i.isWebMercator?n.geodesicBuffer(e,t[0],r):n.buffer(e,t[0],r)},r.createConvexHull=function(e){if(Array.isArray(e)){if(1===e.length&&s(e[0])){const t=n.convexHull(e[0]);if(c(t))return t}return n.convexHull(e,!0).filter(c)}const t=n.convexHull(e);if(c(t))return t},r.calculateArea=function(e,t){const r=new a({wkid:e.spatialReference.wkid});return r.isWGS84||r.isWebMercator?parseFloat(n.geodesicArea(e,t).toFixed(2)):parseFloat(n.planarArea(e,t).toFixed(2))},r.mergeAggregatedToGeometries=function(e){const t=[],{line:r,multipoint:n,polygon:o}=e;return r&&t.push(r),n&&t.push(n),o&&t.push(o),t},r.getPercentageAlong=function(e,t,r){let o=e;const a=this._createPolyline(e.paths,r.wkid);if("point"===t.type){const e=t.x-50,c=t.x+50,l=[[e,t.y-50],[c,t.y+50]];o=this._createPolyline(l,t.spatialReference.wkid);o=i.project(o,r);const s=n.cut(a,o);if(s.length>0){const e=n.planarLength(a,"feet");let t;t=s[0].paths[0][0][0]===a.paths[0][0][0]?n.planarLength(s[0],"feet"):n.planarLength(s[1],"feet");return[t/e]}return[.5]}o=i.project(t,r);const c=n.cut(a,o);if(c.length>0){const e=n.planarLength(a,"feet");return[n.planarLength(c[0],"feet")/e]}return[.5]},r.projectGeometry=async function(e,t){return await i.load(),i.project(e,t)},r._createPolyline=function(e,t){return new o({hasZ:!1,hasM:!0,paths:e,spatialReference:{wkid:t}})},t._createClass(e)}();e.GeometryHandler=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
