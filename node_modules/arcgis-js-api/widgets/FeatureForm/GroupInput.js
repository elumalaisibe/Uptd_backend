/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/deprecate","../../core/Logger","../../core/maybe","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","./featureFormUtils","./InputBase"],(function(e,t,i,s,r,n,o,p,u,a,l,c,d){"use strict";const y="esri.widgets.FeatureForm.GroupInput",h=s.getLogger(y);let f=function(t){function s(e){var i;return(i=t.call(this,e)||this)._expressionTrackingHandles=new Map,i.type="group",i}e._inherits(s,t);var o=s.prototype;return o.initialize=function(){this.addHandles([n.watch((()=>[this.visible,this.inputs]),(([e])=>{const{inputs:t}=this,i=!!e&&void 0;for(const s of t)c.isFieldInput(s)&&(s.required=i)}),{initial:!0,equals:(e,t)=>t[0]===e[0]&&t[1]===e[1]})])},o.destroy=function(){for(const e of this._expressionTrackingHandles.values())e.remove()},o._dirtyEvaluatedVisibilityExpression=function(){const{element:e}=this;e.visibilityExpression&&this.notifyChange("evaluatedVisibilityExpression")},e._createClass(s,[{key:"inputFields",get:function(){return i.deprecated(h,"Property: GroupInput.inputFields",{replacement:"GroupInput.inputs",version:"4.27"}),this.inputs},set:function(e){i.deprecated(h,"Property: GroupInput.inputFields",{replacement:"GroupInput.inputs",version:"4.27"}),this.inputs=e}},{key:"inputs",get:function(){return this._get("inputs")},set:function(e){this.handles.removeAll(),e&&this.handles.add(e.map((e=>n.watch((()=>e.visible),(()=>this._dirtyEvaluatedVisibilityExpression()))))),this._set("inputs",e)}},{key:"label",get:function(){return this.element.label},set:function(e){r.applySome(this.element,(t=>{t.label=e}))}},{key:"state",get:function(){return this.element.initialState||"expanded"},set:function(e){this._overrideIfSome("state",e)}},{key:"visible",get:function(){return!1!==this.evaluatedVisibilityExpression&&this.inputs&&this.inputs.some((e=>e.visible))}}]),s}(d);t.__decorate([o.property()],f.prototype,"inputs",null),t.__decorate([o.property()],f.prototype,"label",null),t.__decorate([o.property()],f.prototype,"state",null),t.__decorate([o.property({readOnly:!0})],f.prototype,"type",void 0),t.__decorate([o.property()],f.prototype,"visible",null),f=t.__decorate([l.subclass(y)],f);return f}));
