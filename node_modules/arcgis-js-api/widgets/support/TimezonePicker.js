/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["require","exports","../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","../Widget","./componentsUtils","./timeWidgetUtils","./widgetUtils","./decorators/messageBundle","./jsxFactory"],(function(e,t,o,n,r,s,i,c,p,l,d,a,u,_,m){"use strict";const g="esri-timezone-picker",f={base:g,trigger:`${g}__trigger`,itemTitle:`${g}__item-title`,itemDescription:`${g}__item_description`};function y(e,t){return e.find((e=>k(e)===t))}function h(e,t){return e.find((e=>e.utcOffset===t))}function k(e){return e?`${e.utcOffset}-${e.long}`:void 0}t.TimezonePicker=function(t){function n(e,o){var n;return(n=t.call(this,e,o)||this).value=null,n.onChange=null,n.open=!1,n.onOpen=null,n.onClose=null,n._selectedId=null,n._onOpen=()=>{n.open=!0,n.onOpen?.()},n._onClose=()=>{n.open=!1,n.onClose?.()},n._killEvent=e=>(e.stopPropagation(),!0),n._onChange=e=>{const t=e.target,o=t.selectedItems?.[0].getAttribute("data-id"),r=y(n._gmtOffsets,o)?.utcOffset;r&&(n._selectedId=o,n.onChange?.(r))},n}o._inherits(n,t);var r=n.prototype;return r.loadDependencies=function(){return d.loadCalciteComponents({button:()=>new Promise(((t,o)=>e(["../../chunks/calcite-button"],t,o))),dropdown:()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown"],t,o))),"dropdown-group":()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown-group"],t,o))),"dropdown-item":()=>new Promise(((t,o)=>e(["../../chunks/calcite-dropdown-item"],t,o)))})},r.render=function(){const e=this._messages;if(!e)return m.tsx("div",{key:"empty",class:f.base});const t=this._selectedItem,o=k(t);return m.tsx("div",{key:"container",class:f.base,onpointerdown:this._killEvent},m.tsx("calcite-dropdown",{overlayPositioning:"fixed",open:this.open,placement:"bottom-end",scale:"s",onCalciteDropdownSelect:this._onChange,onCalciteDropdownOpen:this._onOpen,onCalciteDropdownClose:this._onClose},m.tsx("calcite-button",{appearance:"transparent",class:f.trigger,key:"trigger",kind:"neutral",scale:"s",slot:"trigger",tabIndex:0,title:e.chooseTimezone},t?.short??""),m.tsx("calcite-dropdown-group",{selectionMode:"single",scale:"s"},this._gmtOffsets.map((e=>{const t=k(e);return m.tsx("calcite-dropdown-item",{key:t,"data-id":t,selected:o===t},m.tsx("div",{key:"title",class:f.itemTitle},e.shortWithUTC),m.tsx("div",{key:"description",class:f.itemDescription},e.long))})))))},o._createClass(n,[{key:"_gmtOffsets",get:function(){const e=this._messages;return e?a.getTimezoneInfos(e):[]}},{key:"_selectedItem",get:function(){const e=this._gmtOffsets,t=this.value,o=y(e,this._selectedId);return o?.utcOffset===t?o:h(e,t)}}]),n}(l),n.__decorate([r.property()],t.TimezonePicker.prototype,"value",void 0),n.__decorate([r.property()],t.TimezonePicker.prototype,"onChange",void 0),n.__decorate([r.property()],t.TimezonePicker.prototype,"open",void 0),n.__decorate([r.property()],t.TimezonePicker.prototype,"onOpen",void 0),n.__decorate([r.property()],t.TimezonePicker.prototype,"onClose",void 0),n.__decorate([r.property(),_.messageBundle("esri/widgets/support/t9n/timezone")],t.TimezonePicker.prototype,"_messages",void 0),n.__decorate([r.property()],t.TimezonePicker.prototype,"_gmtOffsets",null),n.__decorate([r.property()],t.TimezonePicker.prototype,"_selectedItem",null),n.__decorate([r.property()],t.TimezonePicker.prototype,"_selectedId",void 0),t.TimezonePicker=n.__decorate([p.subclass("esri.widgets.support.TimezonePicker")],t.TimezonePicker),t.CSS=f,t.CSS_BASE=g,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
