/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/arrayUtils","../core/has","../core/accessorSupport/decorators/subclass","./Widget","./BuildingExplorer/BuildingExplorerViewModel","./BuildingExplorer/css","./BuildingExplorer/BuildingDisciplinesTree/BuildingDisciplinesTree","./BuildingExplorer/BuildingLevelPicker/BuildingLevelPicker","./BuildingExplorer/BuildingPhasePicker/BuildingPhasePicker","./support/Heading","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory"],(function(e,s,i,t,r,l,o,n,a,d,c,p,u,g,h,v,y){"use strict";const S={levels:!0,phases:!0,disciplines:!0};let _=function(s){function i(e,i){var t;return(t=s.call(this,e,i)||this)._defaultViewModel=new a,t.viewModel=t._defaultViewModel,t.visibleElements={...S},t.headingLevel=3,t.iconClass=d.CSS.widgetIcon,t.icon=null,t.messages=null,t.messagesCommon=null,t.toggleSiblingsVisibility=!1,t}e._inherits(i,s);var t=i.prototype;return t.destroy=function(){this.viewModel!==this._defaultViewModel&&this._defaultViewModel.destroy()},t._castVisibleElements=function(e){return{...S,...e}},t.render=function(){const e=this.viewModel,s="disabled"===e.state||!e.isSupported;return y.tsx("div",{key:this,class:h.classes(d.CSS.esriWidget,d.CSS.base,{[d.CSS.esriWidgetDisabled]:s}),"aria-label":this.messages.widgetLabel},this._renderContent())},t._renderContent=function(){const e=this.viewModel,s=this.messages;if(!e.isSupported)return y.tsx("p",{class:d.CSS.panelError},s.unsupported);if(!e.layers.length)return y.tsx("p",{class:d.CSS.panelError},s.noData);switch(e.state){case"loading":return this._renderLoadingIndicator();case"ready":return y.tsx("div",{key:"content",class:d.CSS.content},this._renderLevelPickerSection(),this._renderPhasePickerSection(),this._renderDisciplinesSection());case"failed":return y.tsx("p",{class:d.CSS.panelError},s.failed);default:return null}},t._renderLoadingIndicator=function(){const e=this.messagesCommon.loading;return y.tsx("div",{key:"loading-container",role:"presentation",class:d.CSS.loadingContainer,"aria-label":e,title:e},y.tsx("span",{"aria-hidden":"true",class:h.classes(d.CSS.esriIconLoadingIndicator,d.CSS.esriRotating)}))},t._renderLevelPickerSection=function(){const e=this.viewModel.level,s="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.levels||!s||!i)return null;const t=this.messages?.level;return y.tsx("div",{key:"levels",class:h.classes(d.CSS.section,d.CSS.levels)},y.tsx(g.Heading,{level:this.headingLevel},t?.title),y.tsx(p,{vm:e,messages:t}))},t._renderPhasePickerSection=function(){const e=this.viewModel.phase,s="ready"===e.state,i=e.allowedValues.length>1;if(!this.visibleElements.phases||!s||!i)return null;const t=this.messages.phase;return y.tsx("div",{key:"phases",class:h.classes(d.CSS.section,d.CSS.phases)},y.tsx(g.Heading,{level:this.headingLevel},t.title),y.tsx(u,{vm:e,messages:t}))},t._renderDisciplinesSection=function(){const e=this.viewModel.disciplines,s="ready"===e.state,i=e.root.hasChildren;if(!this.visibleElements.disciplines||!s||!i)return null;const t=this.messages?.disciplines;return y.tsx("div",{key:"disciplines",class:h.classes(d.CSS.section,d.CSS.disciplines)},y.tsx(g.Heading,{level:this.headingLevel},t.title),y.tsx(c,{vm:e,messages:t,toggleSiblingsVisibility:this.toggleSiblingsVisibility}))},e._createClass(i,[{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"layers",get:function(){return this.viewModel.layers},set:function(e){this.viewModel.layers=e}},{key:"label",get:function(){return this.messages?.widgetLabel??""},set:function(e){this._overrideIfSome("label",e)}}]),i}(n);s.__decorate([i.property({type:a})],_.prototype,"viewModel",void 0),s.__decorate([i.property()],_.prototype,"view",null),s.__decorate([i.property()],_.prototype,"layers",null),s.__decorate([i.property()],_.prototype,"visibleElements",void 0),s.__decorate([t.cast("visibleElements")],_.prototype,"_castVisibleElements",null),s.__decorate([i.property()],_.prototype,"headingLevel",void 0),s.__decorate([i.property()],_.prototype,"iconClass",void 0),s.__decorate([i.property()],_.prototype,"icon",void 0),s.__decorate([i.property()],_.prototype,"label",null),s.__decorate([i.property(),v.messageBundle("esri/widgets/BuildingExplorer/t9n/BuildingExplorer")],_.prototype,"messages",void 0),s.__decorate([i.property(),v.messageBundle("esri/t9n/common")],_.prototype,"messagesCommon",void 0),s.__decorate([i.property({nonNullable:!0})],_.prototype,"toggleSiblingsVisibility",void 0),s.__decorate([i.property()],_.prototype,"uiStrings",void 0),_=s.__decorate([o.subclass("esri.widgets.BuildingExplorer")],_);return _}));
