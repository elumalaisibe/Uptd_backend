/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["require","../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/accessorSupport/decorators/property","../core/accessorSupport/decorators/cast","../core/arrayUtils","../core/has","../core/accessorSupport/decorators/subclass","./Widget","./OrientedImageryViewer/OrientedImageryViewerViewModel","./support/componentsUtils","./support/widgetUtils","./support/decorators/messageBundle","./support/jsxFactory","../support/themeUtils"],(function(e,t,i,r,o,n,s,a,c,l,d,u,p,g,h){"use strict";const m="esri-oriented-imagery-viewer",v={addCoverage:`${m}__body-additional-coverage`,addExpPoints:`${m}__body-additional-camera-locations`,base:"esri-oriented-imagery-viewer",body:`${m}__body`,calciteThemeDark:"calcite-mode-dark",calciteThemeLight:"calcite-mode-light",close:`${m}__close`,currentCoverage:`${m}__body-current-coverage`,footprint:`${m}__body-footprint`,header:`${m}__header`,messageBox:`${m}__message-box`,submenu:`${m}__submenu`,title:`${m}__title`,titleContainer:`${m}__title-container`,viewer:`${m}__viewer`,viewerContainer:`${m}__viewer-container`},_={closeButton:!0,coverageMenu:!0,imageMenu:!0,viewerTools:!0,title:!0};let w=function(i){function r(e,r){var o;return(o=i.call(this,e,r)||this).isDocked=!1,o.viewModel=new l,o.messagesCommon=null,o.visibleElements={..._},o._actionItems=new Map,o.renderTitleContainer=o.renderTitleContainer.bind(t._assertThisInitialized(o)),o.renderTitle=o.renderTitle.bind(t._assertThisInitialized(o)),o.renderViewerContainer=o.renderViewerContainer.bind(t._assertThisInitialized(o)),o.renderViewer=o.renderViewer.bind(t._assertThisInitialized(o)),o}t._inherits(r,i);var o=r.prototype;return o.loadDependencies=function(){return d.loadCalciteComponents({tooltip:()=>new Promise(((t,i)=>e(["../chunks/calcite-tooltip"],t,i))),action:()=>new Promise(((t,i)=>e(["../chunks/calcite-action"],t,i))),"action-group":()=>new Promise(((t,i)=>e(["../chunks/calcite-action-group"],t,i))),"action-bar":()=>new Promise(((t,i)=>e(["../chunks/calcite-action-bar"],t,i))),panel:()=>new Promise(((t,i)=>e(["../chunks/calcite-panel"],t,i)))})},o.castVisibleElements=function(e){return{..._,...e}},o._storeActionElement=function(e){this._actionItems.set(e.text,e)},o._toggleAdditionalCameraLocations=function(){this.viewModel.toggleAdditionalCameraLocations()},o._toggleAdditionalCoverage=function(){this.viewModel.toggleAdditionalCoverage()},o._toggleCurrentCoverage=function(){this.viewModel.toggleCurrentCoverage()},o.renderActionTooltips=function(){return[...this._actionItems].map((([e,t])=>g.tsx("calcite-tooltip",{key:e,label:e,referenceElement:t},g.tsx("span",null,e))))},o.renderBody=function(){return g.tsx("div",{class:v.body},this.visibleElements.coverageMenu&&this.renderMenuBarContainer(),this.renderViewerContainer())},o.renderHeader=function(){return g.tsx("div",{class:v.header},this.renderTitleContainer())},o.renderMenuBarContainer=function(){const{isCurrentCoverageDisabled:e,isCurrentCoverageVisible:t,isAdditionalCoverageDisabled:i,isAdditionalCoverageVisible:r,isAdditionalPointSourcesDisabled:o,isAdditionalPointSourcesVisible:n}=this.viewModel;return g.tsx("calcite-action-bar",{layout:"horizontal",expandDisabled:!0},g.tsx("calcite-action-group",{layout:"horizontal"},g.tsx("calcite-action",{text:this.messages.currentFootprint,icon:"trapezoid-area",class:v.currentCoverage,bind:this,active:!e&&t,disabled:e,onclick:this._toggleCurrentCoverage,afterCreate:this._storeActionElement}),g.tsx("calcite-action",{text:this.messages.additionalFootprints,icon:"trapezoid-area",class:v.addCoverage,bind:this,active:!i&&r,disabled:i,onclick:this._toggleAdditionalCoverage,afterCreate:this._storeActionElement}),g.tsx("calcite-action",{text:this.messages.additionalCameraLocations,icon:"circle-area",class:v.addExpPoints,bind:this,disabled:o,active:!o&&n,onclick:this._toggleAdditionalCameraLocations,afterCreate:this._storeActionElement}),this.renderActionTooltips()))},o.renderMessageBox=function(){const{displayMessage:e}=this.viewModel;return e?g.tsx("span",{class:v.messageBox+"--"+e.type},this.messages[e.key],e?.data):null},o.renderTitleContainer=function(){return g.tsx("div",{class:v.titleContainer},this.renderTitle())},o.renderTitle=function(){return g.tsx("span",{class:v.title},this.messages.title)},o.renderViewerContainer=function(){return g.tsx("div",{class:v.viewerContainer},this.renderViewer(),this.renderMessageBox())},o.renderViewer=function(){const{displayMessage:e}=this.viewModel;return g.tsx("div",{bind:this,afterCreate:this.viewModel.loadViewer,class:`${v.viewer}${e?"--hide":""}`})},o.render=function(){const{updating:e}=this.viewModel;return g.tsx("calcite-panel",{class:this.classes(`${v.base}--${this.isDocked?"docked":"floating"}`,h.isDarkTheme()?v.calciteThemeDark:v.calciteThemeLight),bind:this},this.visibleElements.title&&this.renderHeader(),g.tsx("calcite-panel",{loading:e},this.renderBody()))},t._createClass(r,[{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}}]),r}(c);i.__decorate([r.property()],w.prototype,"isDocked",void 0),i.__decorate([r.property({type:l})],w.prototype,"viewModel",void 0),i.__decorate([r.property(),p.messageBundle("esri/widgets/OrientedImageryViewer/t9n/OrientedImageryViewer")],w.prototype,"messages",void 0),i.__decorate([r.property(),p.messageBundle("esri/t9n/common")],w.prototype,"messagesCommon",void 0),i.__decorate([r.property()],w.prototype,"view",null),i.__decorate([r.property()],w.prototype,"visibleElements",void 0),i.__decorate([o.cast("visibleElements")],w.prototype,"castVisibleElements",null),w=i.__decorate([a.subclass("esri.widgets.OrientedImageryViewer")],w);return w}));
