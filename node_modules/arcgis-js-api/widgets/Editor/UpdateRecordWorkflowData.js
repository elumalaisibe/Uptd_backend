/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/Accessor","../../core/Error","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","./Edits","./workflowUtils"],(function(e,t,r,o,a,s,i,c,d,l,n){"use strict";var p;let u=p=function(t){function r(e){var r;return(r=t.call(this,e)||this).attachmentsCapabilities=null,r.editableItem=null,r.edits=null,r.formTemplate=null,r.viewModel=null,r}return e._inherits(r,t),r.create=async function(e){const t=p._makeConstructorProps(e);return new p(t)},r._makeConstructorProps=function(e){const{feature:t,viewModel:r}=e,a=r.editableItems.find((e=>e.layer===t.layer));if(!a)throw new o("no-editableItem-found","The EditorViewModel provided did not have an EditableItem associated with the specified Graphic's layer");const s=n.findLayerInfo(r.layerInfos,t.sourceLayer),i=a.supports,c=i.includes("create"),d=i.includes("update");return{attachmentsCapabilities:{editing:!0,operations:{add:c||d,update:d,delete:d}},editableItem:a,edits:new l.Edits({feature:t}),formTemplate:s?.formTemplate,viewModel:r}},e._createClass(r)}(r);t.__decorate([a.property()],u.prototype,"attachmentsCapabilities",void 0),t.__decorate([a.property()],u.prototype,"editableItem",void 0),t.__decorate([a.property()],u.prototype,"edits",void 0),t.__decorate([a.property()],u.prototype,"formTemplate",void 0),t.__decorate([a.property()],u.prototype,"viewModel",void 0),u=p=t.__decorate([d.subclass("esri.widgets.Editor.UpdateRecordWorkflowData")],u);return u}));
