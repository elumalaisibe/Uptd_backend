/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/Accessor","../../core/Error","../../core/Logger","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass"],(function(e,t,i,n,r,o,s,l,u,a){"use strict";let c=function(t){function i(e){var i;return(i=t.call(this,e)||this).precision=4,i.thumbsConstrained=!0,i}e._inherits(i,t);var o=i.prototype;return o.toPrecision=function(e){return parseFloat(e.toFixed(this.precision))},o.defaultLabelFormatFunction=function(e){const{max:t,min:i,precision:n}=this,r=null!=t&&null!=i&&t-i>10?2:n;return parseFloat(e.toFixed(r)).toString()},o.defaultInputFormatFunction=function(e){return e.toString()},o.defaultInputParseFunction=function(e){return parseFloat(e)},o.getBounds=function(){const{effectiveMax:e,effectiveMin:t,max:i,min:n}=this;return{min:null!=t&&null!=n?Math.max(n,t):n,max:null!=e&&null!=i?Math.min(i,e):i}},o.getBoundsForValueAtIndex=function(e){const{thumbsConstrained:t,values:i}=this,{min:n,max:r}=this.getBounds();if(t&&i){const t=e-1,o=e+1;return{min:null!=i[t]?i[t]:n,max:null!=i[o]?i[o]:r}}return{min:n,max:r}},o.getLabelForValue=function(e,t,i){return null==e?null:this.labelFormatFunction?this.labelFormatFunction(e,t,i):this.defaultLabelFormatFunction(e)},o.setMax=function(e){const{max:t,values:i}=this;if(null==e)return void this._set("max",null);if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'max' is NaN.");const n=this.toPrecision(e);if(t!==n&&(this._set("max",n),i&&i.length))for(let r=0;r<i.length;r++)n<i[r]&&this.setValue(r,n)},o.setMin=function(e){const{min:t,values:i}=this;if(null==e)return void this._set("min",null);if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'min' is NaN.");const n=this.toPrecision(e);if(t!==n&&(this._set("min",n),i&&i.length))for(let r=0;r<i.length;r++)n>i[r]&&this.setValue(r,n)},o.setEffectiveMax=function(e){if(null==e)return void this._set("effectiveMax",null);if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'effectiveMax' is NaN.");const t=this.toPrecision(e);this.effectiveMax!==t&&this._set("effectiveMax",this._applyBoundsToValue(t))},o.setEffectiveMin=function(e){if(null==e)return void this._set("effectiveMin",null);if(isNaN(e))return void this._logError("slider:invalid-value","Supplied value for property 'effectiveMin' is NaN.");const t=this.toPrecision(e);this.effectiveMin!==t&&this._set("effectiveMin",this._applyBoundsToValue(t))},o.setValue=function(e,t){if(isNaN(t))return void this._logError("slider:invalid-value","Supplied value for member of property 'values' is NaN.");const{values:i}=this;if(null==i)return void this._logError("slider:invalid-value","Supplied value for member of property 'values' is null.");const n=i[e],r=this.toPrecision(t);if(n===r)return;const o=[...i];o[e]=r,this._set("values",o),this.notifyChange("labels")},o._applyBoundsToValue=function(e){const{max:t,min:i}=this;return null!=i&&e<i?i:null!=t&&e>t?t:e},o._logError=function(e,t,i){r.getLogger(this).error(new n(e,t,i))},e._createClass(i,[{key:"effectiveMax",set:function(e){this.setEffectiveMax(e)}},{key:"effectiveMin",set:function(e){this.setEffectiveMin(e)}},{key:"labelFormatFunction",set:function(e){this._set("labelFormatFunction",e)}},{key:"inputFormatFunction",set:function(e){this._set("inputFormatFunction",e)}},{key:"inputParseFunction",set:function(e){this._set("inputParseFunction",e)}},{key:"labels",get:function(){const{max:e,min:t,values:i}=this,n=i&&i.length?i.map(((e,t)=>this.getLabelForValue(e,"value",t))):[];return{max:this.getLabelForValue(e,"max"),min:this.getLabelForValue(t,"min"),values:n}}},{key:"max",set:function(e){this.setMax(e)}},{key:"min",set:function(e){this.setMin(e)}},{key:"state",get:function(){const{max:e,min:t}=this;return null!=e&&null!=t&&e>t?"ready":"disabled"}},{key:"values",set:function(e){const{max:t,min:i}=this,n=this.values;n&&e&&n.length===e.length&&n.every(((t,i)=>t===e[i]))||(this._set("values",null),e&&e.length&&(null!=i&&e.some((e=>e<i))&&(this.min=Math.min(...e)),null!=t&&e.some((e=>e>t))&&(this.max=Math.max(...e))),this._set("values",e))}}]),i}(i);t.__decorate([o.property()],c.prototype,"effectiveMax",null),t.__decorate([o.property()],c.prototype,"effectiveMin",null),t.__decorate([o.property()],c.prototype,"labelFormatFunction",null),t.__decorate([o.property()],c.prototype,"inputFormatFunction",null),t.__decorate([o.property()],c.prototype,"inputParseFunction",null),t.__decorate([o.property({readOnly:!0})],c.prototype,"labels",null),t.__decorate([o.property()],c.prototype,"max",null),t.__decorate([o.property()],c.prototype,"min",null),t.__decorate([o.property()],c.prototype,"precision",void 0),t.__decorate([o.property({readOnly:!0})],c.prototype,"state",null),t.__decorate([o.property()],c.prototype,"thumbsConstrained",void 0),t.__decorate([o.property()],c.prototype,"values",null),c=t.__decorate([a.subclass("esri.widgets.Slider.SliderViewModel")],c);return c}));
