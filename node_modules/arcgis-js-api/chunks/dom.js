/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","./guid"],(function(t,e){"use strict";
/*!
   * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
   * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
   * v1.4.2
   */const n="calcite-mode-auto",r="calcite-mode-dark",o={autoMode:n,darkMode:r,lightMode:"calcite-mode-light",rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"};var i=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],a=i.join(","),l="undefined"==typeof Element,u=l?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,c=!l&&Element.prototype.getRootNode?function(t){var e;return null==t||null===(e=t.getRootNode)||void 0===e?void 0:e.call(t)}:function(t){return null==t?void 0:t.ownerDocument},s=function t(e,n){var r;void 0===n&&(n=!0);var o=null==e||null===(r=e.getAttribute)||void 0===r?void 0:r.call(e,"inert");return""===o||"true"===o||n&&e&&t(e.parentNode)},d=function(t){var e,n=null==t||null===(e=t.getAttribute)||void 0===e?void 0:e.call(t,"contenteditable");return""===n||"true"===n},f=function(t,e,n){if(s(t))return[];var r=Array.prototype.slice.apply(t.querySelectorAll(a));return e&&u.call(t,a)&&r.unshift(t),r=r.filter(n)},m=function t(e,n,r){for(var o=[],i=Array.from(e);i.length;){var l=i.shift();if(!s(l,!1))if("SLOT"===l.tagName){var c=l.assignedElements(),d=t(c.length?c:l.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:l,candidates:d})}else{u.call(l,a)&&r.filter(l)&&(n||!e.includes(l))&&o.push(l);var f=l.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(l),m=!s(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(l));if(f&&m){var h=t(!0===f?l.children:f.children,!0,r);r.flatten?o.push.apply(o,h):o.push({scopeParent:l,candidates:h})}else i.unshift.apply(i,l.children)}}return o},h=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||d(t))&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},p=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},g=function(t){return"INPUT"===t.tagName},y=function(t){return g(t)&&"hidden"===t.type},v=function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))},S=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]},b=function(t){if(!t.name)return!0;var e,n=t.form||c(t),r=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=r(window.CSS.escape(t.name));else try{e=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=S(e,t.form);return!o||o===t},w=function(t){return g(t)&&"radio"===t.type},A=function(t){return w(t)&&!b(t)},E=function(t){var e,n,r,o,i=t&&c(t),a=null===(e=i)||void 0===e?void 0:e.host,l=!1;if(i&&i!==t)for(l=!!(null!==(n=a)&&void 0!==n&&null!==(r=n.ownerDocument)&&void 0!==r&&r.contains(a)||null!=t&&null!==(o=t.ownerDocument)&&void 0!==o&&o.contains(t));!l&&a;){var u,s,d;l=!(null===(s=a=null===(u=i=c(a))||void 0===u?void 0:u.host)||void 0===s||null===(d=s.ownerDocument)||void 0===d||!d.contains(a))}return l},I=function(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;return 0===n&&0===r},R=function(t,e){var n=e.displayCheck,r=e.getShadowRoot;if("hidden"===getComputedStyle(t).visibility)return!0;var o=u.call(t,"details>summary:first-of-type")?t.parentElement:t;if(u.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return I(t)}else{if("function"==typeof r){for(var i=t;t;){var a=t.parentElement,l=c(t);if(a&&!a.shadowRoot&&!0===r(a))return I(t);t=t.assignedSlot?t.assignedSlot:a||l===t.ownerDocument?a:l.host}t=i}if(E(t))return!t.getClientRects().length;if("legacy-full"!==n)return!0}return!1},N=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var r=e.children.item(n);if("LEGEND"===r.tagName)return!!u.call(e,"fieldset[disabled] *")||!r.contains(t)}return!0}e=e.parentElement}return!1},C=function(t,e){return!(e.disabled||s(e)||y(e)||R(e,t)||v(e)||N(e))},T=function(t,e){return!(A(e)||h(e)<0||!C(t,e))},x=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},D=function t(e){var n=[],r=[];return e.forEach((function(e,o){var i=!!e.scopeParent,a=i?e.scopeParent:e,l=h(a,i),u=i?t(e.candidates):a;0===l?i?n.push.apply(n,u):n.push(a):r.push({documentOrder:o,tabIndex:l,item:e,isScope:i,content:u})})),r.sort(p).reduce((function(t,e){return e.isScope?t.push.apply(t,e.content):t.push(e.content),t}),[]).concat(n)},_=function(t,e){var n;return n=(e=e||{}).getShadowRoot?m([t],e.includeContainer,{filter:T.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:x}):f(t,e.includeContainer,T.bind(null,e)),D(n)},L=function(t,e){return(e=e||{}).getShadowRoot?m([t],e.includeContainer,{filter:C.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):f(t,e.includeContainer,C.bind(null,e))},M=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==u.call(t,a)&&T(e,t)},k=i.concat("iframe").join(","),P=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==u.call(t,k)&&C(e,t)};const $={getShadowRoot:!0};function q(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${e.guid()}`:""}function B(t){return Array.isArray(t)?t:Array.from(t)}function O(t){const e=H(t,`.${o.darkMode}, .${o.lightMode}`);return e?.classList.contains("calcite-mode-dark")?"dark":"light"}function F(t){const e="dir",n=H(t,`[${e}]`);return n?n.getAttribute(e):"ltr"}function U(t,e,n){const r=`[${e}]`,o=t.closest(r);return o?o.getAttribute(e):n}function j(t){return t.getRootNode()}function G(t){const e=j(t);return"host"in e?e:null}function Y(t){return t.host||null}function z(t,{selector:e,id:n}){function r(t){if(!t)return null;t.assignedSlot&&(t=t.assignedSlot);const o=j(t),i=n?"getElementById"in o?o.getElementById(n):null:e?o.querySelector(e):null,a=Y(o);return i||(a?r(a):null)}return r(t)}function H(t,e){function n(t){return t?t.closest(e)||n(Y(j(t))):null}return n(t)}function V(t,e){return X(t,e)}function X(t,e){if(!t)return;const n=e(t);if(void 0!==n)return n;const{parentNode:r}=t;return X(r instanceof ShadowRoot?r.host:r,e)}function J(t,e){return!!V(e,(e=>e===t||void 0))}function K(t){return"function"==typeof t?.setFocus}async function Q(t){if(t)return K(t)?t.setFocus():t.focus()}function W(t){t&&(_(t,$)[0]||t).focus()}const Z=":not([slot])";function tt(t,e,n){e&&!Array.isArray(e)&&"string"!=typeof e&&(n=e,e=null);const r=e?Array.isArray(e)?e.map((t=>`[slot="${t}"]`)).join(","):`[slot="${e}"]`:Z;return n?.all?nt(t,r,n):rt(t,r,n)}function et(t,e){return t?Array.from(t.children||[]).filter((t=>t?.matches(e))):[]}function nt(t,e,n){let r=e===Z?et(t,Z):Array.from(t.querySelectorAll(e));r=n&&!1===n.direct?r:r.filter((e=>e.parentElement===t)),r=n?.matches?r.filter((t=>t?.matches(n.matches))):r;const o=n?.selector;return o?r.map((t=>Array.from(t.querySelectorAll(o)))).reduce(((t,e)=>[...t,...e]),[]).filter((t=>!!t)):r}function rt(t,e,n){let r=e===Z?et(t,Z)[0]||null:t.querySelector(e);r=n&&!1===n.direct||r?.parentElement===t?r:null,r=n?.matches?r?.matches(n.matches)?r:null:r;const o=n?.selector;return o?r?.querySelector(o):r}function ot(t,e){return Array.from(t.children).filter((t=>t.matches(e)))}function it(t,e,n){return"string"==typeof e&&""!==e?e:""===e?t[n]:void 0}function at(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function lt(t){return Boolean(t).toString()}function ut(t){return!!ct(t).length}function ct(t){return t.target.assignedElements({flatten:!0})}function st(t){return!(!t.isPrimary||0!==t.button)}const dt=(t,e,n,r=!0)=>{const o=t.indexOf(e),i=0===o,a=o===t.length-1;let l;return r&&(n="previous"===n&&i?"last":"next"===n&&a?"first":n),l="previous"===n?t[o-1]||t[r?t.length-1:o]:"next"===n?t[o+1]||t[r?0:o]:"last"===n?t[t.length-1]:t[0],Q(l),l};t.CSS_UTILITY=o,t.autoMode=n,t.closestElementCrossShadowBoundary=H,t.containsCrossShadowBoundary=J,t.darkMode=r,t.ensureId=q,t.filterDirectChildren=ot,t.focusElement=Q,t.focusElementInGroup=dt,t.focusFirstTabbable=W,t.focusable=L,t.getElementDir=F,t.getElementProp=U,t.getModeName=O,t.getShadowRootNode=G,t.getSlotted=tt,t.intersects=at,t.isFocusable=P,t.isPrimaryPointerButton=st,t.isTabbable=M,t.nodeListToArray=B,t.queryElementRoots=z,t.setRequestedIcon=it,t.slotChangeGetAssignedElements=ct,t.slotChangeHasAssignedElement=ut,t.tabbable=_,t.tabbableOptions=$,t.toAriaBoolean=lt}));
