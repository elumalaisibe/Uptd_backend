/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/mathUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/ensureType","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/subclass","../../chunks/common","../../geometry/Extent","../../geometry/Polygon","./GeoreferenceBase"],(function(e,t,r,n,o,s,a,i,c,l,u,p){"use strict";let h=function(t){function n(e){var r;return(r=t.call(this,e)||this).extent=null,r.rotation=0,r.type="extent-and-rotation",r}return e._inherits(n,t),e._createClass(n,[{key:"coords",get:function(){if(null==this.extent)return null;const{xmin:e,ymin:t,xmax:r,ymax:n,spatialReference:o}=this.extent;let s;if(this.rotation){const{x:o,y:a}=this.extent.center,i=x(o,a,this.rotation);s=[i(e,t),i(e,n),i(r,n),i(r,t)],s.push(s[0])}else s=[[e,t],[e,n],[r,n],[r,t],[e,t]];return new u({rings:[s],spatialReference:o})},set:function(e){if(null==e||null==this.extent)return;const t=this.extent.spatialReference;if(null==(e=this.projectOrWarn(e,t))||null==e.extent)return;const{rings:[[n,o,s]],extent:{center:{x:a,y:i}}}=e,c=r.rad2deg(Math.PI/2-Math.atan2(o[1]-n[1],o[0]-n[0])),u=x(a,i,-c),[p,h]=u(n[0],n[1]),[y,f]=u(s[0],s[1]);this.extent=new l({xmin:p,ymin:h,xmax:y,ymax:f,spatialReference:t}),this.rotation=c}}]),n}(p);function x(e,t,r){const n=c.toRadian(r),o=Math.cos(n),s=Math.sin(n);return(r,n)=>[o*(r-e)+s*(n-t)+e,o*(n-t)-s*(r-e)+t]}t.__decorate([n.property()],h.prototype,"coords",null),t.__decorate([n.property({type:l})],h.prototype,"extent",void 0),t.__decorate([n.property({type:Number})],h.prototype,"rotation",void 0),h=t.__decorate([i.subclass("esri.layers.support.ExtentAndRotationGeoreference")],h);return h}));
