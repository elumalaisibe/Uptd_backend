/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","./BaseRasterFunction","./TableFunctionArguments"],(function(e,t,r,s,o,n,i,u,a){"use strict";let c=function(t){function r(){var e;return(e=t.apply(this,arguments)||this).functionName="Table",e.functionArguments=null,e.rasterArgumentNames=["raster"],e.isNoopProcess=!0,e}e._inherits(r,t);var s=r.prototype;return s._bindSourceRasters=function(){const e=this.sourceRasterInfos[0];if(e.bandCount>1||e.pixelType.startsWith("f"))return{success:!1,supportsGPU:!1,error:"table-function: Source data must be single band and integer pixel type."};const{attributeTableAsRecordSet:t}=this.functionArguments;if(!t)return{success:!1,supportsGPU:!1,error:"table-function: Missing attributeTableAsRecordSet argument."};this.outputPixelType=this._getOutputPixelType(e.pixelType);const r=e.clone();return r.pixelType=this.outputPixelType,r.bandCount=1,"thematic"!==r.dataType&&(r.keyProperties=r.keyProperties?{...r.keyProperties,DataType:"thematic"}:{DataType:"thematic"}),this.rasterInfo=r,{success:!0,supportsGPU:!0}},s._processPixels=function(e){return e.pixelBlocks?.[0]},e._createClass(r)}(u);t.__decorate([r.property({json:{write:!0,name:"rasterFunction"}})],c.prototype,"functionName",void 0),t.__decorate([r.property({type:a,json:{write:!0,name:"rasterFunctionArguments"}})],c.prototype,"functionArguments",void 0),t.__decorate([r.property()],c.prototype,"rasterArgumentNames",void 0),t.__decorate([r.property()],c.prototype,"isNoopProcess",void 0),c=t.__decorate([i.subclass("esri.layers.support.rasterFunctions.TableFunction")],c);return c}));
