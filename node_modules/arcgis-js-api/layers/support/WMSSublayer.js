/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../chunks/_rollupPluginBabelHelpers","../../chunks/tslib.es6","../../core/Collection","../../core/Identifiable","../../core/MultiOriginJSONSupport","../../core/reactiveUtils","../../core/accessorSupport/decorators/property","../../core/accessorSupport/decorators/cast","../../core/arrayUtils","../../core/has","../../core/accessorSupport/decorators/reader","../../core/accessorSupport/decorators/subclass","../../core/accessorSupport/ensureType","../../geometry/Extent"],(function(e,r,t,o,n,l,s,a,i,p,y,c,d,u){"use strict";var h;let _=0,f=h=function(r){function o(t){var o;return(o=r.call(this,t)||this).description=null,o.dimensions=null,o.fullExtent=null,o.fullExtents=null,o.legendUrl=null,o.legendEnabled=!0,o.layer=null,o.maxScale=0,o.minScale=0,o.name=null,o.parent=null,o.popupEnabled=!1,o.queryable=!1,o.sublayers=null,o.spatialReferences=null,o.title=null,o.addHandles([l.on((()=>o.sublayers),"after-add",(({item:r})=>{r.parent=e._assertThisInitialized(o),r.layer=o.layer}),l.sync),l.on((()=>o.sublayers),"after-remove",(({item:e})=>{e.layer=e.parent=null}),l.sync),l.watch((()=>o.sublayers),((r,t)=>{if(t)for(const e of t)e.layer=e.parent=null;if(r)for(const n of r)n.parent=e._assertThisInitialized(o),n.layer=o.layer}),l.sync),l.watch((()=>o.layer),(e=>{if(o.sublayers)for(const r of o.sublayers)r.layer=e}),l.sync)]),o}e._inherits(o,r);var n=o.prototype;return n.readLegendUrl=function(e,r){return r.legendUrl??r.legendURL??null},n.castSublayers=function(e){return d.ensureType(t.ofType(h),e)},n.clone=function(){const e=new h;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents?.map((e=>e.clone()))??null),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers&&this.sublayers.map((e=>e.clone()))),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences?.map((e=>e))),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e},n._setAndNotifyLayer=function(e,r){const t=this.layer;this._get(e)!==r&&(this._set(e,r),t&&t.emit("wms-sublayer-update",{propertyName:e,id:this.id}))},e._createClass(o,[{key:"id",get:function(){const e=this._get("id");return e??_++},set:function(e){this._set("id",e)}},{key:"effectiveScaleRange",get:function(){const{minScale:e,maxScale:r}=this;return{minScale:e,maxScale:r}}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}}]),o}(o.IdentifiableMixin(n.MultiOriginJSONSupport));r.__decorate([s.property()],f.prototype,"description",void 0),r.__decorate([s.property({readOnly:!0})],f.prototype,"dimensions",void 0),r.__decorate([s.property({type:u,json:{name:"extent"}})],f.prototype,"fullExtent",void 0),r.__decorate([s.property()],f.prototype,"fullExtents",void 0),r.__decorate([s.property({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],f.prototype,"id",null),r.__decorate([s.property({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],f.prototype,"legendUrl",void 0),r.__decorate([y.reader("legendUrl",["legendUrl","legendURL"])],f.prototype,"readLegendUrl",null),r.__decorate([s.property({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],f.prototype,"legendEnabled",void 0),r.__decorate([s.property()],f.prototype,"layer",void 0),r.__decorate([s.property()],f.prototype,"maxScale",void 0),r.__decorate([s.property()],f.prototype,"minScale",void 0),r.__decorate([s.property({readOnly:!0})],f.prototype,"effectiveScaleRange",null),r.__decorate([s.property({type:String,json:{write:{ignoreOrigin:!0}}})],f.prototype,"name",void 0),r.__decorate([s.property()],f.prototype,"parent",void 0),r.__decorate([s.property({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],f.prototype,"popupEnabled",void 0),r.__decorate([s.property({type:Boolean,json:{write:{ignoreOrigin:!0}}})],f.prototype,"queryable",void 0),r.__decorate([s.property()],f.prototype,"sublayers",void 0),r.__decorate([a.cast("sublayers")],f.prototype,"castSublayers",null),r.__decorate([s.property({type:[Number],json:{read:{source:"spatialReferences"}}})],f.prototype,"spatialReferences",void 0),r.__decorate([s.property({type:String,json:{write:{ignoreOrigin:!0}}})],f.prototype,"title",void 0),r.__decorate([s.property({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],f.prototype,"visible",null),f=h=r.__decorate([c.subclass("esri.layers.support.WMSSublayer")],f);return f}));
