/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/support/spatialReferenceUtils","../../../support/fieldUtils"],(function(e,t,i,n,r){"use strict";let l=i._createClass((function(){this.code=null,this.description=null})),s=i._createClass((function(e){this.error=new l,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}));function o(e){return new s(e)}let u=i._createClass((function(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}));function a(e){return new u(e)}const c=new Set;function d(e,t,i,n=!1,l){c.clear();for(const s in i){const u=e.get(s);if(!u)continue;const a=i[s],d=f(u,a);if(d!==a&&l&&l.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:u,originalValue:a,sanitizedValue:d}}),c.add(u.name),u&&(n||u.editable)){const e=r.validateFieldValue(u,d);if(e)return o(r.validationErrorToString(e,u,d));t[u.name]=d}}for(const r of e?.requiredFields??[])if(!c.has(r.name))return o(`missing required field "${r.name}"`);return null}function f(e,t){let i=t;return"string"==typeof t&&r.isNumericField(e)?i=parseFloat(t):null!=t&&r.isStringField(e)&&"string"!=typeof t&&(i=String(t)),r.sanitizeNullFieldValue(i)}let g;function m(e,t){if(!e||!n.isValid(t))return e;if("rings"in e||"paths"in e){if(null==g)throw new TypeError("geometry engine not loaded");return g.simplify(t,e)}return e}async function p(){return null==g&&(g=await new Promise(((t,i)=>e(["../../../../geometry/geometryEngineJSON"],t,i)))),g}async function y(e,t){!n.isValid(e)||"esriGeometryPolygon"!==t&&"esriGeometryPolyline"!==t||await p()}t.createFeatureEditErrorResult=o,t.createFeatureEditSuccessResult=a,t.loadGeometryEngineForSimplify=y,t.mixAttributes=d,t.simplify=m,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
