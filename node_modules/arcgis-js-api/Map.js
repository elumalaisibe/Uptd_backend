/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["./chunks/_rollupPluginBabelHelpers","./chunks/tslib.es6","./Basemap","./Ground","./core/Accessor","./core/CollectionFlattener","./core/Evented","./core/accessorSupport/decorators/property","./core/accessorSupport/decorators/cast","./core/arrayUtils","./core/has","./core/accessorSupport/decorators/subclass","./layers/support/editableLayers","./support/basemapUtils","./support/collectionUtils","./support/groundUtils","./support/LayersMixin","./support/TablesMixin"],(function(e,r,t,a,s,o,l,n,i,p,c,d,u,y,b,h,_,m){"use strict";let L=function(r){function t(t){var s;return(s=r.call(this,t)||this).allLayers=new o({getCollections:()=>[s.basemap?.baseLayers,s.ground?.layers,s.layers,s.basemap?.referenceLayers],getChildrenFunction:e=>"layers"in e?e.layers:null}),s.allTables=b.createFlattenedTablesCollection(e._assertThisInitialized(s)),s.basemap=null,s.editableLayers=new o({getCollections:()=>[s.allLayers],itemFilterFunction:u.isEditableLayer}),s.ground=new a,s._basemapCache=y.createCache(),s}e._inherits(t,r);var s=t.prototype;return s.destroy=function(){this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.ground?.destroy(),this.basemap?.destroy(),y.destroyCache(this._basemapCache),this._basemapCache=null},s.castBasemap=function(e){return y.ensureType(e,this._basemapCache)},s.castGround=function(e){const r=h.ensureType(e);return r??this._get("ground")},s.findLayerById=function(e){return this.allLayers.find((r=>r.id===e))},s.findTableById=function(e){return this.allTables.find((r=>r.id===e))},e._createClass(t)}(m.TablesMixin(_.LayersMixin(l.EventedMixin(s))));r.__decorate([n.property({readOnly:!0,dependsOn:[]})],L.prototype,"allLayers",void 0),r.__decorate([n.property({readOnly:!0})],L.prototype,"allTables",void 0),r.__decorate([n.property({type:t})],L.prototype,"basemap",void 0),r.__decorate([i.cast("basemap")],L.prototype,"castBasemap",null),r.__decorate([n.property({readOnly:!0})],L.prototype,"editableLayers",void 0),r.__decorate([n.property({type:a,nonNullable:!0})],L.prototype,"ground",void 0),r.__decorate([i.cast("ground")],L.prototype,"castGround",null),L=r.__decorate([d.subclass("esri.Map")],L);return L}));
