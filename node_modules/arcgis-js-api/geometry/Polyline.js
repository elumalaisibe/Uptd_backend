/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/lang","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/accessorSupport/decorators/subclass","../core/accessorSupport/decorators/writer","./Extent","./Geometry","./Point","./SpatialReference","./support/extentUtils","./support/zmUtils"],(function(t,e,r,n,s,i,a,o,h,p,l,c,u){"use strict";var f;function y(t){return!Array.isArray(t[0])}let d=f=function(e){function n(...t){var r;return(r=e.call(this,...t)||this).paths=[],r.type="polyline",r}t._inherits(n,e);var s=n.prototype;return s.normalizeCtorArgs=function(t,e){let r,n,s=null,i=null;return t&&!Array.isArray(t)?(s=t.paths??null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),r=t.hasZ,n=t.hasM):s=t,s=s||[],e=e||l.WGS84,s.length&&s[0]&&null!=s[0][0]&&"number"==typeof s[0][0]&&(s=[s]),i=s[0]&&s[0][0],i&&(void 0===r&&void 0===n?(r=i.length>2,n=!1):void 0===r?r=!n&&i.length>3:void 0===n&&(n=!r&&i.length>3)),{paths:s,spatialReference:e,hasZ:r,hasM:n}},s.writePaths=function(t,e){e.paths=r.clone(this.paths)},s.addPath=function(t){if(!t)return;const e=this.paths,r=e.length;if(y(t)){const n=[];for(let e=0,r=t.length;e<r;e++)n[e]=t[e].toArray();e[r]=n}else e[r]=t.concat();return this.notifyChange("paths"),this},s.clone=function(){const t=new f;return t.spatialReference=this.spatialReference,t.paths=r.clone(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t},s.getPoint=function(t,e){if(!this._validateInputs(t,e))return null;const r=this.paths[t][e],n=this.hasZ,s=this.hasM;return n&&!s?new p(r[0],r[1],r[2],void 0,this.spatialReference):s&&!n?new p(r[0],r[1],void 0,r[2],this.spatialReference):n&&s?new p(r[0],r[1],r[2],r[3],this.spatialReference):new p(r[0],r[1],this.spatialReference)},s.insertPoint=function(t,e,r){return this._validateInputs(t,e,!0)?(u.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this.notifyChange("paths"),this):this},s.removePath=function(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],r=this.spatialReference,n=e.map((t=>new p(t,r)));return this.notifyChange("paths"),n},s.removePoint=function(t,e){if(!this._validateInputs(t,e))return null;const r=new p(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),r},s.setPoint=function(t,e,r){return this._validateInputs(t,e)?(u.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this.notifyChange("paths"),this):this},s._validateInputs=function(t,e,r=!1){if(null==t||t<0||t>=this.paths.length)return!1;if(null!=e){const n=this.paths[t];if(r&&(e<0||e>n.length))return!1;if(!r&&(e<0||e>=n.length))return!1}return!0},s.toJSON=function(t){return this.write({},t)},t._createClass(n,[{key:"cache",get:function(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}},{key:"extent",get:function(){const{spatialReference:t}=this,e=c.getPolylineExtent(this);if(!e)return null;const r=new o(e);return r.spatialReference=t,r}}]),n}(h);e.__decorate([n.property({readOnly:!0})],d.prototype,"cache",null),e.__decorate([n.property({readOnly:!0})],d.prototype,"extent",null),e.__decorate([n.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],d.prototype,"paths",void 0),e.__decorate([a.writer("paths")],d.prototype,"writePaths",null),d=f=e.__decorate([i.subclass("esri.geometry.Polyline")],d),d.prototype.toJSON.isDefaultToJSON=!0;return d}));
