/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../chunks/_rollupPluginBabelHelpers","../request","../core/Error","./messages"],(function(e,t,n,r,o){"use strict";async function s(e,t,n,s){const a=t.exec(n);if(!a)throw new r("esri-intl:invalid-bundle",`Bundle id "${n}" is not compatible with the pattern "${t}"`);const l=a[1]?`${a[1]}/`:"",c=a[2],u=o.normalizeMessageBundleLocale(s),d=`${l}${c}.json`,h=u?`${l}${c}_${u}.json`:d;let w;try{w=await i(e(h))}catch(f){if(h===d)throw new r("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:f});try{w=await i(e(d))}catch(f){throw new r("intl:unknown-bundle",`Bundle "${n}" cannot be loaded`,{error:f})}}return w}async function i(e){if(null!=c.fetchBundleAsset)return c.fetchBundleAsset(e);const t=await n(e,{responseType:"text"});return JSON.parse(t.data)}let a=function(){function e({base:e="",pattern:t,location:n=new URL(window.location.href)}){let r;r="string"==typeof n?e=>new URL(e,new URL(n,window.location.href)).href:n instanceof URL?e=>new URL(e,n).href:n,this.pattern="string"==typeof t?new RegExp(`^${t}`):t,this.getAssetUrl=r,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}return e.prototype.fetchMessageBundle=function(e,t){return s(this.getAssetUrl,this.matcher,e,t)},t._createClass(e)}();function l(e){return new a(e)}const c={};e.JSONLoader=a,e.createJSONLoader=l,e.test=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
