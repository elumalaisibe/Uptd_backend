/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers"],(function(e,t){"use strict";let n=function(){function e(){}return e.local=function(){return null===e.instance&&(e.instance=new e),e.instance},e.prototype.execute=function(e,t,n,s,i){return new o(e,t,n)},t._createClass(e)}();n.instance=null;let o=function(){function e(e,t,n){this._inputGeometries=e,this._angleTolerance=void 0!==t.angleTolerance?t.angleTolerance:120,this._maxCosAngle=Math.cos((1-Math.abs(this._angleTolerance)/180)*Math.PI)}var n=e.prototype;return n.next=function(){let e=this._inputGeometries.next();for(;e;){if("esriGeometryPolygon"===e.geometryType)this._isClosed=!0;else if("esriGeometryPolyline"===e.geometryType)this._isClosed=!1;else{if("esriGeometryEnvelope"!==e.geometryType){e=this._inputGeometries.next();continue}if(this._maxCosAngle)return e;this._isClosed=!0}for(;e.nextPath();)this._processPath(e);return e.reset(),e}return null},n._processPath=function(e){if(e.nextPoint()){const t=e.x,n=e.y;let o=t,s=n,i=e.numPoints,r=0,l=0,a=0,c=0,u=0,h=0;this._isClosed&&++i;for(let f=1;e.nextPoint()||f<i;++f){let _,p;this._isClosed&&f===i-1?(_=t,p=n):(_=e.x,p=e.y);const y=_-o,g=p-s,m=Math.sqrt(y*y+g*g);if(f>1&&m>0&&a>0){(r*y+l*g)/m/a<=this._maxCosAngle&&e.setControlPointAt(f-1)}1===f&&(c=y,u=g,h=m),m>0&&(o=_,s=p,r=y,l=g,a=m)}if(this._isClosed&&a>0&&h>0){(r*c+l*u)/h/a<=this._maxCosAngle&&e.setControlPointAt(0)}}},t._createClass(e)}();e.EffectAddControlPoints=n,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
