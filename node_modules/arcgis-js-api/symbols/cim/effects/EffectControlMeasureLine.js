/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry/GeometryCursor","../../../geometry/geometryCursorCollectUtils","../CIMCursor","../enums"],(function(t,s,e,i,h,r){"use strict";let c=function(){function t(){}return t.local=function(){return null===t.instance&&(t.instance=new t),t.instance},t.prototype.execute=function(t,s,e,i,h){return new o(t,s,e)},s._createClass(t)}();c.instance=null;let o=function(){function t(t,s,e){this._defaultPointSize=20,this._inputGeometries=t,this._geomUnitsPerPoint=e,this._rule=s.rule??r.GeometricEffectControlMeasureLineRule.FullGeometry,this._defaultSize=this._defaultPointSize*e}var c=t.prototype;return c.next=function(){let t;for(;t=this._inputGeometries.next();){const s=this._processGeom(i.collectMultipath(t));if(s&&s.length)return e.GeometryCursor.fromJSONCIM({paths:s})}return null},c._clone=function(t){return[t[0],t[1]]},c._mid=function(t,s){return[(t[0]+s[0])/2,(t[1]+s[1])/2]},c._mix=function(t,s,e,i){return[t[0]*s+e[0]*i,t[1]*s+e[1]*i]},c._add=function(t,s){return[t[0]+s[0],t[1]+s[1]]},c._add2=function(t,s,e){return[t[0]+s,t[1]+e]},c._sub=function(t,s){return[t[0]-s[0],t[1]-s[1]]},c._dist=function(t,s){return Math.sqrt((t[0]-s[0])*(t[0]-s[0])+(t[1]-s[1])*(t[1]-s[1]))},c._norm=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},c._normalize=function(t,s=1){const e=s/this._norm(t);t[0]*=e,t[1]*=e},c._leftPerpendicular=function(t){const s=-t[1],e=t[0];t[0]=s,t[1]=e},c._leftPerp=function(t){return[-t[1],t[0]]},c._rightPerpendicular=function(t){const s=t[1],e=-t[0];t[0]=s,t[1]=e},c._rightPerp=function(t){return[t[1],-t[0]]},c._dotProduct=function(t,s){return t[0]*s[0]+t[1]*s[1]},c._crossProduct=function(t,s){return t[0]*s[1]-t[1]*s[0]},c._rotateDirect=function(t,s,e){const i=t[0]*s-t[1]*e,h=t[0]*e+t[1]*s;t[0]=i,t[1]=h},c._makeCtrlPt=function(t){const s=[t[0],t[1]];return h.setId(s,1),s},c._addAngledTicks=function(t,s,e,i){const h=this._sub(e,s);this._normalize(h);const r=this._crossProduct(h,this._sub(i,s));let c;c=r>0?this._rightPerp(h):this._leftPerp(h);const o=Math.abs(r)/2,u=[];u.push([s[0]+(c[0]-h[0])*o,s[1]+(c[1]-h[1])*o]),u.push(s),u.push(e),u.push([e[0]+(c[0]+h[0])*o,e[1]+(c[1]+h[1])*o]),t.push(u)},c._addBezier2=function(t,s,e,i,h){if(0==h--)return void t.push(i);const r=this._mid(s,e),c=this._mid(e,i),o=this._mid(r,c);this._addBezier2(t,s,r,o,h),this._addBezier2(t,o,c,i,h)},c._addBezier3=function(t,s,e,i,h,r){if(0==r--)return void t.push(h);const c=this._mid(s,e),o=this._mid(e,i),u=this._mid(i,h),n=this._mid(c,o),_=this._mid(o,u),a=this._mid(n,_);this._addBezier3(t,s,c,n,a,r),this._addBezier3(t,a,_,u,h,r)},c._add90DegArc=function(t,s,e,i,h){const r=h??this._crossProduct(this._sub(e,s),this._sub(i,s))>0,c=this._mid(s,e),o=this._sub(c,s);r?this._leftPerpendicular(o):this._rightPerpendicular(o),c[0]+=o[0],c[1]+=o[1],this._addBezier3(t,s,this._mix(s,.33333,c,.66667),this._mix(e,.33333,c,.66667),e,4)},c._addArrow=function(t,s,e){const i=s[0],h=s[1],r=s[s.length-1],c=this._sub(i,h);this._normalize(c);const o=this._crossProduct(c,this._sub(r,h)),u=.5*o,n=this._leftPerp(c),_=[r[0]-n[0]*o,r[1]-n[1]*o],a=s.length-1,l=[];l.push(e?[-n[0],-n[1]]:n);let p=[-c[0],-c[1]];for(let d=1;d<a-1;d++){const t=this._sub(s[d+1],s[d]);this._normalize(t);const e=this._dotProduct(t,p),i=this._crossProduct(t,p),h=Math.sqrt((1+e)/2),r=this._sub(t,p);this._normalize(r),r[0]/=h,r[1]/=h,l.push(i<0?[-r[0],-r[1]]:r),p=t}l.push(this._rightPerp(p));for(let d=l.length-1;d>0;d--)t.push([s[d][0]+l[d][0]*u,s[d][1]+l[d][1]*u]);t.push([_[0]+l[0][0]*u,_[1]+l[0][1]*u]),t.push([_[0]+l[0][0]*o,_[1]+l[0][1]*o]),t.push(i),t.push([_[0]-l[0][0]*o,_[1]-l[0][1]*o]),t.push([_[0]-l[0][0]*u,_[1]-l[0][1]*u]);for(let d=1;d<l.length;d++)t.push([s[d][0]-l[d][0]*u,s[d][1]-l[d][1]*u])},c._cp2=function(t,s,e){return t.length>=2?t[1]:this._add2(t[0],s*this._defaultSize,e*this._defaultSize)},c._cp3=function(t,s,e,i){if(t.length>=3)return t[2];const h=this._mix(t[0],1-e,s,e),r=this._sub(s,t[0]);return this._normalize(r),this._rightPerpendicular(r),[h[0]+r[0]*i*this._defaultSize,h[1]+r[1]*i*this._defaultSize]},c._arrowPath=function(t){if(t.length>2)return t;const s=t[0],e=this._cp2(t,-4,0),i=this._sub(s,e);this._normalize(i);const h=this._rightPerp(i);return[s,e,[s[0]+(h[0]-i[0])*this._defaultSize,s[1]+(h[1]-i[1])*this._defaultSize]]},c._arrowLastSeg=function(t){const s=t[0],e=this._cp2(t,-4,0);let i;if(t.length>=3)i=t[t.length-1];else{const t=this._sub(s,e);this._normalize(t);const h=this._rightPerp(t);i=[s[0]+(h[0]-t[0])*this._defaultSize,s[1]+(h[1]-t[1])*this._defaultSize]}return[e,i]},c._processGeom=function(t){if(!t)return null;const s=[];for(const e of t){if(!e||0===e.length)continue;const t=e.length;let i=e[0];switch(this._rule){case r.GeometricEffectControlMeasureLineRule.PerpendicularFromFirstSegment:{const t=this._cp2(e,0,-1),h=this._cp3(e,t,.5,4),r=[];r.push(h),r.push(this._mid(i,t)),s.push(r);break}case r.GeometricEffectControlMeasureLineRule.ReversedFirstSegment:{const t=this._cp2(e,0,-1);s.push([t,i]);break}case r.GeometricEffectControlMeasureLineRule.PerpendicularToSecondSegment:{const t=this._cp2(e,-4,1),h=this._cp3(e,t,.882353,-1.94),r=[];r.push(this._mid(t,h)),r.push(i),s.push(r);break}case r.GeometricEffectControlMeasureLineRule.SecondSegmentWithTicks:{const t=this._cp2(e,-4,1),h=this._cp3(e,t,.882353,-1.94),r=this._sub(h,t);let c;c=this._crossProduct(r,this._sub(i,t))>0?this._rightPerp(c):this._leftPerp(r);const o=[];o.push([t[0]+(c[0]-r[0])/3,t[1]+(c[1]-r[1])/3]),o.push(t),o.push(h),o.push([h[0]+(c[0]+r[0])/3,h[1]+(c[1]+r[1])/3]),s.push(o);break}case r.GeometricEffectControlMeasureLineRule.DoublePerpendicular:{const t=this._cp2(e,0,-1),h=this._cp3(e,t,.5,3),r=this._mid(i,t),c=this._sub(r,h);this._normalize(c);const o=this._crossProduct(c,this._sub(i,h));this._leftPerpendicular(c);const u=[];u.push(i),u.push([h[0]+c[0]*o,h[1]+c[1]*o]),s.push(u);const n=[];n.push([h[0]-c[0]*o,h[1]-c[1]*o]),n.push(t),s.push(n);break}case r.GeometricEffectControlMeasureLineRule.OppositeToFirstSegment:{const t=this._cp2(e,0,-1),h=this._cp3(e,t,.5,3),r=this._mid(i,t),c=this._sub(r,h);this._normalize(c);const o=this._crossProduct(c,this._sub(i,h));this._leftPerpendicular(c);const u=[];u.push([h[0]+c[0]*o,h[1]+c[1]*o]),u.push([h[0]-c[0]*o,h[1]-c[1]*o]),s.push(u);break}case r.GeometricEffectControlMeasureLineRule.TriplePerpendicular:{const t=this._cp2(e,0,-1),h=this._cp3(e,t,.5,4),r=this._mid(i,t),c=this._sub(r,h);this._normalize(c);const o=this._crossProduct(c,this._sub(i,h));this._leftPerpendicular(c);const u=[];u.push([h[0]+c[0]*o*.8,h[1]+c[1]*o*.8]),u.push([r[0]+.8*(i[0]-r[0]),r[1]+.8*(i[1]-r[1])]),s.push(u),s.push([h,r]);const n=[];n.push([h[0]-c[0]*o*.8,h[1]-c[1]*o*.8]),n.push([r[0]+.8*(t[0]-r[0]),r[1]+.8*(t[1]-r[1])]),s.push(n);break}case r.GeometricEffectControlMeasureLineRule.HalfCircleFirstSegment:{const t=this._cp2(e,0,-1),h=this._cp3(e,t,.5,4),r=this._mid(i,t);let c=this._sub(t,i);const o=Math.cos(Math.PI/18),u=Math.sin(Math.PI/18),n=Math.sqrt((1+o)/2),_=Math.sqrt((1-o)/2),a=[];let l;this._crossProduct(c,this._sub(h,i))>0?(a.push(i),c=this._sub(i,r),l=t):(a.push(t),c=this._sub(t,r),l=i),this._rotateDirect(c,n,_),c[0]/=n,c[1]/=n;for(let s=1;s<=18;s++)a.push(this._add(r,c)),this._rotateDirect(c,o,u);a.push(l),s.push(a);break}case r.GeometricEffectControlMeasureLineRule.HalfCircleSecondSegment:{const t=this._cp2(e,0,-1),h=this._cp3(e,t,1,-1);let r=this._sub(i,t);this._normalize(r);const c=this._crossProduct(r,this._sub(h,t))/2;this._leftPerpendicular(r);const o=[t[0]+r[0]*c,t[1]+r[1]*c];r=this._sub(t,o);const u=Math.cos(Math.PI/18);let n=Math.sin(Math.PI/18);c>0&&(n=-n);const _=[t];for(let s=1;s<=18;s++)this._rotateDirect(r,u,n),_.push(this._add(o,r));s.push(_);break}case r.GeometricEffectControlMeasureLineRule.HalfCircleExtended:{const h=this._cp2(e,0,-2),r=this._cp3(e,h,1,-1);let c;if(t>=4)c=e[3];else{const t=this._sub(i,h);c=this._add(r,t)}const o=this._dist(h,r)/2/.75,u=this._sub(h,i);this._normalize(u,o);const n=this._sub(r,c);this._normalize(n,o);const _=[c,r];s.push(_);const a=[this._clone(r)];this._addBezier3(a,r,this._add(r,n),this._add(h,u),h,4),a.push(i),s.push(a);break}case r.GeometricEffectControlMeasureLineRule.OpenCircle:{const t=this._cp2(e,-2,0),h=this._sub(t,i),r=Math.cos(Math.PI/18),c=-Math.sin(Math.PI/18),o=[t];for(let s=1;s<=33;s++)this._rotateDirect(h,r,c),o.push(this._add(i,h));s.push(o);break}case r.GeometricEffectControlMeasureLineRule.CoverageEdgesWithTicks:{const h=this._cp2(e,0,-1);let r,c;if(t>=3)r=e[2];else{const t=this._sub(h,i),s=this._leftPerp(t);r=[i[0]+s[0]-.25*t[0],i[1]+s[1]-.25*t[1]]}if(t>=4)c=e[3];else{const t=this._mid(i,h),s=this._sub(i,h);this._normalize(s),this._leftPerpendicular(s);const e=this._crossProduct(s,this._sub(r,t));this._rightPerpendicular(s),c=[r[0]+s[0]*e*2,r[1]+s[1]*e*2]}const o=this._sub(h,i);let u,n;u=this._crossProduct(o,this._sub(r,i))>0?this._rightPerp(o):this._leftPerp(o),n=[],n.push(r),n.push(i),n.push([i[0]+(u[0]-o[0])/3,i[1]+(u[1]-o[1])/3]),s.push(n),u=this._crossProduct(o,this._sub(c,h))>0?this._rightPerp(u):this._leftPerp(o),n=[],n.push([h[0]+(u[0]+o[0])/3,h[1]+(u[1]+o[1])/3]),n.push(h),n.push(c),s.push(n);break}case r.GeometricEffectControlMeasureLineRule.GapExtentWithDoubleTicks:{const h=this._cp2(e,0,2),r=this._cp3(e,h,0,1);let c;if(t>=4)c=e[3];else{const t=this._sub(h,i);c=this._add(r,t)}this._addAngledTicks(s,i,h,this._mid(r,c)),this._addAngledTicks(s,r,c,this._mid(i,h));break}case r.GeometricEffectControlMeasureLineRule.GapExtentMidline:{const h=this._cp2(e,2,0),r=this._cp3(e,h,0,1);let c;if(t>=4)c=e[3];else{const t=this._sub(h,i);c=this._add(r,t)}const o=[];o.push(this._mid(i,r)),o.push(this._mid(h,c)),s.push(o);break}case r.GeometricEffectControlMeasureLineRule.Chevron:{const h=this._cp2(e,-1,-1);let r;if(t>=3)r=e[2];else{const t=this._sub(h,i);this._leftPerpendicular(t),r=this._add(i,t)}s.push([h,this._makeCtrlPt(i),r]);break}case r.GeometricEffectControlMeasureLineRule.PerpendicularWithArc:{const t=this._cp2(e,0,-2),h=this._cp3(e,t,.5,-1);let r=this._sub(t,i);const c=this._norm(r);r[0]/=c,r[1]/=c;const o=this._crossProduct(r,this._sub(h,i));let u=this._dotProduct(r,this._sub(h,i));u<.05*c?u=.05*c:u>.95*c&&(u=.95*c);const n=[i[0]+r[0]*u,i[1]+r[1]*u];this._leftPerpendicular(r);let _=[];_.push([n[0]-r[0]*o,n[1]-r[1]*o]),_.push([n[0]+r[0]*o,n[1]+r[1]*o]),s.push(_);const a=[t[0]+r[0]*o,t[1]+r[1]*o];r=this._sub(t,a);const l=Math.cos(Math.PI/18);let p=Math.sin(Math.PI/18);o<0&&(p=-p),_=[i,t];for(let s=1;s<=9;s++)this._rotateDirect(r,l,p),_.push(this._add(a,r));s.push(_);break}case r.GeometricEffectControlMeasureLineRule.ClosedHalfCircle:{const t=this._cp2(e,2,0),h=this._mid(i,t),r=this._sub(t,h),c=Math.cos(Math.PI/18),o=Math.sin(Math.PI/18),u=[i,t];for(let s=1;s<=18;s++)this._rotateDirect(r,c,o),u.push(this._add(h,r));s.push(u);break}case r.GeometricEffectControlMeasureLineRule.TripleParallelExtended:{const t=this._cp2(e,0,-2),r=this._cp3(e,t,1,-2),c=this._mid(i,t),o=this._sub(r,t);this._normalize(o);const u=Math.abs(this._crossProduct(o,this._sub(c,t)))/2,n=this._dist(t,r),_=[t,i];_.push([i[0]+o[0]*n*.5,i[1]+o[1]*n*.5]),s.push(_);const a=[];a.push([c[0]-o[0]*u,c[1]-o[1]*u]),a.push([c[0]+o[0]*n*.375,c[1]+o[1]*n*.375]),h.setId(a[a.length-1],1),a.push([c[0]+o[0]*n*.75,c[1]+o[1]*n*.75]),s.push(a);const l=[t,r];s.push(l);break}case r.GeometricEffectControlMeasureLineRule.ParallelWithTicks:{const t=this._cp2(e,3,0),h=this._cp3(e,t,.5,-1),r=this._sub(h,t);this._normalize(r);const c=this._crossProduct(r,this._sub(h,i));this._leftPerpendicular(r),this._addAngledTicks(s,i,t,h),this._addAngledTicks(s,this._mix(i,1,r,c),this._mix(t,1,r,c),this._mid(i,t));break}case r.GeometricEffectControlMeasureLineRule.Parallel:{const t=this._cp2(e,3,0),h=this._cp3(e,t,.5,-1),r=this._sub(t,i);this._normalize(r);const c=this._leftPerp(r),o=this._crossProduct(r,this._sub(h,i));let u=[i,t];s.push(u),u=[],u.push([i[0]+c[0]*o,i[1]+c[1]*o]),u.push([t[0]+c[0]*o,t[1]+c[1]*o]),s.push(u);break}case r.GeometricEffectControlMeasureLineRule.PerpendicularToFirstSegment:{const t=this._cp2(e,3,0),h=this._cp3(e,t,.5,-1),r=this._mid(i,t),c=this._sub(t,i);this._normalize(c);const o=this._crossProduct(c,this._sub(h,i));this._leftPerpendicular(c);const u=[];u.push([r[0]-c[0]*o*.25,r[1]-c[1]*o*.25]),u.push([r[0]+c[0]*o*1.25,r[1]+c[1]*o*1.25]),s.push(u);break}case r.GeometricEffectControlMeasureLineRule.ParallelOffset:{const t=this._cp2(e,3,0),h=this._cp3(e,t,.5,-1),r=this._sub(t,i);this._normalize(r);const c=this._crossProduct(r,this._sub(h,i));this._leftPerpendicular(r);const o=[];o.push([i[0]-r[0]*c,i[1]-r[1]*c]),o.push([t[0]-r[0]*c,t[1]-r[1]*c]),s.push(o);const u=[];u.push([i[0]+r[0]*c,i[1]+r[1]*c]),u.push([t[0]+r[0]*c,t[1]+r[1]*c]),s.push(u);break}case r.GeometricEffectControlMeasureLineRule.OffsetOpposite:{const t=this._cp2(e,3,0),h=this._cp3(e,t,.5,-1),r=this._sub(t,i);this._normalize(r);const c=this._crossProduct(r,this._sub(h,i));this._leftPerpendicular(r);const o=[];o.push([i[0]-r[0]*c,i[1]-r[1]*c]),o.push([t[0]-r[0]*c,t[1]-r[1]*c]),s.push(o);break}case r.GeometricEffectControlMeasureLineRule.OffsetSame:{const t=this._cp2(e,3,0),h=this._cp3(e,t,.5,-1),r=this._sub(t,i);this._normalize(r);const c=this._crossProduct(r,this._sub(h,i));this._leftPerpendicular(r);const o=[];o.push([i[0]+r[0]*c,i[1]+r[1]*c]),o.push([t[0]+r[0]*c,t[1]+r[1]*c]),s.push(o);break}case r.GeometricEffectControlMeasureLineRule.CircleWithArc:{let r=this._cp2(e,3,0);const c=this._cp3(e,r,.5,-1);let o,u;if(t>=4)o=e[3],u=this._crossProduct(this._sub(o,r),this._sub(c,r))>0;else{o=r,u=this._crossProduct(this._sub(o,i),this._sub(c,i))>0;const t=24*this._geomUnitsPerPoint,s=this._sub(o,i);this._normalize(s,t);const e=Math.sqrt(2)/2;this._rotateDirect(s,e,u?e:-e),r=this._add(i,s)}const n=this._sub(r,i),_=Math.cos(Math.PI/18),a=Math.sin(Math.PI/18),l=[r];for(let t=1;t<=36;t++)this._rotateDirect(n,_,a),l.push(this._add(i,n));this._add90DegArc(l,r,o,c,u),h.setId(l[l.length-8],1),s.push(l);break}case r.GeometricEffectControlMeasureLineRule.DoubleJog:{let h,r,c=this._cp2(e,-3,1);if(h=t>=3?e[2]:this._add(i,this._sub(i,c)),t>=4)r=e[3];else{const t=i;i=c,r=h;const s=this._dist(i,t),e=this._dist(r,t);let o=30*this._geomUnitsPerPoint;.5*s<o&&(o=.5*s),.5*e<o&&(o=.5*e),c=this._mix(i,o/s,t,(s-o)/s),h=this._mix(r,o/e,t,(e-o)/e)}const o=this._mid(i,c),u=this._mid(r,h),n=this._dist(i,c),_=this._dist(h,r);let a=Math.min(n,_)/8;a=Math.min(a,24*this._geomUnitsPerPoint);const l=Math.cos(Math.PI/4);let p=this._sub(i,c);this._normalize(p,a),this._crossProduct(p,this._sub(r,c))>0?this._rotateDirect(p,l,-l):this._rotateDirect(p,l,l);let d=[];d.push(c),d.push(this._add(o,p)),d.push(this._sub(o,p)),d.push(i),s.push(d),p=this._sub(r,h),this._normalize(p,a),this._crossProduct(p,this._sub(i,h))<0?this._rotateDirect(p,l,l):this._rotateDirect(p,l,-l),d=[],d.push(h),d.push(this._add(u,p)),d.push(this._sub(u,p)),d.push(r),s.push(d);break}case r.GeometricEffectControlMeasureLineRule.PerpendicularOffset:{const t=this._cp2(e,-4,1),h=this._cp3(e,t,.882353,-1.94),r=this._sub(h,t);this._crossProduct(r,this._sub(i,t))>0?this._rightPerpendicular(r):this._leftPerpendicular(r);const c=[r[0]/8,r[1]/8],o=this._sub(this._mid(t,h),c);s.push([o,i]);break}case r.GeometricEffectControlMeasureLineRule.LineExcludingLastSegment:{const t=this._arrowPath(e),i=[];let h=t.length-2;for(;h--;)i.push(t[h]);s.push(i);break}case r.GeometricEffectControlMeasureLineRule.MultivertexArrow:{const t=this._arrowPath(e),i=[];this._addArrow(i,t,!1),s.push(i);break}case r.GeometricEffectControlMeasureLineRule.CrossedArrow:{const t=this._arrowPath(e),i=[];this._addArrow(i,t,!0),s.push(i);break}case r.GeometricEffectControlMeasureLineRule.ChevronArrow:{const[t,h]=this._arrowLastSeg(e),r=10*this._geomUnitsPerPoint,c=this._sub(i,t);this._normalize(c);const o=this._crossProduct(c,this._sub(h,t)),u=this._leftPerp(c),n=[h[0]-u[0]*o*2,h[1]-u[1]*o*2],_=[];_.push([h[0]+c[0]*r,h[1]+c[1]*r]),_.push(i),_.push([n[0]+c[0]*r,n[1]+c[1]*r]),s.push(_);break}case r.GeometricEffectControlMeasureLineRule.ChevronArrowOffset:{const[t,h]=this._arrowLastSeg(e),r=this._sub(i,t);this._normalize(r);const c=this._crossProduct(r,this._sub(h,t));this._leftPerpendicular(r);const o=[h[0]-r[0]*c,h[1]-r[1]*c],u=[];u.push([o[0]+r[0]*c*.5,o[1]+r[1]*c*.5]),u.push(this._mid(o,i)),u.push([o[0]-r[0]*c*.5,o[1]-r[1]*c*.5]),s.push(u);break}case r.GeometricEffectControlMeasureLineRule.PartialFirstSegment:{const[t,h]=this._arrowLastSeg(e),r=this._sub(i,t);this._normalize(r);const c=this._crossProduct(r,this._sub(h,t));this._leftPerpendicular(r);const o=[h[0]-r[0]*c,h[1]-r[1]*c];s.push([t,o]);break}case r.GeometricEffectControlMeasureLineRule.Arch:{const t=this._cp2(e,0,-1),h=this._cp3(e,t,.5,1),r=this._sub(i,t),c=this._mix(h,1,r,.55),o=this._mix(h,1,r,-.55),u=[i];this._addBezier2(u,i,c,h,4),this._addBezier2(u,h,o,t,4),s.push(u);break}case r.GeometricEffectControlMeasureLineRule.CurvedParallelTicks:{const t=this._cp2(e,-4,1),h=this._cp3(e,t,.882353,-1.94),r=this._sub(h,t);this._crossProduct(r,this._sub(i,t))>0?this._rightPerpendicular(r):this._leftPerpendicular(r);const c=[r[0]/8,r[1]/8],o=this._sub(this._mid(t,h),c),u=this._sub(this._mix(t,.75,h,.25),c),n=this._sub(this._mix(t,.25,h,.75),c),_=[t];this._addBezier2(_,t,u,o,3),this._addBezier2(_,o,n,h,3),s.push(_);for(let e=0;e<8;e++){const t=_[2*e+1],i=[this._clone(t)];i.push(this._add(t,[r[0]/4,r[1]/4])),s.push(i)}break}case r.GeometricEffectControlMeasureLineRule.Arc90Degrees:{const t=this._cp2(e,0,-1),h=this._cp3(e,t,.5,1),r=[t];this._add90DegArc(r,t,i,h),s.push(r);break}case r.GeometricEffectControlMeasureLineRule.FullGeometry:default:s.push(e)}}return s},s._createClass(t)}();t.EffectControlMeasureLine=c,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
