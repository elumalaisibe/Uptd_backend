/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry","../../../geometry/GeometryCursor","../CIMEffects","../enums","../../../geometry/SpatialReference"],(function(t,e,i,n,o,r,s){"use strict";let h=function(){function t(){}return t.local=function(){return null===t.instance&&(t.instance=new t),t.instance},t.prototype.execute=function(t,e,i,n,o,r){return new m(t,e,i,n,o,r)},e._createClass(t)}();h.instance=null;let m=function(){function t(t,e,i,n,o,s){switch(this._inputGeometries=t,this._tileKey=n,this._geometryEngine=o,this._maxInflateSize=s*i,this._width=(void 0!==e.width?e.width:2)*i,e.method){case r.GeometricEffectDonutMethod.Mitered:case r.GeometricEffectDonutMethod.Bevelled:case r.GeometricEffectDonutMethod.Rounded:case r.GeometricEffectDonutMethod.TrueBuffer:case r.GeometricEffectDonutMethod.Square:}this._option=e.option}return t.prototype.next=function(){let t;for(;t=this._inputGeometries.next();){if("esriGeometryEnvelope"===t.geometryType&&this._width>0){const e=t.asJSON();return Math.min(e.xmax-e.xmin,e.ymax-e.ymin)-2*this._width<0?t:n.GeometryCursor.fromJSONCIM({paths:[[[e.xmin+this._width,e.ymin+this._width],[e.xmax-this._width,e.ymin+this._width],[e.xmax-this._width,e.ymax-this._width],[e.xmin+this._width,e.ymax-this._width],[e.xmin+this._width,e.ymin+this._width]],[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]})}if("esriGeometryPolygon"===t.geometryType){if(0===this._width)return t.clone();const e=this._geometryEngine;if(null==e)return null;const i=this._tileKey?o.clipCursorToTileExtent(t,this._maxInflateSize):t.clone();if(!i)continue;const n=e.buffer(s.WebMercator,i.asJSON(),-this._width,1);if(n)for(const t of n.rings)t&&i.pushPath(t.reverse());return i}}return null},e._createClass(t)}();t.EffectDonut=h,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
