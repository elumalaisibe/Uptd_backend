/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../CIMCursor","../CurveHelper","../enums"],(function(e,t,n,i,s){"use strict";let r=function(){function e(){}return e.local=function(){return null===e.instance&&(e.instance=new e),e.instance},e.prototype.execute=function(e,t,n,i,s){return new o(e,t,n)},t._createClass(e)}();r.instance=null;let o=function(e){function n(t,n,s){var r;return(r=e.call(this,t,!1,!0)||this)._curveHelper=new i.CurveHelper,r._angleToLine=void 0===n.angleToLine||n.angleToLine,r._offset=void 0!==n.offset?n.offset*s:0,r._type=n.extremityPlacement,r._position=void 0!==n.offsetAlongLine?n.offsetAlongLine*s:0,r._beginProcessed=!1,r}t._inherits(n,e);var r=n.prototype;return r.processPath=function(e){let t;switch(this._type){case s.ExtremityPlacement.Both:default:this._beginProcessed?(t=this._atExtremities(e,this._position,!1),this._beginProcessed=!1,this.iteratePath=!1):(t=this._atExtremities(e,this._position,!0),this._beginProcessed=!0,this.iteratePath=!0);break;case s.ExtremityPlacement.JustBegin:t=this._atExtremities(e,this._position,!0);break;case s.ExtremityPlacement.JustEnd:t=this._atExtremities(e,this._position,!1);case s.ExtremityPlacement.None:}return t},r._atExtremities=function(e,t,n){if(n||e.seekPathEnd(),n?e.nextPoint():e.prevPoint()){let i=0,[s,r]=[0,0],[o,a]=[e.x,e.y];for(;n?e.nextPoint():e.prevPoint();){s=o,r=a,o=e.x,a=e.y;const n=this._curveHelper.getLength(s,r,o,a);if(i+n>t){const e=(t-i)/n,[l,c]=this._curveHelper.getAngleCS(s,r,o,a,e),u=this._curveHelper.getCoord2D(s,r,o,a,e);return this.internalPlacement.setTranslate(u[0]-this._offset*c,u[1]+this._offset*l),this._angleToLine&&this.internalPlacement.setRotateCS(-l,-c),this.internalPlacement}i+=n}}return null},t._createClass(n)}(n.PathTransformationCursor);e.PlacementAtExtremities=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
