/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/unitUtils","../../../geometry/support/spatialReferenceUtils","../../../layers/graphics/OptimizedFeature","../../../layers/graphics/OptimizedFeatureSet","../../../layers/graphics/OptimizedGeometry"],(function(e,t,r,i,n,o,s){"use strict";const a=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let u=function(){function e(e){this._options=e,this.geometryTypes=a,this._coordinatePtr=0,this._vertexDimension=0}var u=e.prototype;return u.createFeatureResult=function(){return new o},u.prepareFeatures=function(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++},u.finishFeatureResult=function(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||i.equals(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const t=r.getMetersPerVerticalUnitForSR(this._options.sourceSpatialReference)/r.getMetersPerVerticalUnitForSR(e.spatialReference);if(1!==t)for(const r of e.features){if(!n.hasGeometry(r))continue;const e=r.geometry.coords;for(let r=2;r<e.length;r+=3)e[r]*=t}},u.addFeature=function(e,t){e.features.push(t)},u.createFeature=function(){return new n.OptimizedFeature},u.createSpatialReference=function(){return{wkid:0}},u.createGeometry=function(){return new s},u.addField=function(e,t){e.fields.push(t)},u.allocateCoordinates=function(e){e.coords.length=e.lengths.reduce(((e,t)=>e+t),0)*this._vertexDimension,this._coordinatePtr=0},u.addCoordinate=function(e,t){e.coords[this._coordinatePtr++]=t},u.addCoordinatePoint=function(e,t){e.coords.push(t)},u.addLength=function(e,t){e.lengths.push(t)},u.addQueryGeometry=function(e,t){e.queryGeometry=t.queryGeometry,e.queryGeometryType=t.queryGeometryType},u.createPointGeometry=function(){return new s},t._createClass(e)}();e.OPTIMIZED_GEOMETRY_TYPES=a,e.OptimizedFeatureSetParserContext=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
