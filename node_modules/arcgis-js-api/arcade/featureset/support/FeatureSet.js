/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../arcadeTimeUtils","./cache","./errorsupport","./FeatureSetIterator","./IdSet","./shared","./stats","../../../core/promiseUtils","../../../core/sql/WhereClause","../../../geometry/geometryEngineAsync","../../../geometry/SpatialReference","../../../layers/support/FieldsIndex"],(function(e,t,n,i,r,a,s,u,o,c,l,h,d){"use strict";let f=function(){function f(e){this.recentlyUsedQueries=null,this.featureSetQueryInterceptor=null,this._idstates=[],this._parent=null,this._wset=null,this._mainSetInUse=null,this._maxProcessing=200,this._maxQuery=500,this._totalCount=-1,this._databaseType=s.FeatureServiceDatabaseType.NotEvaluated,this._databaseTypeProbed=null,this.declaredRootClass="esri.arcade.featureset.support.FeatureSet",this._featureCache=[],this.typeIdField=null,this.types=null,this.fields=null,this.geometryType="",this.objectIdField="",this.globalIdField="",this.spatialReference=null,this.hasM=!1,this.hasZ=!1,this._transparent=!1,this.loaded=!1,this._loadPromise=null,this._fieldsIndex=null,this._dateFieldIndex=null,e&&e.lrucache&&(this.recentlyUsedQueries=e.lrucache),e&&e.interceptor&&(this.featureSetQueryInterceptor=e.interceptor)}var _=f.prototype;return _.optimisePagingFeatureQueries=function(e){this._parent&&this._parent.optimisePagingFeatureQueries(e)},_._hasMemorySource=function(){return!0},_.prop=function(e,t){return void 0===t?this[e]:(void 0!==this[e]&&(this[e]=t),this)},_.end=function(){return null!==this._parent&&!0===this._parent._transparent?this._parent.end():this._parent},_._ensureLoaded=function(){return this.load()},_.load=function(){return null===this._loadPromise&&(this._loadPromise=this.loadImpl()),this._loadPromise},_.loadImpl=async function(){return!0===this._parent?.loaded?(this._initialiseFeatureSet(),this):(await(this._parent?.load()),this._initialiseFeatureSet(),this)},_._initialiseFeatureSet=function(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField="",this.objectIdField="",this.globalIdField="",this.spatialReference=new h({wkid:4326}),this.geometryType=s.layerGeometryEsriConstants.point)},_.getField=function(e,t){let n;return(t=t||this.fields)&&(e=e.toLowerCase(),t.some((t=>(t&&t.name.toLowerCase()===e&&(n=t),!!n)))),n},_.getFieldsIndex=function(){return null===this._fieldsIndex&&(this._fieldsIndex=new d(this.fields)),this._fieldsIndex},_._maxProcessingRate=function(){return null!==this._parent?Math.min(this._maxProcessing,this._parent._maxProcessingRate()):Math.min(this._maxProcessing,this._maxQueryRate())},_._maxQueryRate=function(){return null!==this._parent?Math.max(this._maxQuery,this._parent._maxQueryRate()):this._maxQuery},_._checkCancelled=function(e){if(null!=e&&e.aborted)throw new i.FeatureSetError(i.FeatureSetErrorCodes.Cancelled)},_.nativeCapabilities=function(){return this._parent.nativeCapabilities()},_._canDoAggregates=async function(e,t,n,i,r){return null!==this._parent&&this._parent._canDoAggregates(e,t,n,i,r)},_._getAggregatePagesDataSourceDefinition=async function(e,t,n,r,a,s,u){if(null===this._parent)throw new i.FeatureSetError(i.FeatureSetErrorCodes.NeverReach);return this._parent._getAggregatePagesDataSourceDefinition(e,t,n,r,a,s,u)},_._getAgregagtePhysicalPage=async function(e,t,n){if(null===this._parent)throw new i.FeatureSetError(i.FeatureSetErrorCodes.NeverReach);return this._parent._getAgregagtePhysicalPage(e,t,n)},_.databaseType=async function(){if(this._databaseType===s.FeatureServiceDatabaseType.NotEvaluated){if(null!==n.applicationCache){const e=n.applicationCache.getDatabaseType(this._cacheableFeatureSetSourceKey());if(null!==e)return e}if(null!==this._databaseTypeProbed)return this._databaseTypeProbed;try{this._databaseTypeProbed=this._getDatabaseTypeImpl(),null!==n.applicationCache&&n.applicationCache.setDatabaseType(this._cacheableFeatureSetSourceKey(),this._databaseTypeProbed)}catch(e){throw null!==n.applicationCache&&n.applicationCache.clearDatabaseType(this._cacheableFeatureSetSourceKey()),e}return this._databaseTypeProbed}return this._databaseType},_._getDatabaseTypeImpl=async function(){const e=[{thetype:s.FeatureServiceDatabaseType.SqlServer,testwhere:"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0"},{thetype:s.FeatureServiceDatabaseType.Oracle,testwhere:"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0"},{thetype:s.FeatureServiceDatabaseType.StandardisedNoInterval,testwhere:"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0"}];for(const t of e){if(!0===await this._runDatabaseProbe(t.testwhere))return t.thetype}return s.FeatureServiceDatabaseType.StandardisedNoInterval},_._cacheableFeatureSetSourceKey=function(){return"MUSTBESET"},_._runDatabaseProbe=async function(e){if(null!==this._parent)return this._parent._runDatabaseProbe(e);throw new i.FeatureSetError(i.FeatureSetErrorCodes.NotImplemented)},_.isTable=function(){return this._parent?.isTable()??!1},_._featureFromCache=function(e){if(void 0!==this._featureCache[e])return this._featureCache[e]},_._isInFeatureSet=function(e){return s.IdState.Unknown},_._getSet=function(e){throw new i.FeatureSetError(i.FeatureSetErrorCodes.NotImplemented)},_._getFeature=async function(e,t,n){if(this._checkCancelled(n),void 0!==this._featureFromCache(t))return this._featureFromCache(t);if(await this._getFeatures(e,t,this._maxProcessingRate(),n),this._checkCancelled(n),void 0!==this._featureFromCache(t))return this._featureFromCache(t);throw new i.FeatureSetError(i.FeatureSetErrorCodes.MissingFeatures)},_._getFeatureBatch=async function(e,t){this._checkCancelled(t);const n=new a([],e,!1,null),i=[];await this._getFeatures(n,-1,e.length,t),this._checkCancelled(t);for(const r of e)void 0!==this._featureFromCache(r)&&i.push(this._featureFromCache(r));return i},_._getFeatures=async function(e,t,n,i){return"success"},_._getFilteredSet=function(e,t,n,r,a){throw new i.FeatureSetError(i.FeatureSetErrorCodes.NotImplemented)},_._refineSetBlock=async function(e,t,n){if(!0===this._checkIfNeedToExpandCandidatePage(e,this._maxQueryRate()))return await this._expandPagedSet(e,this._maxQueryRate(),0,0,n),this._refineSetBlock(e,t,n);this._checkCancelled(n);const i=e._candidates.length;this._refineKnowns(e,t);let r=i-e._candidates.length;if(0===e._candidates.length)return e;if(r>=t)return e;if(await this._refineIfParentKnown(e,t-r,n),this._checkCancelled(n),this._refineKnowns(e,t-r),r=i-e._candidates.length,r<t&&e._candidates.length>0){const i=t-r,a=this._prepareFetchAndRefineSet(e._candidates);return await this._fetchAndRefineFeatures(a,a.length>i?i:e._candidates.length,n),this._checkCancelled(n),this._refineKnowns(e,t-r),e}return e},_._fetchAndRefineFeatures=function(e,t,n){return null},_._prepareFetchAndRefineSet=function(e){const t=[];for(let n=0;n<e.length;n++)this._isPhysicalFeature(e[n])&&t.push(e[n]);return t},_._isPhysicalFeature=function(e){return null===this._parent||this._parent._isPhysicalFeature(e)},_._refineKnowns=function(e,t){let n=0,i=null;const r=[];t=this._maxQueryRate();for(let a=0;a<e._candidates.length&&"GETPAGES"!==e._candidates[a];a++){let u=!1;const o=this._candidateIdTransform(e._candidates[a]);o!==e._candidates[a]&&(u=!0);const c=this._isInFeatureSet(o);if(c===s.IdState.InFeatureSet)!0===u?e._known.includes(o)||(e._known.push(o),n+=1):(e._known.push(e._candidates[a]),n+=1),null===i?i={start:a,end:a}:i.end===a-1?i.end=a:(r.push(i),i={start:a,end:a});else if(c===s.IdState.NotInFeatureSet)null===i?i={start:a,end:a}:i.end===a-1?i.end=a:(r.push(i),i={start:a,end:a}),n+=1;else if(c===s.IdState.Unknown&&(n+=1,!0===e._ordered))break;if(n>=t)break}null!==i&&r.push(i);for(let a=r.length-1;a>=0;a--)e._candidates.splice(r[a].start,r[a].end-r[a].start+1)},_._refineIfParentKnown=function(e,t,n){const i=new a([],[],e._ordered,null);return i._candidates=e._candidates.slice(0),this._parent._refineSetBlock(i,t,n)},_._candidateIdTransform=function(e){return this._parent._candidateIdTransform(e)},_._checkIfNeedToExpandKnownPage=function(e,t){if(null===e.pagesDefinition)return!1;let n=0;for(let i=e._lastFetchedIndex;i<e._known.length;i++){if("GETPAGES"===e._known[i])return!0;if(void 0===this._featureCache[e._known[i]]&&(n+=1,n>=t))break}return!1},_._checkIfNeedToExpandCandidatePage=function(e,t){if(null===e.pagesDefinition)return!1;let n=0;for(let i=0;i<e._candidates.length;i++){if("GETPAGES"===e._candidates[i])return!0;if(n+=1,n>=t)break}return!1},_._expandPagedSet=async function(e,t,n,r,a){if(null===this._parent)throw new i.FeatureSetError(i.FeatureSetErrorCodes.NotImplemented);return this._parent._expandPagedSet(e,t,n,r,a)},_._expandPagedSetFeatureSet=async function(e,t,n,i,r){if(e._known.length>0&&"GETPAGES"===e._known[e._known.length-1]&&(i=1),0===i&&e._candidates.length>0&&"GETPAGES"===e._candidates[e._candidates.length-1]&&(i=2),0===i)return"finished";const a=await this._getPage(e,i,r);return n+a<t?this._expandPagedSet(e,t,n+a,0,r):"success"},_._getPage=async function(e,t,n){const i=1===t?e._known:e._candidates;if(e.pagesDefinition.internal.set.length>e.pagesDefinition.resultOffset||!0===e.pagesDefinition.internal.fullyResolved){i.length=i.length-1;let t=0;for(let r=0;r<e.pagesDefinition.resultRecordCount&&!(e.pagesDefinition.resultOffset+r>=e.pagesDefinition.internal.set.length);r++)i[i.length]=e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset+r],t++;e.pagesDefinition.resultOffset+=t;let n=!1;return!0===e.pagesDefinition.internal.fullyResolved&&e.pagesDefinition.internal.set.length<=e.pagesDefinition.resultOffset&&(n=!0),!1===n&&i.push("GETPAGES"),t}return await this._getPhysicalPage(e,t,n),this._getPage(e,t,n)},_._getPhysicalPage=function(e,t,n){return null},_._clonePageDefinition=function(e){return null===this._parent?null:this._parent._clonePageDefinition(e)},_._first=function(e){return this.iterator(e).next()},_.first=function(e){return this._first(e)},_.calculateStatistic=async function(e,t,n,i){await this._ensureLoaded();let r=await this._stat(e,t,"",null,null,n,i);return!1===r.calculated&&(r=await this._manualStat(e,t,n,i)),r.result},_._manualStat=async function(e,t,n,i){let r=null;switch(e.toLowerCase()){case"count":return r=await u.count(this,i),{calculated:!0,result:r};case"distinct":return r=await u.distinct(this,t,n,i),{calculated:!0,result:r};case"avg":case"mean":return r=await u.mean(this,t,i),{calculated:!0,result:r};case"stdev":return r=await u.stdev(this,t,i),{calculated:!0,result:r};case"variance":return r=await u.variance(this,t,i),{calculated:!0,result:r};case"sum":return r=await u.sum(this,t,i),{calculated:!0,result:r};case"min":return r=await u.min(this,t,i),{calculated:!0,result:r};case"max":return r=await u.max(this,t,i),{calculated:!0,result:r};default:return{calculated:!0,result:0}}},_._stat=async function(e,t,n,i,r,a,s){const u=await this._parent._stat(e,t,n,i,r,a,s);return!1===u.calculated?null===r&&""===n&&null===i?this._manualStat(e,t,a,s):{calculated:!1}:u},_._unionAllGeomSelf=function(e){const t=this.iterator(this._defaultTracker(e)),n=[];return new Promise(((e,i)=>{this._unionShapeInBatches(n,t,e,i)}))},_._unionAllGeom=function(e){return new Promise(((t,n)=>{const i=this.iterator(this._defaultTracker(e)),r=[];this._unionShapeInBatches(r,i,t,n)}))},_._unionShapeInBatches=function(e,t,n,i){t.next().then((r=>{try{null!==r&&null!==r.geometry&&e.push(r.geometry),e.length>30||null===r&&e.length>1?l.union(e).then((a=>{try{null===r?n(a):(e=[a],this._unionShapeInBatches(e,t,n,i))}catch(s){i(s)}}),i):null===r?1===e.length?n(e[0]):n(null):this._unionShapeInBatches(e,t,n,i)}catch(a){i(a)}}),i)},_.iterator=function(e){return new r(this,e)},_.intersection=function(e,t=!1){return f._featuresetFunctions.intersection.bind(this)(e,t)},_.difference=function(e,t=!1,n=!0){return f._featuresetFunctions.difference.bind(this)(e,t,n)},_.symmetricDifference=function(e,t=!1,n=!0){return f._featuresetFunctions.symmetricDifference.bind(this)(e,t,n)},_.morphShape=function(e,t,n="unknown",i=null){return f._featuresetFunctions.morphShape.bind(this)(e,t,n,i)},_.morphShapeAndAttributes=function(e,t,n="unknown"){return f._featuresetFunctions.morphShapeAndAttributes.bind(this)(e,t,n)},_.union=function(e,t=!1){return f._featuresetFunctions.union.bind(this)(e,t)},_.intersects=function(e){return f._featuresetFunctions.intersects.bind(this)(e)},_.envelopeIntersects=function(e){return f._featuresetFunctions.envelopeIntersects.bind(this)(e)},_.contains=function(e){return f._featuresetFunctions.contains.bind(this)(e)},_.overlaps=function(e){return f._featuresetFunctions.overlaps.bind(this)(e)},_.relate=function(e,t){return f._featuresetFunctions.relate.bind(this)(e,t)},_.within=function(e){return f._featuresetFunctions.within.bind(this)(e)},_.touches=function(e){return f._featuresetFunctions.touches.bind(this)(e)},_.top=function(e){return f._featuresetFunctions.top.bind(this)(e)},_.crosses=function(e){return f._featuresetFunctions.crosses.bind(this)(e)},_.buffer=function(e,t,n,i=!0){return f._featuresetFunctions.buffer.bind(this)(e,t,n,i)},_.filter=function(e,t=null){return f._featuresetFunctions.filter.bind(this)(e,t)},_.orderBy=function(e){return f._featuresetFunctions.orderBy.bind(this)(e)},_.dissolve=function(e,t){return f._featuresetFunctions.dissolve.bind(this)(e,t)},_.groupby=function(e,t){return f._featuresetFunctions.groupby.bind(this)(e,t)},_.reduce=function(e,t=null,n){return new Promise(((i,r)=>{this._reduceImpl(this.iterator(this._defaultTracker(n)),e,t,0,i,r,0)}))},_._reduceImpl=function(e,t,n,i,r,a,s){try{if(++s>1e3)return void setTimeout((()=>{s=0,this._reduceImpl(e,t,n,i,r,a,s)}));e.next().then((u=>{try{if(null===u)r(n);else{const c=t(n,u,i,this);o.isPromiseLike(c)?c.then((n=>{this._reduceImpl(e,t,n,i+1,r,a,s)}),a):this._reduceImpl(e,t,c,i+1,r,a,s)}}catch(c){a(c)}}),a)}catch(u){a(u)}},_.removeField=function(e){return f._featuresetFunctions.removeField.bind(this)(e)},_.addField=function(e,t,n=null){return f._featuresetFunctions.addField.bind(this)(e,t,n)},_.sumArea=function(e,t=!1,n){const i=s.convertSquareUnitsToCode(e);return this.reduce(((e,n)=>null===n.geometry?0:t?l.geodesicArea(n.geometry,i).then((t=>e+t)):l.planarArea(n.geometry,i).then((t=>e+t))),0,n)},_.sumLength=function(e,t=!1,n){const i=s.convertLinearUnitsToCode(e);return this.reduce(((e,n)=>null===n.geometry?0:t?l.geodesicLength(n.geometry,i).then((t=>e+t)):l.planarLength(n.geometry,i).then((t=>e+t))),0,n)},_._substituteVars=function(e,t){if(null!==t){const n={};for(const e in t)n[e.toLowerCase()]=t[e];e.parameters=n}},_.distinct=async function(e,t=1e3,n=null,i){await this.load();const r=c.WhereClause.create(e,this.getFieldsIndex());return this._substituteVars(r,n),this.calculateStatistic("distinct",r,t,this._defaultTracker(i))},_.min=async function(e,t=null,n){await this.load();const i=c.WhereClause.create(e,this.getFieldsIndex());return this._substituteVars(i,t),this.calculateStatistic("min",i,-1,this._defaultTracker(n))},_.max=async function(e,t=null,n){await this.load();const i=c.WhereClause.create(e,this.getFieldsIndex());return this._substituteVars(i,t),this.calculateStatistic("max",i,-1,this._defaultTracker(n))},_.avg=async function(e,t=null,n){await this.load();const i=c.WhereClause.create(e,this.getFieldsIndex());return this._substituteVars(i,t),this.calculateStatistic("avg",i,-1,this._defaultTracker(n))},_.sum=async function(e,t=null,n){await this.load();const i=c.WhereClause.create(e,this.getFieldsIndex());return this._substituteVars(i,t),this.calculateStatistic("sum",i,-1,this._defaultTracker(n))},_.stdev=async function(e,t=null,n){await this.load();const i=c.WhereClause.create(e,this.getFieldsIndex());return this._substituteVars(i,t),this.calculateStatistic("stdev",i,-1,this._defaultTracker(n))},_.variance=async function(e,t=null,n){await this.load();const i=c.WhereClause.create(e,this.getFieldsIndex());return this._substituteVars(i,t),this.calculateStatistic("variance",i,-1,this._defaultTracker(n))},_.count=async function(e){return await this.load(),this.calculateStatistic("count",c.WhereClause.create("1",this.getFieldsIndex()),-1,this._defaultTracker(e))},_._defaultTracker=function(e){return e??{aborted:!1}},_.forEach=function(e,t){return new Promise(((n,i)=>{this._forEachImpl(this.iterator(this._defaultTracker(t)),e,this,n,i,0)}))},_._forEachImpl=function(e,t,n,i,r,a){try{if(++a>1e3)return void setTimeout((()=>{a=0,this._forEachImpl(e,t,n,i,r,a)}),0);e.next().then((s=>{try{if(null===s)i(n);else{const u=t(s);null==u?this._forEachImpl(e,t,n,i,r,a):o.isPromiseLike(u)?u.then((()=>{try{this._forEachImpl(e,t,n,i,r,a)}catch(s){r(s)}}),r):this._forEachImpl(e,t,n,i,r,a)}}catch(u){r(u)}}),r)}catch(s){r(s)}},_.convertToJSON=function(e){const t={layerDefinition:{geometryType:this.geometryType,fields:[]},featureSet:{features:[],geometryType:this.geometryType}};for(let n=0;n<this.fields.length;n++)t.layerDefinition.fields.push(s.esriFieldToJson(this.fields[n]));return this.reduce(((e,n)=>{const i={geometry:n.geometry&&n.geometry.toJSON(),attributes:{}};for(const t in n.attributes)i.attributes[t]=n.attributes[t];return t.featureSet.features.push(i),1}),0,e).then((()=>t))},_.castToText=function(e=!1){return"object, FeatureSet"},_.queryAttachments=function(e,t,n,i,r){return this._parent.queryAttachments(e,t,n,i,r)},_.serviceUrl=function(){return this._parent.serviceUrl()},_.subtypes=function(){return this.typeIdField?{subtypeField:this.typeIdField,subtypes:this.types?this.types.map((e=>({name:e.name,code:e.id}))):[]}:null},_.relationshipMetaData=function(){return this._parent.relationshipMetaData()},_.schema=function(){const e=[];for(const n of this.fields)e.push(s.esriFieldToJson(n));const t={objectIdField:this.objectIdField,globalIdField:this.globalIdField,geometryType:void 0===s.layerGeometryEsriRestConstants[this.geometryType]?"esriGeometryNull":s.layerGeometryEsriRestConstants[this.geometryType],fields:e};return t},_.convertToText=async function(e,t){if("schema"===e)return await this._ensureLoaded(),JSON.stringify(this.schema());if("featureset"===e){await this._ensureLoaded();const e=[];await this.reduce(((t,n)=>{const i={geometry:n.geometry?n.geometry.toJSON():null,attributes:n.attributes};return null!==i.geometry&&i.geometry.spatialReference&&delete i.geometry.spatialReference,e.push(i),1}),0,t);const n=this.schema();return n.features=e,n.spatialReference=this.spatialReference.toJSON(),JSON.stringify(n)}return this.castToText()},_.getFeatureByObjectId=function(e,t){return this._parent.getFeatureByObjectId(e,t)},_.getOwningSystemUrl=function(){return this._parent.getOwningSystemUrl()},_.getIdentityUser=function(){return this._parent.getIdentityUser()},_.getRootFeatureSet=function(){return null!==this._parent?this._parent.getRootFeatureSet():this},_.getDataSourceFeatureSet=function(){return null!==this._parent?this._parent.getDataSourceFeatureSet():this},_.castAsJson=function(e=null){return"keeptype"===e?.featureset?this:"none"===e?.featureset?null:{type:"FeatureSet"}},_.castAsJsonAsync=async function(e=null,t=null){if("keeptype"===t?.featureset)return this;if("schema"===t?.featureset)return await this._ensureLoaded(),JSON.parse(JSON.stringify(this.schema()));if("none"===t?.featureset)return null;await this._ensureLoaded();const n=[];await this.reduce(((e,i)=>{const r={geometry:i.geometry?!0===t?.keepGeometryType?i.geometry:i.geometry.toJSON():null,attributes:i.attributes};return null!==r.geometry&&r.geometry.spatialReference&&!0!==t?.keepGeometryType&&delete r.geometry.spatialReference,n.push(r),1}),0,e);const i=this.schema();return i.features=n,i.spatialReference=!0===t?.keepGeometryType?this.spatialReference:this.spatialReference?.toJSON(),i},_.fieldTimeZone=function(e){return this.dateTimeReferenceFieldIndex.fieldTimeZone(e)},e._createClass(f,[{key:"gdbVersion",get:function(){return this._parent?this._parent.gdbVersion:""}},{key:"dateTimeReferenceFieldIndex",get:function(){return null===this._dateFieldIndex&&(this._dateFieldIndex=t.DateTimeReferenceFieldIndex.create(this.getFieldsIndex(),this)),this._dateFieldIndex}},{key:"preferredTimeReference",get:function(){return this._parent?.preferredTimeReference??null}},{key:"dateFieldsTimeReference",get:function(){return this._parent?.dateFieldsTimeReference??null}},{key:"datesInUnknownTimezone",get:function(){return this._parent.datesInUnknownTimezone}},{key:"editFieldsInfo",get:function(){return this._parent?.editFieldsInfo??null}},{key:"timeInfo",get:function(){return this._parent?.timeInfo??null}}]),f}();return f._featuresetFunctions={},f}));
