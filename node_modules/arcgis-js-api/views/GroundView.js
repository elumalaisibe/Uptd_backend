/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../chunks/_rollupPluginBabelHelpers","../chunks/tslib.es6","../core/Accessor","../core/Collection","../core/reactiveUtils","../core/accessorSupport/decorators/property","../core/accessorSupport/ensureType","../core/arrayUtils","../core/has","../core/accessorSupport/decorators/subclass","./support/GroundViewElevationSampler"],(function(e,t,r,i,s,n,a,o,l,p,d){"use strict";let u=function(t){function r(e){var r;return(r=t.call(this,e)||this).view=null,r.layerViews=new i,r}e._inherits(r,t);var n=r.prototype;return n.initialize=function(){this.addHandles(s.when((()=>this.view?.map?.ground),(e=>e.load()))),this.addHandles(this.layerViews.on("after-changes",(()=>this._layerViewsAfterChangesHandler())))},n.destroy=function(){this.removeAllHandles(),this._set("view",null);for(const e of this.layerViews)e.destroy();this.layerViews.length=0},n._layerViewsAfterChangesHandler=function(){this.removeHandles("updating"),this.addHandles(this.layerViews.map((e=>s.watch((()=>e.updating),(()=>this._updateUpdating()),s.sync))).toArray(),"updating"),this._updateUpdating()},n._updateUpdating=function(){this.notifyChange("updating")},e._createClass(r,[{key:"elevationSampler",get:function(){return this.view?"2d"===this.view.type?null:this.view.ready&&this.view.basemapTerrain&&this.view.basemapTerrain.ready?new d({view:this.view}):null:null}},{key:"updating",get:function(){return!this.suspended&&this.layerViews.some((e=>e.updating))}},{key:"suspended",get:function(){return!this.view||this.view.suspended}}]),r}(r);t.__decorate([n.property({readOnly:!0})],u.prototype,"elevationSampler",null),t.__decorate([n.property({type:Boolean,readOnly:!0})],u.prototype,"updating",null),t.__decorate([n.property({constructOnly:!0})],u.prototype,"view",void 0),t.__decorate([n.property({type:i,readOnly:!0})],u.prototype,"layerViews",void 0),t.__decorate([n.property({readOnly:!0})],u.prototype,"suspended",null),u=t.__decorate([p.subclass("esri.views.GroundView")],u);return u}));
