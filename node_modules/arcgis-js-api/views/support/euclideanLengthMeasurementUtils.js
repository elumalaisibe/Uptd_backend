/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../core/quantityUtils","../../core/unitUtils","../../chunks/vec3","../../chunks/vec3f64","../../geometry/projection","../../geometry/support/spatialReferenceUtils","./measurementUtils"],(function(e,t,n,r,i,c,a,l){"use strict";var o;function u(e){return f(e,o.Direct)}function s(e){return f(e,o.Horizontal)}function f(e,r){const{hasZ:i,spatialReference:c}=e,a=l.computeEuclideanMeasurementSR(c);let u=0;const s=n.lengthUnitFromSpatialReference(a);if(null==s)return null;const f=r===o.Direct?D:R;for(const t of e.paths){if(t.length<2)continue;const e=t.length-1;for(let n=0;n<e;++n){const e=t[n];V[0]=e[0],V[1]=e[1],V[2]=i?e[2]:0;const r=t[n+1];x[0]=r[0],x[1]=r[1],x[2]=i?r[2]:0;const a=f(V,x,c);if(null==a)return null;u+=a.value}}return t.createLength(u,s)}function h(e,t){const{spatialReference:n}=e;return a.equals(n,t.spatialReference)?(V[0]=e.x,V[1]=e.y,V[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,v(V,x,n)):null}function d(e,t){const{spatialReference:n}=e;return a.equals(n,t.spatialReference)?(V[0]=e.x,V[1]=e.y,V[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,D(V,x,n)):null}function g(e,t){const{spatialReference:n}=e;return a.equals(n,t.spatialReference)?(V[0]=e.x,V[1]=e.y,V[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,R(V,x,n)):null}function p(e,t){const{spatialReference:n}=e;return a.equals(n,t.spatialReference)?(V[0]=e.x,V[1]=e.y,V[2]=e.hasZ?e.z:0,x[0]=t.x,x[1]=t.y,x[2]=t.hasZ?t.z:0,m(V,x,n)):null}function z(e){return V[0]=e.x,V[1]=e.y,V[2]=e.hasZ?e.z:0,L(V,e.spatialReference)}function v(e,n,r){const i=S(e,n,r);return null!=i?{direct:t.createLength(i.direct,i.unit),horizontal:t.createLength(i.horizontal,i.unit),vertical:t.createLength(i.vertical,i.unit)}:null}function D(e,n,r){const i=S(e,n,r,o.Direct);return null!=i?t.createLength(i.direct,i.unit):null}function R(e,n,r){const i=S(e,n,r,o.Horizontal);return null!=i?t.createLength(i.horizontal,i.unit):null}function y(e,n,r){const i=S(e,n,r,o.Vertical);return null!=i?t.createLength(Math.abs(i.verticalSigned),i.unit):null}function m(e,n,r){const i=S(e,n,r,o.Vertical);return null!=i?t.createLength(i.verticalSigned,i.unit):null}function L(e,r){const i=n.verticalLengthUnitFromSpatialReference(r);return null!=i?t.createLength(e[2],i):null}function S(e,t,i,a){const u=l.computeEuclideanMeasurementSR(i),s=n.lengthUnitFromSpatialReference(u);if(null==s)return null;const f=t[2]-e[2];if(a===o.Vertical)return{verticalSigned:f,unit:s};if(!c.projectVectorToVector(e,i,Z,u)||!c.projectVectorToVector(t,i,H,u))return null;if(a===o.Direct){return{direct:r.distance(H,Z),unit:s}}if(r.set(U,e[0],e[1],t[2]),!c.projectVectorToVector(U,i,U,u))return null;const h=r.distance(U,H);if(a===o.Horizontal)return{horizontal:h,unit:s};return{direct:r.distance(H,Z),horizontal:h,vertical:Math.abs(f),unit:s}}!function(e){e[e.Direct=0]="Direct",e[e.Horizontal=1]="Horizontal",e[e.Vertical=2]="Vertical"}(o||(o={}));const V=i.create(),x=i.create(),Z=i.create(),H=i.create(),U=i.create();e.elevation=L,e.elevationOfPoint=z,e.euclideanDirectDistance=D,e.euclideanDirectDistanceBetweenPoints=d,e.euclideanDistance=v,e.euclideanDistanceBetweenPoints=h,e.euclideanHorizontalDistance=R,e.euclideanHorizontalDistanceBetweenPoints=g,e.euclideanHorizontalLength=s,e.euclideanLength=u,e.verticalDistance=y,e.verticalSignedDistance=m,e.verticalSignedDistanceBetweenPoints=p,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
