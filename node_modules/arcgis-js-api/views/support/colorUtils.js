/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../Color","../../core/colorUtils","../../chunks/vec4f64"],(function(t,n,o,r){"use strict";async function e(t){await t.whenReady();const o=t.basemapView?.baseLayerViews.map((t=>t.layer)).toArray()??[];if(!o.length){const o=getComputedStyle(t.container).backgroundColor,r=o&&new n(o);return t.get("background.color")||(r&&0!==r.a?r:null)||null}const r=(await t.takeScreenshot({format:"png",layers:o})).data.data,e=r.length;let a=0,u=0,c=0,l=0,i=0,s=0;for(let n=0;n<e;n+=4){const t=r[n],o=r[n+1],e=r[n+2],g=r[n+3],d=g/255;a+=t*t*d,u+=o*o*d,c+=e*e*d,i+=d,g&&(l+=g,s++)}a=Math.round(Math.sqrt(a/i)),u=Math.round(Math.sqrt(u/i)),c=Math.round(Math.sqrt(c/i));return new n([a,u,c,l/s/255])}async function a(t){if(!t)return null;const n=await e(t);return null!=n?u(n):null}function u(t){return c(t).isBright?"light":"dark"}function c(t){let{r:o,g:r,b:e,a}=t;return a<1&&(o=Math.round(a*o+255*(1-a)),r=Math.round(a*r+255*(1-a)),e=Math.round(a*e+255*(1-a))),new n({r:o,g:r,b:e})}function l(t,n){const{r:o,g:r,b:e}=n?.ignoreAlpha?t:c(t);return.2126*o+.7152*r+.0722*e}function i(t,n){const r=o.toLAB(t);r.l*=1-n;const e=o.toRGB(r),a=t.clone();return a.setColor(e),a.a=t.a,a}function s(t,n){const o=t.clone();return o.a*=n,o}function g(t,n){const r=o.toHSV(t);r.s*=n;const e=o.toRGB(r),a=t.clone();return a.setColor(e),a.a=t.a,a}function d(t){return r.fromArray(n.toUnitRGBA(t))}t.darken=i,t.desaturate=g,t.getBackgroundColor=e,t.getBackgroundColorTheme=a,t.getColorLuminance=l,t.getColorTheme=u,t.multiplyOpacity=s,t.unitRGBAFromColor=d,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
