/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","./aspectProcessor","./bandArithmeticProcessor","./compositeBandProcessor","./convolutionProcessor","./curvatureProcessor","./extractBandProcessor","./localProcessor","./maskProcessor","./ndviProcessor","./remapProcessor","./reprojectProcessor","./slopeProcessor","./stretchProcessor","../../../../webgl/contextUtils","../../../../webgl/enums","../../../../webgl/Texture","../../../../webgl/TextureDescriptor"],(function(e,t,r,o,s,n,c,i,a,u,l,p,d,m,x,P,T,w){"use strict";const f=new Map;function h(e,t,r){const o=new w.TextureDescriptor;return o.width=t,o.height=r,o.internalFormat=e.type===x.ContextType.WEBGL2?P.SizedPixelFormat.RGBA32F:P.PixelFormat.RGBA,o.samplingMode=P.TextureSamplingMode.NEAREST,o.dataType=P.PixelType.FLOAT,o.isImmutable=e.type===x.ContextType.WEBGL2,o.wrapMode=P.TextureWrapMode.CLAMP_TO_EDGE,o}function b(e,t,r,o){const{context:s,requestRender:n,allowDelayedRender:c}=e,i=o.createProgram(e,r);if(c&&null!=n&&!i.compiled)return n(),null;const{width:a,height:u}=r;return s.bindFramebuffer(t),s.setViewport(0,0,a,u),s.useProgram(i),i}function g(e){return f.get(e.toLowerCase())}function y(e,t,r,o){const s=e.rasterFunction.name.toLowerCase(),n="reproject"===s?p:g(s);if(null==n)return;const c=b(e,r,o,n);if(!c)return;n.bindTextureAndUniforms(e,c,o),t.draw();const{width:i,height:a}=o,u=h(e.context,i,a),l=new T.Texture(e.context,u);if(r.copyToTexture(0,0,i,a,0,0,l),"reproject"===s)o.rasterTexture=l,o.projected=!0;else{const t=e.hasBranches?e.rasterFunction.id:0;o.functionTextures[t]=l}}f.set("aspect",t),f.set("bandarithmetic",r),f.set("compositeband",o),f.set("convolution",s),f.set("curvature",n),f.set("extractband",c),f.set("local",i),f.set("mask",a),f.set("ndvi",u),f.set("remap",l),f.set("slope",d),f.set("stretch",m),e.createTextureDescriptor=h,e.process=y,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
