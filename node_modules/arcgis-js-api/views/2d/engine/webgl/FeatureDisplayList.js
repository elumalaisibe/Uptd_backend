/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","./cpuMapped/FreeList"],(function(t,e,n){"use strict";let i=function(){function t(t,e,n,i,a){this.target=t,this.geometryType=e,this.materialKey=n,this.indexFrom=i,this.indexCount=a}return t.prototype.extend=function(t){this.indexCount+=t},e._createClass(t,[{key:"indexEnd",get:function(){return this.indexFrom+this.indexCount}}]),t}(),a=function(){function t(t,e){this.geometryType=0,this._target=t,this.geometryType=e}t.from=function(e,n,i,a){const d=new t(e,n);if(null!=a)for(const t of a)i.seekIndex(t),d.addRecord(i);else for(;i.next();)d.addRecord(i);return d};var a=t.prototype;return a.addRecord=function(t){const e=this._target,a=this.geometryType,d=t.materialKey;let s=t.indexFrom,r=t.indexCount;const o=t.vertexFrom,l=t.vertexCount;if(r||(s=o,r=l),null==this._head){const t=new i(e,a,d,s,r);return void(this._head=new n.List(t))}let u=null,h=this._head;for(;h;){if(s<h.data.indexFrom)return this._insert(d,s,r,u,h);u=h,h=h.next}this._insert(d,s,r,u,null)},a.forEach=function(t){null!=this._head&&this._head.forEach(t)},a.infos=function*(){if(null!=this._head)for(const t of this._head.values())yield t},a._insert=function(t,e,a,d,s){if(null==d&&null==s){const d=new i(this._target,this.geometryType,t,e,a);this._head=new n.List(d)}return null==d&&null!=s?this._insertAtHead(t,e,a,s):null!=d&&null==s?this._insertAtEnd(t,e,a,d):null!=d&&null!=s?this._insertAtMiddle(t,e,a,d,s):void 0},a._insertAtHead=function(t,e,a,d){const s=e+a;if(t===d.data.materialKey&&s===d.data.indexFrom)d.data.indexFrom=e,d.data.indexCount+=a;else{const s=new i(this._target,this.geometryType,t,e,a);this._head=new n.List(s),this._head.next=d}},a._insertAtEnd=function(t,e,a,d){if(d.data.materialKey===t&&d.data.indexEnd===e)d.data.indexCount+=a;else{const s=new i(this._target,this.geometryType,t,e,a),r=new n.List(s);d.next=r}},a._insertAtMiddle=function(t,e,a,d,s){const r=e+a;if(d.data.materialKey===t&&d.data.indexEnd===e)d.data.indexCount+=a,d.data.materialKey===s.data.materialKey&&d.data.indexEnd===s.data.indexFrom&&(d.data.indexCount+=s.data.indexCount,d.next=s.next);else if(t===s.data.materialKey&&r===s.data.indexFrom)s.data.indexFrom=e,s.data.indexCount+=a;else{const r=new i(this._target,this.geometryType,t,e,a),o=new n.List(r);d.next=o,o.next=s}},e._createClass(t)}();t.FeatureDisplayList=a,t.FeatureDisplayListInfo=i,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
