/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","./enums","./WGLContainer","./brushes/WGLBrushInfo","./brushes/WGLBrushStencil"],(function(e,t,r,s,n,i){"use strict";const l=(e,t)=>e.key.level-t.key.level!=0?e.key.level-t.key.level:e.key.row-t.key.row!=0?e.key.row-t.key.row:e.key.col-t.key.col;return function(s){function o(e){var t;return(t=s.call(this)||this)._tileInfoView=e,t}e._inherits(o,s);var a=o.prototype;return a.renderChildren=function(t){this.sortChildren(l),this.setStencilReference(t),e._get(e._getPrototypeOf(o.prototype),"renderChildren",this).call(this,t)},a.createRenderParams=function(t){const{state:r}=t,s=e._get(e._getPrototypeOf(o.prototype),"createRenderParams",this).call(this,t);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s},a.prepareRenderPasses=function(s){const l=e._get(e._getPrototypeOf(o.prototype),"prepareRenderPasses",this).call(this,s);return l.push(s.registerRenderPass({name:"stencil",brushes:[i],drawPhase:r.WGLDrawPhase.DEBUG|r.WGLDrawPhase.MAP|r.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()})),t("esri-tiles-debug")&&l.push(s.registerRenderPass({name:"tileInfo",brushes:[n],drawPhase:r.WGLDrawPhase.DEBUG,target:()=>this.children})),l},a.getStencilTarget=function(){return this.children},a.setStencilReference=function(e){let t=1;for(const r of this.children)r.stencilRef=t++},e._createClass(o,[{key:"requiresDedicatedFBO",get:function(){return!1}}]),o}(s)}));
