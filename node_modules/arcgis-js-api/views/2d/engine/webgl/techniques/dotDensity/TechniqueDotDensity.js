/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../../../chunks/_rollupPluginBabelHelpers","../../color","../../definitions","../Technique","../../../../../webgl/enums"],(function(e,t,n,o,r,a){"use strict";let i=function(e){function r(){return e.apply(this,arguments)||this}return t._inherits(r,e),r.getStorageSpec=function({attributes:e}){return{visualVariables:!1,attributes:e??null}},r._createRendererSchema=function(){return{type:"dot-density",colors:new Float32Array(32),dotValue:-1,dotSize:-1,dotScale:-1,dotBlending:!1,backgroundColor:new Float32Array(4),activeDots:new Float32Array(8),seed:-1}},r.createOrUpdateRendererSchema=function(e,t){const{attributes:r,dotValue:a,referenceScale:i,dotSize:l,dotBlendingEnabled:c,seed:d,backgroundColor:u}=t,s=null!=e&&"dot-density"===e.type?e:this._createRendererSchema();s.dotValue=a,s.dotSize=l,s.dotScale=i,s.dotBlending=c,s.seed=d;const{colors:y,activeDots:p,backgroundColor:g}=s;for(let S=0;S<o.DOT_DENSITY_MAX_FIELDS;S++){const e=S>=r.length?null:r[S].color;n.writeColor(y,e,4*S)}for(let n=0;n<8;n++)p[n]=n<t.attributes.length?1:0;return n.writeColor(g,u),s},r.getVariation=function(e){return{ddDotBlending:e.dotBlending}},r.getVariationHash=function(e){return e.dotBlending?1:0},t._createClass(r)}(r.Technique);i.type="dot-density",i.programSpec={shader:"materials/fill",vertexLayout:{geometry:[{location:0,name:"a_pos",count:2,type:a.DataType.SHORT},{location:1,name:"a_id",count:3,type:a.DataType.UNSIGNED_BYTE},{location:2,name:"a_bitset",count:1,type:a.DataType.UNSIGNED_BYTE},{location:3,name:"a_inverseArea",count:1,type:a.DataType.FLOAT}]}},e.DotDensityTechnique=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
