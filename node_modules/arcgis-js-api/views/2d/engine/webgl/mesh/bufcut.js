/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers"],(function(e,n){"use strict";function t(e,n,t,r,u,l,o){H=0;const f=(r-t)*l,y=u&&u.length,c=y?(u[0]-t)*l:f;let v,s,d,h,Z,a=x(n,t,r,0,c,l,!0);if(a&&a.next!==a.prev){if(y&&(a=p(n,t,r,u,a,l)),f>80*l){v=d=n[0+t*l],s=h=n[1+t*l];for(let e=l;e<c;e+=l){const x=n[e+t*l],r=n[e+1+t*l];v=Math.min(v,x),s=Math.min(s,r),d=Math.max(d,x),h=Math.max(h,r)}Z=Math.max(d-v,h-s),Z=0!==Z?1/Z:0}i(a,e,l,v,s,Z,o,0)}}function x(e,n,t,x,r,i,u){let l;if(u===w(e,n,t,x,r,i)>0)for(let f=x;f<r;f+=i)l=o(f+n*i,e[f+n*i],e[f+1+n*i],l);else for(let f=r-i;f>=x;f-=i)l=o(f+n*i,e[f+n*i],e[f+1+n*i],l);return l&&g(l,l.next)&&(f(l),l=l.next),l}function r(e,n=e){if(!e)return e;let t,x=e;do{if(t=!1,x.steiner||!g(x,x.next)&&0!==h(x.prev,x,x.next))x=x.next;else{if(f(x),x=n=x.prev,x===x.next)break;t=!0}}while(t||x!==n);return n}function i(e,n,t,x,o,y,p,c){if(!e)return;!c&&y&&(e=s(e,x,o,y));let v=e;for(;e.prev!==e.next;){const s=e.prev,d=e.next;if(y?l(e,x,o,y):u(e))n.push(s.index/t+p),n.push(e.index/t+p),n.push(d.index/t+p),f(e),e=d.next,v=d.next;else if((e=d)===v){c?1===c?i(e=k(e,n,t,p),n,t,x,o,y,p,2):2===c&&A(e,n,t,x,o,y,p):i(r(e),n,t,x,o,y,p,1);break}}}function u(e){const n=e.prev,t=e,x=e.next;if(h(n,t,x)>=0)return!1;let r=e.next.next;const i=r;let u=0;for(;r!==e.prev&&(0===u||r!==i);){if(u++,z(n.x,n.y,t.x,t.y,x.x,x.y,r.x,r.y)&&h(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(e,n,t,x){const r=e.prev,i=e,u=e.next;if(h(r,i,u)>=0)return!1;const l=r.x<i.x?r.x<u.x?r.x:u.x:i.x<u.x?i.x:u.x,o=r.y<i.y?r.y<u.y?r.y:u.y:i.y<u.y?i.y:u.y,f=r.x>i.x?r.x>u.x?r.x:u.x:i.x>u.x?i.x:u.x,y=r.y>i.y?r.y>u.y?r.y:u.y:i.y>u.y?i.y:u.y,p=M(l,o,n,t,x),c=M(f,y,n,t,x);let v=e.prevZ,s=e.nextZ;for(;v&&v.z>=p&&s&&s.z<=c;){if(v!==e.prev&&v!==e.next&&z(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&h(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,s!==e.prev&&s!==e.next&&z(r.x,r.y,i.x,i.y,u.x,u.y,s.x,s.y)&&h(s.prev,s,s.next)>=0)return!1;s=s.nextZ}for(;v&&v.z>=p;){if(v!==e.prev&&v!==e.next&&z(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&h(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;s&&s.z<=c;){if(s!==e.prev&&s!==e.next&&z(r.x,r.y,i.x,i.y,u.x,u.y,s.x,s.y)&&h(s.prev,s,s.next)>=0)return!1;s=s.nextZ}return!0}function o(e,n,t,x){const r=j.create(e,n,t);return x?(r.next=x.next,r.prev=x,x.next.prev=r,x.next=r):(r.prev=r,r.next=r),r}function f(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function y(e){let n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function p(e,n,t,r,i,u){const l=new Array;for(let o=0,f=r.length;o<f;o++){const i=x(e,n,t,r[o]*u,o<f-1?r[o+1]*u:t*u,u,!1);i===i.next&&(i.steiner=!0),l.push(y(i))}l.sort(m);for(const x of l)i=c(x,i);return i}function c(e,n){const t=v(e,n);if(!t)return n;const x=_(t,e);return r(x,x.next),r(t,t.next)}function v(e,n){let t=n;const x=e.x,r=e.y;let i,u=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const e=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(e<=x&&e>u){if(u=e,e===x){if(r===t.y)return t;if(r===t.next.y)return t.next}i=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!i)return null;if(x===u)return i.prev;const l=i,o=i.x,f=i.y;let y,p=1/0;for(t=i.next;t!==l;)x>=t.x&&t.x>=o&&x!==t.x&&z(r<f?x:u,r,o,f,r<f?u:x,r,t.x,t.y)&&(y=Math.abs(r-t.y)/(x-t.x),(y<p||y===p&&t.x>i.x)&&b(t,e)&&(i=t,p=y)),t=t.next;return i}function s(e,n,t,x){let r;for(;r!==e;r=r.next){if(r=r||e,null===r.z&&(r.z=M(r.x,r.y,n,t,x)),r.prev.next!==r||r.next.prev!==r)return r.prev.next=r,r.next.prev=r,s(e,n,t,x);r.prevZ=r.prev,r.nextZ=r.next}return e.prevZ.nextZ=null,e.prevZ=null,d(e)}function d(e){let n,t=1;for(;;){let x,r=e;e=null,n=null;let i=0;for(;r;){i++,x=r;let u=0;for(;u<t&&x;u++)x=x.nextZ;let l=t;for(;u>0||l>0&&x;){let t;0===u?(t=x,x=x.nextZ,l--):0!==l&&x?r.z<=x.z?(t=r,r=r.nextZ,u--):(t=x,x=x.nextZ,l--):(t=r,r=r.nextZ,u--),n?n.nextZ=t:e=t,t.prevZ=n,n=t}r=x}if(n.nextZ=null,t*=2,i<2)return e}}function h(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function Z(e,n,t,x){return!!(g(e,n)&&g(t,x)||g(e,x)&&g(t,n))||h(e,n,t)>0!=h(e,n,x)>0&&h(t,x,e)>0!=h(t,x,n)>0}function a(e,n){let t=e;do{if(t.index!==e.index&&t.next.index!==e.index&&t.index!==n.index&&t.next.index!==n.index&&Z(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function w(e,n,t,x,r,i){let u=0;for(let l=x,o=r-i;l<r;l+=i)u+=(e[o+n*i]-e[l+n*i])*(e[l+1+n*i]+e[o+1+n*i]),o=l;return u}function z(e,n,t,x,r,i,u,l){return(r-u)*(n-l)-(e-u)*(i-l)>=0&&(e-u)*(x-l)-(t-u)*(n-l)>=0&&(t-u)*(i-l)-(r-u)*(x-l)>=0}function b(e,n){return h(e.prev,e,e.next)<0?h(e,n,e.next)>=0&&h(e,e.prev,n)>=0:h(e,n,e.prev)<0||h(e,e.next,n)<0}function M(e,n,t,x,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-x)*r)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function g(e,n){return e.x===n.x&&e.y===n.y}function m(e,n){return e.x-n.x}function k(e,n,t,x){let r=e;do{const i=r.prev,u=r.next.next;!g(i,u)&&Z(i,r,r.next,u)&&b(i,u)&&b(u,i)&&(n.push(i.index/t+x),n.push(r.index/t+x),n.push(u.index/t+x),f(r),f(r.next),r=e=u),r=r.next}while(r!==e);return r}function A(e,n,t,x,u,l,o){let f=e;do{let e=f.next.next;for(;e!==f.prev;){if(f.index!==e.index&&P(f,e)){let y=_(f,e);return f=r(f,f.next),y=r(y,y.next),i(f,n,t,x,u,l,o,0),void i(y,n,t,x,u,l,o,0)}e=e.next}f=f.next}while(f!==e)}function P(e,n){return e.next.index!==n.index&&e.prev.index!==n.index&&!a(e,n)&&b(e,n)&&b(n,e)&&S(e,n)}function S(e,n){let t=e,x=!1;const r=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&r<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(x=!x),t=t.next}while(t!==e);return x}function _(e,n){const t=j.create(e.index,e.x,e.y),x=j.create(n.index,n.x,n.y),r=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=r,r.prev=t,x.next=t,t.prev=x,i.next=x,x.prev=i,x}let j=function(){function e(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}return e.create=function(n,t,x){const r=H<B.length?B[H++]:new e;return r.index=n,r.x=t,r.y=x,r.prev=null,r.next=null,r.z=null,r.prevZ=null,r.nextZ=null,r.steiner=!1,r},n._createClass(e)}();const B=new Array,C=8096;let H=0;for(let O=0;O<C;O++)B.push(new j);e.bufcut=t,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
