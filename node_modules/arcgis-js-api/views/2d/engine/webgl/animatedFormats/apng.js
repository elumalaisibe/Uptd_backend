/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/index3","../../../../../core/promiseUtils","../../../../../core/time"],(function(e,t,o,n){"use strict";async function r(e,r){const i=t.parseApng3rdParty(e);if(i instanceof Error)throw i;await i.createImages(),o.throwIfAborted(r);const{frames:a,width:s,height:c}=i,p=document.createElement("canvas");p.width=s,p.height=c;const l=p.getContext("2d",{willReadFrequently:!0}),d=[],g=[];for(const t of a){g.push(n.Milliseconds(t.delay||100));const e=t.imageElement;0===t.blendOp?l.globalCompositeOperation="copy":l.globalCompositeOperation="source-over";const o=2===t.disposeOp?l.getImageData(t.left,t.top,t.width,t.height):void 0;l.drawImage(e,t.left,t.top);const r=l.getImageData(0,0,s,c);d.push(r),0===t.disposeOp||(1===t.disposeOp?l.clearRect(t.left,t.top,t.width,t.height):2===t.disposeOp&&l.putImageData(o,t.left,t.top))}return{frameDurations:g,getFrame:e=>d[e],width:s,height:c}}const i=[137,80,78,71,13,10,26,10];function a(e){const t=new Uint8Array(e);return!i.some(((e,o)=>e!==t[o]))}function s(e){if(!a(e))return!1;const t=new DataView(e),o=new Uint8Array(e);let n,r=8;do{const e=t.getUint32(r);if(n=String.fromCharCode.apply(String,Array.prototype.slice.call(o.subarray(r+4,r+8))),"acTL"===n)return!0;r+=12+e}while("IEND"!==n&&r<o.length);return!1}e.isAnimatedPNG=s,e.isPNG=a,e.parseApng=r,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
