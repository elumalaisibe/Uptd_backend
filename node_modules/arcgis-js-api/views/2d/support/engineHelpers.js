/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../core/BidiText","../../../core/screenUtils","../engine/webgl/alignmentUtils","../engine/webgl/definitions","../engine/webgl/mesh/templates/shapingUtils"],(function(e,t,n,i,o,s){"use strict";async function r(e,r,a){const l=i.getXAnchorDirection("center"),c=i.getYAnchorDirection("middle"),d=r.textureManager.rasterizeItem(e.toJSON(),window.devicePixelRatio||1,void 0,a),[,g]=t.bidiText(e.text),h=(await d).glyphMosaicItems;return s.shapeGlyphs(h??[],g,{angle:e.angle??0,xOffset:n.pt2px(e.xoffset??0),yOffset:n.pt2px(e.yoffset??0),lineHeight:o.MAGIC_LABEL_LINE_HEIGHT*Math.max(.25,e.lineHeight),maxLineWidth:Math.max(32,Math.min(n.pt2px(e.lineWidth),512)),decoration:e.font.decoration,scale:Math.min(Math.round(n.pt2px(e.font.size)),127)/o.GLYPH_SIZE,hAlign:l,vAlign:c,isCIM:!1,hasBackground:!!e.backgroundColor,borderLineSize:e.borderLineSize}).boundsT}let a=r;async function l(e,t,n){return a(e,t,n)}const c={stubGetTextBounds:e=>a=e,restoreGetTextBounds:()=>a=r};e.getTextBounds=l,e.test=c,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
