/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../geometry","../../../Graphic","../../../core/asyncUtils","../../../core/Collection","../../../core/Error","../../../core/Evented","../../../core/Handles","../../../core/Logger","../../../core/maybe","../../../core/quantityUtils","../../../core/reactiveUtils","../../../core/screenUtils","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","../../../geometry/support/coordsUtils","../../../layers/GraphicsLayer","../../../symbols/SimpleMarkerSymbol","../../ViewingMode","../../2d/interactive/SnappingVisualizer2D","./drawUtils","./GraphicMover","./HighlightHelper","./layerUtils","./settings","../../input/InputManager","../../interactive/keybindings","../../interactive/editGeometry/EditGeometryOperations","../../interactive/sketch/SketchTooltipOptions","../../interactive/snapping/SnappingContext","../../interactive/tooltip/Tooltip","../../interactive/tooltip/TranslateTooltipInfos","../../support/automaticAreaMeasurementUtils","../../support/automaticLengthMeasurementUtils","../../../geometry/Polyline","../../../geometry/Point"],(function(e,t,i,s,o,n,r,a,c,p,h,l,d,y,_,u,v,g,m,f,x,G,b,M,w,V,S,k,E,C,I,T,O,R,H,U,A,D,L,F){"use strict";let z=e._createClass((function(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape-start"})),P=e._createClass((function(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape"})),B=e._createClass((function(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape-stop"})),K=e._createClass((function(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move-start"})),q=e._createClass((function(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move"})),N=e._createClass((function(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move-stop"})),W=e._createClass((function(e){this.added=e,this.type="vertex-select"})),Y=e._createClass((function(e){this.removed=e,this.type="vertex-deselect"})),j=e._createClass((function(e,t,i,s){this.added=e,this.graphic=t,this.oldGraphic=i,this.vertices=s,this.type="vertex-add"})),J=e._createClass((function(e,t,i,s){this.removed=e,this.graphic=t,this.oldGraphic=i,this.vertices=s,this.type="vertex-remove"}));const Q=E.settings.reshapeGraphics,X={vertices:{default:new G({style:"circle",size:Q.vertex.size,color:Q.vertex.color,outline:{color:Q.vertex.outlineColor,width:1}}),hover:new G({style:"circle",size:Q.vertex.hoverSize,color:Q.vertex.hoverColor,outline:{color:Q.vertex.hoverOutlineColor,width:1}}),selected:new G({style:"circle",size:Q.selected.size,color:Q.selected.color,outline:{color:Q.selected.outlineColor,width:1}})},midpoints:{default:new G({style:"circle",size:Q.midpoint.size,color:Q.midpoint.color,outline:{color:Q.midpoint.outlineColor,width:1}}),hover:new G({style:"circle",size:Q.midpoint.size,color:Q.midpoint.color,outline:{color:Q.midpoint.outlineColor,width:1}})}};let Z=function(t){function i(e){var i;return(i=t.call(this,e)||this)._activeOperationInfo=null,i._editGeometryOperations=null,i._handles=new c,i._graphicAttributes={esriSketchTool:"box"},i._mover=null,i._snappingContext=null,i._snappingTask=null,i._stagedVertex=null,i._tooltip=null,i._viewHandles=new c,i.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},i.enableMidpoints=!0,i.enableMovement=!0,i.enableVertices=!0,i.graphic=null,i.layer=null,i.midpointGraphics=new n,i.midpointSymbol=new G({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),i.selectedVertices=[],i.snappingManager=null,i.tooltipOptions=new O,i.type="reshape",i.vertexGraphics=new n,i.view=null,i}e._inherits(i,t);var a=i.prototype;return a.initialize=function(){const e=this.view;this._highlightHelper=new S({view:e}),this._setup(),this._handles.add([d.when((()=>e?.ready),(()=>{const{layer:e,view:t}=this;k.addUniqueLayer(t,e),this._viewHandles.add(t.on("key-down",(e=>this._keyDownHandler(e)),C.ViewEventPriorities.TOOL))}),{once:!0,initial:!0}),d.pausable((()=>this.graphic),(()=>this.refresh())),d.pausable((()=>this.layer),((e,t)=>{t&&(this._clearSelection(),this._resetGraphics(t)),this.refresh()})),d.pausable((()=>this.enableMidpoints),(()=>this.refresh())),d.watch((()=>this.tooltipOptions.enabled),(e=>{this._tooltip=e?new H.Tooltip({view:this.view}):h.destroyMaybe(this._tooltip)}),d.syncAndInitial)])},a.destroy=function(){this._reset(),this._mover?.destroy(),this._mover=null,this._tooltip=h.destroyMaybe(this._tooltip),this._handles=h.destroyMaybe(this._handles),this._viewHandles=h.destroyMaybe(this._viewHandles)},a.isUIGraphic=function(e){const t=[];return this.graphic&&t.push(this.graphic),t.concat(this.vertexGraphics.items,this.midpointGraphics.items),t.length>0&&t.includes(e)},a.refresh=function(){this._reset(),this._setup()},a.reset=function(){this.graphic=null},a.clearSelection=function(){this._clearSelection()},a.removeSelectedVertices=function(){this.selectedVertices.length&&this._removeVertices(this.selectedVertices)},a._setup=function(){const{graphic:e,layer:t}=this;if(!t||!e||null==e.geometry)return;const i=e.geometry;"mesh"!==i.type&&"extent"!==i.type?("polygon"===i.type&&f.closeRingsAndFixWinding(i),this._setUpHighlights(),this._setupGraphics(),this._setupMover()):this._logGeometryTypeError()},a._setUpHighlights=function(){this.highlightsEnabled&&this.graphic&&this._highlightHelper?.add(this.graphic)},a._setUpGeometryHelper=function(){const e=this.graphic.geometry;if(null==e||"mesh"===e.type||"extent"===e.type)return void this._logGeometryTypeError();const t="multipoint"===e.type?new L({paths:e.points,spatialReference:e.spatialReference}):e;this._editGeometryOperations=T.EditGeometryOperations.fromGeometry(t,b.ViewingMode.Local)},a._saveSnappingContextForHandle=function(e,t){this._snappingGraphicsLayer=new x({listMode:"hide",internal:!0,title:"Reshape snapping layer"}),this.view.map.layers.add(this._snappingGraphicsLayer),this._snappingContext=new R.SnappingContext({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:t.viewEvent?.pointerType||"mouse",excludeFeature:this.graphic,visualizer:new M.SnappingVisualizer2D(this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(e)})},a._reset=function(){this._clearSelection(),this._highlightHelper?.removeAll(),this._updateTooltip(),this._resetGraphics(),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"},a._resetSnappingStateVars=function(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),null!=this._snappingGraphicsLayer&&(this.view?.map&&this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy()),this._editGeometryOperations=h.destroyMaybe(this._editGeometryOperations),this._snappingTask=h.abortMaybe(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null},a._resetGraphics=function(e){this._removeMidpointGraphics(e),this._removeVertexGraphics(e),this._set("selectedVertices",[])},a._removeMidpointGraphics=function(e){const t=e||this.layer;t&&t.removeMany(this.midpointGraphics.items),this.midpointGraphics.items.forEach((e=>e.destroy())),this.midpointGraphics.removeAll()},a._removeVertexGraphics=function(e){const t=e||this.layer;t&&t.removeMany(this.vertexGraphics.items),this.vertexGraphics.items.forEach((e=>e.destroy())),this.vertexGraphics.removeAll()},a._getCoordinatesForUI=function(e){const t=f.geometryToCoordinates(e.clone());if("polygon"===e.type)for(const i of t){const e=i[i.length-1];i[0][0]===e[0]&&i[0][1]===e[1]&&i.length>2&&i.pop()}return t},a._setupGraphics=function(){const e=this.graphic.geometry;if(null!=e&&("polyline"===e.type||"polygon"===e.type)){const t=this._getCoordinatesForUI(e);this.enableMidpoints&&this._setUpMidpointGraphics(t),this.enableVertices&&this._setUpVertexGraphics(t)}},a._setUpMidpointGraphics=function(e){this._removeMidpointGraphics();const t=this._createMidpointGraphics(e);this.midpointGraphics.addMany(t),this.layer.addMany(t)},a._setUpVertexGraphics=function(e){this._removeVertexGraphics();const t=this._createVertexGraphics(e);this.vertexGraphics.addMany(t),this._storeRelatedVertexIndices(),this.layer.addMany(t)},a._createVertexGraphics=function(e){const{_graphicAttributes:t,symbols:i,view:{spatialReference:o}}=this,n=[];return e?.forEach(((e,r)=>{e.forEach(((e,a)=>{const[c,p]=e;n.push(new s({geometry:new F({x:c,y:p,spatialReference:o}),symbol:i?.vertices?.default,attributes:{...t,pathIndex:r,pointIndex:a}}))}))})),n},a._createMidpointGraphics=function(e){const{_graphicAttributes:t,symbols:i,view:{spatialReference:o}}=this,n=[];return e?.forEach(((e,r)=>{e.forEach(((a,c)=>{const[p,h]=a,l=e[c+1]?c+1:0;if("polygon"===this.graphic.geometry?.type||0!==l){const[a,d]=e[l],[y,_]=f.getMidpoint([p,h],[a,d]);n.push(new s({geometry:new F({x:y,y:_,spatialReference:o}),symbol:i.midpoints.default,attributes:{...t,pathIndex:r,pointIndexStart:c,pointIndexEnd:l}}))}}))})),n},a._storeRelatedVertexIndices=function(){const e=this.vertexGraphics.items;if(!e)return;const t=e.map((({geometry:e})=>({x:e.x,y:e.y})));for(let i=0;i<t.length;i++){const s=[];for(let e=0;e<t.length;e++){if(i===e)continue;const o=t[i],n=t[e];o.x===n.x&&o.y===n.y&&s.push(e)}e[i].attributes.relatedGraphicIndices=s}},a._setupMover=function(){const{enableMovement:e,graphic:t,midpointGraphics:i,vertexGraphics:s,view:o}=this,n=s.concat(i).items;e&&n.push(t),this._mover=new V({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,graphics:n,view:o,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})},a._onGraphicClickCallback=function(e){e.viewEvent.stopPropagation();const t=e.graphic;if(t===this.graphic)this.clearSelection(),this.emit("graphic-click",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e);else if(this._isMidpoint(t)){if(2===e.viewEvent.button)return;const i=this.graphic.clone(),s=this._createVertexFromMidpoint(t);this.refresh(),this._emitVertexAddEvent([t],i,s)}else if(this._isVertex(t))if(e.viewEvent.stopPropagation(),2===e.viewEvent.button)this._removeVertices(t);else{e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(t)?this._removeFromSelection(t,!0):this._addToSelection(t)}},a._setUpOperation=function(e){const{graphic:t,dx:i,dy:s}=e,o=t===this.graphic;this._resetSnappingStateVars(),this._setUpGeometryHelper(),this._saveSnappingContextForHandle(t,e),this._activeOperationInfo={target:this.graphic,mover:t,operationType:o?"move":"reshape",totalDx:i,totalDy:s}},a._onGraphicMoveStartCallback=function(e){const{dx:t,dy:i,graphic:s}=e;if(s===this.graphic){const{geometry:o}=s;return this._setUpOperation(e),this._emitMoveStartEvent(t,i),void(null!=o&&"point"===o.type&&this._onHandleMove(s,t,i,e,(()=>{this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(t,i)})))}if(!this.selectedVertices.includes(s)){if(this._clearSelection(),this._isMidpoint(s)){const e=this.graphic.clone(),t=this._createVertexFromMidpoint(s);this._emitVertexAddEvent([s],e,t)}this._addToSelection(s)}this._setUpOperation(e),this._emitReshapeStartEvent(s),this._onHandleMove(s,t,i,e,(()=>{this._updateTooltip(s,e.viewEvent),this._emitReshapeEvent(s)}))},a._onGraphicMoveCallback=function(e){const t=this._activeOperationInfo;if(!t)return;const{dx:i,dy:s,graphic:o}=e;t.totalDx+=i,t.totalDy+=s;const{operationType:n}=t,{geometry:r}=o;if(null!=r)if("move"!==n)this._onHandleMove(o,i,s,e,(()=>{this._updateTooltip(o,e.viewEvent),this._emitReshapeEvent(o)}));else if("point"===r.type)this._onHandleMove(o,i,s,e,(()=>{this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(i,s)}));else if("polyline"===r.type||"polygon"===r.type){const t=this._getCoordinatesForUI(r);this._updateVertexGraphicLocations(t),this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(i,s)}},a._onGraphicMoveStopCallback=function(e){const t=this._activeOperationInfo;if(!t)return;const{dx:i,dy:s,graphic:o}=e,{operationType:n}=t;t.totalDx+=i,t.totalDy+=s,this._onHandleMove(o,i,s,e,(()=>"move"===n?this._emitMoveStopEvent():this._emitReshapeStopEvent(o))),this._isMidpoint(o)?this.refresh():(this._updateTooltip(this._isVertex(o)?o:null),this._resetSnappingStateVars(),this._activeOperationInfo=null)},a._updateVertexGraphicLocations=function(e){const t=this.view.spatialReference;for(const i of this.vertexGraphics){const{pathIndex:s,pointIndex:o}=i.attributes,[n,r]=e[s][o];i.geometry=new F({x:n,y:r,spatialReference:t})}this._updateMidpointGraphicLocations(e)},a._updateMidpointGraphicLocations=function(e){for(const t of this.midpointGraphics){const{pathIndex:i,pointIndexStart:s,pointIndexEnd:o}=t.attributes,[n,r]=e[i][s],[a,c]=e[i][o],[p,h]=f.getMidpoint([n,r],[a,c]);t.geometry=new F({x:p,y:h,spatialReference:this.view.spatialReference})}},a._getIndicesForVertexGraphic=function({attributes:e}){return[e?.pathIndex||0,e?.pointIndex||0]},a._getVertexFromEditGeometry=function(e){const[t,i]=this._getIndicesForVertexGraphic(e);return this._editGeometryOperations.data.components[t].vertices[i]},a._onHandleMove=function(e,t,i,s,n){h.abortMaybe(this._snappingTask);const r=this._snappingContext;if(!r)return;const a=e.geometry,c="graphic-move-stop"===s.type;if(null!=this.snappingManager&&this.selectedVertices.length<2&&!c){const s=this.snappingManager;this._stagedVertex=s.update({point:a,context:r}),this._syncGeometryAfterVertexMove(e,new F(this._stagedVertex),t,i,c),n(),this._snappingTask=o.createTask((async o=>{const p=await s.snap({point:a,context:r,signal:o});p.valid&&(this._stagedVertex=p.apply(),this._syncGeometryAfterVertexMove(e,new F(this._stagedVertex),t,i,c),n())}))}else{const s=null!=this._stagedVertex?new F(this._stagedVertex):a;this._syncGeometryAfterVertexMove(e,s,t,i,c),n()}},a._syncGeometryAfterVertexMove=async function(e,t,i,s,o=!1){const n=this._editGeometryOperations.data.geometry;if("point"===n.type)e.geometry=t;else if("mesh"===n.type)e.geometry=n.centerAt(t),e.notifyGeometryChanged();else{const{x:r,y:a}=t,[c,p]=this._getIndicesForVertexGraphic(e);let h=f.geometryToCoordinates(n);const l=h[c].length-1;h[c][p]=[r,a],"polygon"===n.type&&(0===p?h[c][l]=[r,a]:p===l&&(h[c][0]=[r,a])),this._isVertex(e)&&(h=this._moveRelatedCoordinates(h,e,r,a),h=this._moveSelectedHandleCoordinates(h,e,i,s,"polygon"===n.type),this._updateMidpointGraphicLocations(h)),this.graphic.geometry=n.clone();const d=this._getVertexFromEditGeometry(e),y=r-d.pos[0],_=a-d.pos[1];this._editGeometryOperations.moveVertices([d],y,_,0),o&&(this._mover?this._mover.updateGeometry(this._mover.graphics.indexOf(e),t):e.geometry=t)}},a._moveRelatedCoordinates=function(e,t,i,s){const{relatedGraphicIndices:o}=t.attributes;for(const n of o){const o=this.vertexGraphics.at(n),{pathIndex:r,pointIndex:a}=o.attributes;e[r][a]=[i,s],o.geometry=t.geometry}return e},a._moveSelectedHandleCoordinates=function(e,t,i,s,o){for(const n of this.selectedVertices)if(n!==t){const{pathIndex:t,pointIndex:r,relatedGraphicIndices:a}=n.attributes,c=w.cloneMove(n.geometry,i,s,this.view),p=e[t].length-1;e[t][r]=[c.x,c.y],n.geometry=c,o&&(0===r?e[t][p]=[c.x,c.y]:r===p&&(e[t][0]=[c.x,c.y]));for(const i of a){const t=this.vertexGraphics.at(i),{pathIndex:s,pointIndex:o}=t.attributes;e[s][o]=[c.x,c.y],t.geometry=c}}return e},a._onGraphicPointerOverCallback=function(e){const t=e.graphic,i=this._isVertex(t);i&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateTooltip(i?t:null),this._updateHoverCursor(t)},a._onGraphicPointerOutCallback=function(e){const t=e.graphic;this._isVertex(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor="default",this._updateTooltip()},a._createVertexFromMidpoint=function(e){const{_graphicAttributes:t,graphic:i}=this,s=i.geometry;if(null==s||"polygon"!==s.type&&"polyline"!==s.type)return[];const o=s.clone(),n=[],{pathIndex:r,pointIndexStart:a,pointIndexEnd:c}=e.attributes,{x:p,y:h}=e.geometry,l=0===c?a+1:c,d=f.geometryToCoordinates(o);return d[r].splice(l,0,[p,h]),e.attributes={...t,pathIndex:r,pointIndex:l,relatedGraphicIndices:[]},n.push({coordinates:d[r][l],componentIndex:r,vertexIndex:l}),this.graphic.geometry=o,n},a._addToSelection=function(e){e instanceof s&&(e=[e]);for(const t of e)t.symbol=this.symbols.vertices.selected;this._set("selectedVertices",this.selectedVertices.concat(e)),this._emitSelectEvent(e)},a._removeFromSelection=function(e,t){const{vertices:i}=this.symbols,o=t?i.hover:i.default;e instanceof s&&(e=[e]);for(const s of e)this.selectedVertices.splice(this.selectedVertices.indexOf(s),1),this._set("selectedVertices",this.selectedVertices),s.set("symbol",o);this._emitDeselectEvent(e)},a._clearSelection=function(){if(this.selectedVertices.length){const e=this.selectedVertices;for(const t of this.selectedVertices)t.set("symbol",this.symbols.vertices.default);this._set("selectedVertices",[]),this._emitDeselectEvent(e)}},a._keyDownHandler=function(e){I.SKETCH_KEYS.delete.includes(e.key)&&!e.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)},a._removeVertices=function(e){const t=this.graphic.geometry;if(null==t||"polygon"!==t.type&&"polyline"!==t.type)return;if("polygon"===t.type&&this.vertexGraphics.length<4||this.vertexGraphics.length<3)return;e instanceof s&&(e=[e]);const i=this.graphic.clone(),o=t.clone();let n=f.geometryToCoordinates(o);const r=[];e instanceof s&&(e=[e]);for(const s of e){const{x:e,y:t}=s.geometry;for(let i=0;i<n.length;i++){const s=n[i];for(let o=0;o<s.length;o++){const[a,c]=s[o];e===a&&t===c&&(r.push({coordinates:n[i][o],componentIndex:i,vertexIndex:o}),n[i].splice(Number(o),1))}}}if("polygon"===o.type)n=n.filter((e=>{if(e.length<2)return!1;const[t,i]=e[0],[s,o]=e[e.length-1];return(2!==e.length||t!==s||i!==o)&&(t===s&&i===o||e.push(e[0]),!0)})),o.rings=n;else{for(const e of n)1===e.length&&n.splice(n.indexOf(e),1);o.paths=n}this.graphic.geometry=o,this.refresh(),this._emitVertexRemoveEvent(e,i,r)},a._isVertex=function(e){return this.vertexGraphics.includes(e)},a._isSelected=function(e){return this._isVertex(e)&&this.selectedVertices.includes(e)},a._isMidpoint=function(e){return this.midpointGraphics.includes(e)},a._updateHoverCursor=function(e){this.view.cursor=this._isMidpoint(e)?"copy":"move"},a._updateTooltip=function(e,t){null!=this._tooltip&&(e?e===this.graphic?this._updateMoveGraphicTooltip(t):this._updateMoveVertexTooltip(t):this._tooltip.clear())},a._updateMoveGraphicTooltip=function(e){const{_tooltip:t,tooltipOptions:i,view:s}=this;if(null==t)return;const o=new U.TranslateGraphicTooltipInfo({tooltipOptions:i});if(e){const{x:t,y:i}=e.origin,n=s.toMap(e),r=s.toMap(y.createScreenPoint(t,i)),a=D.autoDistanceBetweenPoints2D(r,n);o.distance=null!=a?a:l.zeroMeters}t.info=o},a._updateMoveVertexTooltip=function(e){const{_tooltip:t,graphic:{geometry:i},tooltipOptions:s,view:o}=this;if(null==t)return;const n=new U.TranslateVertexTooltipInfo({tooltipOptions:s});if(null!=i&&("polygon"===i.type?n.area=A.autoArea2D(i):"polyline"===i.type&&(n.totalLength=D.autoLength2D(i))),e){const{x:t,y:i}=e.origin,s=o.toMap(e),r=o.toMap(y.createScreenPoint(t,i)),a=D.autoDistanceBetweenPoints2D(r,s);n.distance=null!=a?a:l.zeroMeters}t.info=n},a._emitMoveStartEvent=function(e,t){const i=new K(this.graphic,e,t);this.emit("move-start",i),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(i)},a._emitMoveEvent=function(e,t){const i=new q(this.graphic,e,t);this.emit("move",i),this.callbacks.onMove&&this.callbacks.onMove(i)},a._emitMoveStopEvent=function(){const e=this._activeOperationInfo;if(!e)return;const{totalDx:t,totalDy:i}=e,s=new N(this.graphic,t,i);this.emit("move-stop",s),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(s)},a._emitReshapeStartEvent=function(e){const t=new z(this.graphic,e,this.selectedVertices);this.emit("reshape-start",t),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(t)},a._emitReshapeEvent=function(e){const t=new P(this.graphic,e,this.selectedVertices);this.emit("reshape",t),this.callbacks.onReshape&&this.callbacks.onReshape(t)},a._emitReshapeStopEvent=function(e){const t=new B(this.graphic,e,this.selectedVertices);this.emit("reshape-stop",t),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(t)},a._emitSelectEvent=function(e){const t=new W(e);this.emit("select",t),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(t)},a._emitDeselectEvent=function(e){const t=new Y(e);this.emit("deselect",t),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(t)},a._emitVertexAddEvent=function(e,t,i){const s=new j(e,this.graphic,t,i);this.emit("vertex-add",s),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(s)},a._emitVertexRemoveEvent=function(e,t,i){const s=new J(e,this.graphic,t,i);this.emit("vertex-remove",s),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(s)},a._logGeometryTypeError=function(){p.getLogger(this).error(new r("reshape:invalid-geometry","Reshape operation not supported for the provided graphic. The geometry type is not supported."))},e._createClass(i,[{key:"highlightsEnabled",set:function(e){this._highlightHelper?.removeAll(),this._set("highlightsEnabled",e),this._setUpHighlights()}},{key:"state",get:function(){const e=!!this.get("view.ready"),t=!(!this.get("graphic")||!this.get("layer"));return e&&t?"active":e?"ready":"disabled"}},{key:"symbols",set:function(e){const{midpoints:t=X.midpoints,vertices:i=X.vertices}=e||{};this._set("symbols",{midpoints:t,vertices:i})}}]),i}(a.EventedAccessor);t.__decorate([_.property()],Z.prototype,"_tooltip",void 0),t.__decorate([_.property()],Z.prototype,"callbacks",void 0),t.__decorate([_.property()],Z.prototype,"enableMidpoints",void 0),t.__decorate([_.property()],Z.prototype,"enableMovement",void 0),t.__decorate([_.property()],Z.prototype,"enableVertices",void 0),t.__decorate([_.property()],Z.prototype,"graphic",void 0),t.__decorate([_.property({value:!0})],Z.prototype,"highlightsEnabled",null),t.__decorate([_.property()],Z.prototype,"layer",void 0),t.__decorate([_.property({readOnly:!0})],Z.prototype,"midpointGraphics",void 0),t.__decorate([_.property()],Z.prototype,"midpointSymbol",void 0),t.__decorate([_.property({readOnly:!0})],Z.prototype,"selectedVertices",void 0),t.__decorate([_.property()],Z.prototype,"snappingManager",void 0),t.__decorate([_.property({readOnly:!0})],Z.prototype,"state",null),t.__decorate([_.property({value:X})],Z.prototype,"symbols",null),t.__decorate([_.property({type:O})],Z.prototype,"tooltipOptions",void 0),t.__decorate([_.property({readOnly:!0})],Z.prototype,"type",void 0),t.__decorate([_.property({readOnly:!0})],Z.prototype,"vertexGraphics",void 0),t.__decorate([_.property()],Z.prototype,"view",void 0),Z=t.__decorate([m.subclass("esri.views.draw.support.Reshape")],Z);return Z}));
