/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/vec2","../../../support/elevationInfoUtils","./Settings","./SnappingPoint","./snappingUtils","../support/viewUtils"],(function(e,t,i,n,s,o,r,h){"use strict";let u=function(){function e(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=s.defaults.shortLineThreshold*s.defaults.shortLineThreshold}var u=e.prototype;return u.snap=function(e,t){return null!=t.vertexHandle?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)},u.edgeExceedsShortLineThreshold=function(e,t){return this.exceedsShortLineThreshold(o.anyMapPointToSnappingPoint(e.leftVertex.pos,this.view,t),o.anyMapPointToSnappingPoint(e.rightVertex.pos,this.view,t),t)},u.exceedsShortLineThreshold=function(e,t,{spatialReference:i}){return 0===this.squaredShortLineThreshold||r.squaredScreenDistance(h.vectorToScreenPoint(t,i,n.absoluteHeightElevationInfo,this.view),h.vectorToScreenPoint(e,i,n.absoluteHeightElevationInfo,this.view))>this.squaredShortLineThreshold},u.isVertical=function(e,t){return i.squaredDistance(e,t)<s.defaults.verticalLineThreshold},u.squaredProximityThreshold=function(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold},t._createClass(e,[{key:"_squaredMouseProximityThreshold",get:function(){return this.options.distance*this.options.distance}},{key:"_squaredTouchProximityThreshold",get:function(){const{distance:e,touchSensitivityMultiplier:t}=this.options,i=e*t;return i*i}}]),e}();e.SnappingAlgorithm=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
