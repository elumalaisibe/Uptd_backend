/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../EditGeometry"],(function(e,t,r){"use strict";let i=function(){function e(e,t,r=0){this._editGeometry=e,this._vertices=t,this._minNumberOfVertices=r,this.removedVertices=null}var i=e.prototype;return i.apply=function(){let e="redo";if(null==this.removedVertices){const t=this.removedVertices=[];this._vertices.forEach((e=>{const r=this._removeVertex(e);null!=r&&t.push(r)})),e="apply"}else this.removedVertices.forEach((e=>{this._removeVertex(e.removedVertex)}));this._editGeometry.notifyChanges({operation:e,removedVertices:this._vertices})},i.undo=function(){this.removedVertices?.forEach((e=>{this._undoRemoveVertex(e)})),this._editGeometry.notifyChanges({operation:"undo",addedVertices:this._vertices})},i.accumulate=function(){return!1},i._removeVertex=function(e){const t=e.component;if(t.vertices.length<=this._minNumberOfVertices)return null;const i={removedVertex:e,createdEdge:null},s=e.leftEdge,n=e.rightEdge;return t.vertices.splice(t.vertices.indexOf(e),1),s&&(t.edges.splice(t.edges.indexOf(s),1),s.leftVertex.rightEdge=null),n&&(t.edges.splice(t.edges.indexOf(n),1),n.rightVertex.leftEdge=null),0===e.index&&n&&this._vertices.length>0&&t.swapVertices(t.vertices.indexOf(n.rightVertex),0),s&&n&&(i.createdEdge=new r.Edge(t,s.leftVertex,n.rightVertex),t.edges.push(i.createdEdge)),n&&t.updateVertexIndex(n.rightVertex,n.rightVertex.index-1),i},i._undoRemoveVertex=function(e){const t=e.removedVertex,r=e.removedVertex.component,i=t.leftEdge,s=t.rightEdge;e.createdEdge&&r.edges.splice(r.edges.indexOf(e.createdEdge),1),r.vertices.push(t),i&&(r.edges.push(i),i.leftVertex.rightEdge=i),s&&(r.edges.push(s),s.rightVertex.leftEdge=s),r.updateVertexIndex(t,t.index)},t._createClass(e)}();e.RemoveVertices=i,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
