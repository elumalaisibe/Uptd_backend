/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../chunks/tslib.es6","../../../core/Accessor","../../../core/maybe","../../../core/reactiveUtils","../../../core/accessorSupport/decorators/property","../../../core/accessorSupport/ensureType","../../../core/arrayUtils","../../../core/has","../../../core/accessorSupport/decorators/subclass","./css","./content/tooltipContentFactory","../../../widgets/support/widgetUtils"],(function(t,e,n,o,i,r,s,c,a,l,p,d,u,y){"use strict";const _={base:`${d.BASE}`};function h({container:t,contentWidget:e,screenPoint:n}){const{style:o}=t;if(null!=n&&null!=e){o.display="block";const e=y.isRTL(t),i=`translate(${Math.round(n.x)+f[0]*(e?-1:1)}px, ${Math.round(n.y)+f[1]}px)`;o.transform=e?`translate(-100%, 0) ${i}`:i}else o.display="none"}t.Tooltip=function(t){function n(e){var n;return(n=t.call(this,e)||this).info=null,n._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(_.base),t})(),n._contentWidget=null,n}e._inherits(n,t);var o=n.prototype;return o.initialize=function(){const t=this._contentContainer;this.addHandles([r.watch((()=>this.view.overlay?.surface),(e=>{t.remove(),e?.appendChild(t)}),r.syncAndInitial),r.watch((()=>this.info),((e,n)=>{if(null!=this._contentWidget&&null!=e&&null!=n&&e.type===n.type)this._contentWidget.info=e;else{this._contentWidget=i.destroyMaybe(this._contentWidget);const n=u.tooltipContentFactory(this,e);n&&(this._contentWidget=n,n.container&&t.appendChild(n.container))}}),r.syncAndInitial),r.watch((()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this._screenPoint})),h,r.syncAndInitial)])},o.destroy=function(){this._contentWidget=i.destroyMaybe(this._contentWidget),this._contentContainer.remove()},o.clear=function(){this.info=null},e._createClass(n,[{key:"_screenPoint",get:function(){const t=this.view.inputManager;return t?.multiTouchActive?null:t?.latestPointerLocation}},{key:"test",get:function(){return{contentContainer:this._contentContainer,visible:"none"!==this._contentContainer?.style.display}}}]),n}(o),n.__decorate([s.property({nonNullable:!0})],t.Tooltip.prototype,"view",void 0),n.__decorate([s.property()],t.Tooltip.prototype,"info",void 0),n.__decorate([s.property()],t.Tooltip.prototype,"_contentContainer",void 0),n.__decorate([s.property()],t.Tooltip.prototype,"_contentWidget",void 0),n.__decorate([s.property()],t.Tooltip.prototype,"_screenPoint",null),t.Tooltip=n.__decorate([p.subclass("esri.views.interactive.tooltip.Tooltip")],t.Tooltip);const f=[20,20];Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
