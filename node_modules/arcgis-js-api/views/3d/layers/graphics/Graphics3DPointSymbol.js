/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../../../chunks/_rollupPluginBabelHelpers","../../../../core/asyncUtils","../../../../core/maybe","../../../../core/promiseUtils","./Graphics3DCalloutSymbolLayerFactory","./Graphics3DLineCalloutSymbolLayer","./Graphics3DSymbol"],(function(t,o,e,l,r,a,i){"use strict";return function(i){function c(t,o,e){var l;return(l=i.call(this,t,o,e)||this)._calloutSymbolLayer=null,l.symbol.hasVisibleCallout()&&(l._calloutSymbolLayer=r.make(l.symbol,o)),l}t._inherits(c,i);var y=c.prototype;return y.doLoad=async function(e){const r=this._calloutSymbolLayer?o.result(this._calloutSymbolLayer.load()):null;try{await t._get(t._getPrototypeOf(c.prototype),"doLoad",this).call(this,e),l.throwIfAborted(e)}catch(a){throw this._calloutSymbolLayer?.abortLoad(),a}r&&await r},y.destroy=function(){t._get(t._getPrototypeOf(c.prototype),"destroy",this).call(this),this._calloutSymbolLayer=e.destroyMaybe(this._calloutSymbolLayer)},y.createGraphics3DGraphic=function(o,e){const l=t._get(t._getPrototypeOf(c.prototype),"createGraphics3DGraphic",this).call(this,o,e);if(null!=this._calloutSymbolLayer&&null!=l){const t=this._createCalloutGraphic(o);t&&l.setCalloutGraphic(t)}return l},y.globalPropertyChanged=function(o,e){return!!t._get(t._getPrototypeOf(c.prototype),"globalPropertyChanged",this).call(this,o,e)&&(!this._calloutSymbolLayer||this._calloutSymbolLayer.globalPropertyChanged(o,e,(t=>t.calloutLayer)))},y.updateGeometry=function(o,e){const l=t._get(t._getPrototypeOf(c.prototype),"updateGeometry",this).call(this,o,e);if(l&&this._calloutSymbolLayer){const t=o.calloutLayer;if(t)return this._calloutSymbolLayer.updateGeometry(t,e)}return l},y._createCalloutGraphic=function(t){const o=t.renderingInfo;return t.renderingInfo=new a.LineCalloutSymbolLayerRenderingInfo(o.renderer,o.symbol),this._calloutSymbolLayer.createGraphics3DGraphic(t)},t._createClass(c)}(i)}));
