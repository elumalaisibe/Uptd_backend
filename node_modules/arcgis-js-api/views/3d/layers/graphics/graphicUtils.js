/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../core/unitUtils","../../../../chunks/mat4","../../../../chunks/mat4f64","../../../../chunks/vec3f64","../../../../chunks/vec4","../../../../chunks/vec4f64","../../../../geometry/projection","../../../../geometry/support/aaBoundingBox","../../../../geometry/support/aaBoundingRect","../../../../geometry/support/centroid","../../../../geometry/support/coordsUtils","../../../../layers/graphics/dehydratedFeatures","../../../../layers/graphics/hydratedFeatures","../../webgl-engine/lib/VertexAttribute"],(function(e,t,n,r,i,o,l,u,a,s,c,m,h,d,g){"use strict";function y(e,t){if("point"===e.type)return b(e,t,!1);if(d.isHydratedGeometry(e))switch(e.type){case"extent":return b(e.center,t,!1);case"polygon":return b(e.centroid,t,!1);case"polyline":return b(p(e),t,!0);case"mesh":return b(e.origin,t,!1)}else switch(e.type){case"extent":return b(f(e),t,!0);case"polygon":return b(x(e),t,!0);case"polyline":return b(p(e),t,!0)}}function p(e){const t=e.paths[0];if(!t||0===t.length)return null;const n=m.getPointOnPath(t,m.getPathLength(t)/2);return h.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}function f(e){return h.makeDehydratedPoint(.5*(e.xmax+e.xmin),.5*(e.ymax+e.ymin),null!=e.zmin&&null!=e.zmax&&isFinite(e.zmin)&&isFinite(e.zmax)?.5*(e.zmax+e.zmin):void 0,e.spatialReference)}function x(e){const t=e.rings[0];if(!t||0===t.length)return null;const n=c.ringsCentroid(e.rings,!!e.hasZ);return h.makeDehydratedPoint(n[0],n[1],n[2],e.spatialReference)}function b(e,t,n){const r=n?e:d.clonePoint(e);return t&&e?u.projectPoint(e,r,t)?r:null:r}function P(e,t,n,r=0){if(e){t||(t=s.create());const i=e;let l=.5*i.width*(n-1),u=.5*i.height*(n-1);return i.width<1e-7*i.height?l+=u/20:i.height<1e-7*i.width&&(u+=l/20),o.set(t,i.xmin-l-r,i.ymin-u-r,i.xmax+l+r,i.ymax+u+r),t}return null}function v(e,t){for(let n=0;n<e.geometries.length;++n){const r=e.geometries[n].getMutableAttribute(g.VertexAttribute.AUXPOS1);r&&r.data[3]!==t&&(r.data[3]=t,e.geometryVertexAttrsUpdated(e.geometries[n]))}}function A(e,t,n=null){const r=l.clone(l.ONES);return null!=e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),null!=t?r[3]=t:null!=e&&e.length>3&&(r[3]=e[3]),n&&(r[0]*=n,r[1]*=n,r[2]*=n,r[3]*=n),r}function S(e,t,n,r,i,o=[0,0,0,0]){for(let l=0;l<3;++l)null!=e&&null!=e[l]?o[l]=e[l]:null!=n&&null!=n[l]?o[l]=n[l]:o[l]=i[l];return o[3]=null!=t?t:null!=r?r:i[3],o}function w(e=i.ONES,t,n,r=1){const o=new Array(3);if(null==t||null==n)o[0]=1,o[1]=1,o[2]=1;else{let r,i=0;for(let l=2;l>=0;l--){const u=e[l];let a;const s=null!=u,c=0===l&&!r&&!s,m=n[l];"symbol-value"===u||c?a=0!==m?t[l]/m:1:s&&"proportional"!==u&&isFinite(u)&&(a=0!==m?u/m:1),null!=a&&(o[l]=a,r=a,i=Math.max(i,Math.abs(a)))}for(let e=2;e>=0;e--)null==o[e]?o[e]=r:0===o[e]&&(o[e]=.001*i)}for(let i=2;i>=0;i--)o[i]/=r;return i.fromArray(o)}function R(e){return null!=e.isPrimitive}function z(e){return M(R(e)?[e.width,e.depth,e.height]:e)?null:"Symbol sizes may not be negative values"}function M(e){const t=e=>null==e||e>=0;return Array.isArray(e)?e.every(t):t(e)}function k(e,t,i,o=r.create()){return e&&n.rotateZ(o,o,-e/180*Math.PI),t&&n.rotateX(o,o,t/180*Math.PI),i&&n.rotateY(o,o,i/180*Math.PI),o}function F(e,n,r){if(null!=r.minDemResolution)return r.minDemResolution;const i=t.getMetersPerUnitForSR(n),o=a.width(e)*i,l=a.depth(e)*i,u=a.height(e)*(n.isGeographic?1:i);return 0===o&&0===l&&0===u?r.minDemResolutionForPoints:.01*Math.max(o,l,u)}e.computeCentroid=y,e.computeObjectRotation=k,e.computeObjectScale=w,e.demResolutionForBoundingBox=F,e.enlargeExtent=P,e.isValidSize=M,e.mixinColorAndOpacity=A,e.overrideColor=S,e.updateVertexAttributeAuxpos1w=v,e.validateSymbolLayerSize=z,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
