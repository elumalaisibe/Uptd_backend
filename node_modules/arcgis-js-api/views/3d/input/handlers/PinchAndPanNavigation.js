/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../state/controllers/global/PinchAndPanController","../../state/controllers/local/PinchAndPanController","../../../input/InputHandler","../../../input/handlers/support"],(function(t,e,n,r,i,o){"use strict";let a=function(t){function i(e,n,r){var i;return(i=t.call(this,!0)||this)._view=e,i.pointerAction=n,i._lastEndTimestamp=0,i._lastTimestamp=0,i.registerIncoming("drag",r,(t=>i._handleDrag(t))),i}e._inherits(i,t);var a=i.prototype;return a._handleDrag=function(t){if("mouse"===t.data.pointerType&&!o.eventMatchesMousePointerAction(t.data,this.pointerAction))return;const e=t.timestamp-this._lastEndTimestamp,n=40,r=this._momentum&&this._momentum.active&&e<n;switch(t.data.action){case"start":case"update":if(r)break;this._controller&&this._controller.active?t.data.timestamp-this._lastTimestamp>2&&(this._controller.update(t.data),this._lastTimestamp=t.timestamp):this._startController(t);break;case"end":case"removed":this._endController(t,!0);break;case"added":this._endController(t,!1),this._startController(t)}t.stopPropagation()},a._endController=function(t,e){if(this._controller&&this._controller.active){this._lastEndTimestamp=t.timestamp;const n=this._controller.end(t.data);e&&n&&(this._momentum=n,this._view.state.switchCameraController(this._momentum))}this._controller=null},a._startController=function(t){this._controller=this._createController(),this._view.state.switchCameraController(this._controller),this._controller.begin(t.data),this._lastTimestamp=t.timestamp},a._createController=function(){return this._view.state.isGlobal?new n.PinchAndPanController({view:this._view}):new r.PinchAndPanController({view:this._view})},e._createClass(i)}(i.InputHandler);t.PinchAndPanNavigation=a,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
