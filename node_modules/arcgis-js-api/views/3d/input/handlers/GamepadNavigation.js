/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/Handles","../../../../core/reactiveUtils","../../state/controllers/GamepadKeyboardController","../../../input/InputHandler"],(function(e,a,t,r,n,i){"use strict";let l=function(e){function i(a){var r;return(r=e.call(this,!0)||this)._view=a,r._watchHandles=new t,r._handle=r.registerIncoming("gamepad",(e=>r._handleEventGamepad(e))),r._handle.pause(),r}a._inherits(i,e);var l=i.prototype;return l.onInstall=function(e){a._get(a._getPrototypeOf(i.prototype),"onInstall",this).call(this,e),this._watchHandles.add([r.watch((()=>this._view.navigation.gamepad.enabled),(e=>{e?this._handle.resume():(this._handle.pause(),this._cameraControllerGamepad&&(this._cameraControllerGamepad.finishController(),this._cameraControllerGamepad=null))}),r.initial),r.watch((()=>this._view.navigation.gamepad.device),(e=>{this._cameraControllerGamepad&&e&&this._cameraControllerGamepad.gamepadDevice!==e&&(this._cameraControllerGamepad.finishController(),this._cameraControllerGamepad=null)}))])},l.onUninstall=function(){this._watchHandles.removeAll(),a._get(a._getPrototypeOf(i.prototype),"onUninstall",this).call(this)},l._handleEventGamepad=function(e){const a=this._view.navigation.gamepad.device;if(a&&e.data.device!==a)return;const t=this._cameraControllerGamepad&&this._cameraControllerGamepad.active;if(t||n.GamepadKeyboardController.activatesFor(this._view,e.data)){if(!t){const a=new n.GamepadKeyboardController({view:this._view,gamepadDevice:e.data.device});this._view.state.switchCameraController(a)&&(this._cameraControllerGamepad=a)}this._cameraControllerGamepad&&this._cameraControllerGamepad.active&&this._cameraControllerGamepad.gamepadDevice===e.data.device&&this._cameraControllerGamepad.handleEventGamepad(e.data)}},a._createClass(i)}(i.InputHandler);e.GamepadNavigation=l,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
