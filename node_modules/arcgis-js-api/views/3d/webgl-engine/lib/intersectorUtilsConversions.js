/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../core/maybe","../../../../chunks/mat4","../../../../chunks/vec3f64","../../../../geometry/support/aaBoundingBox","../../../../chunks/sphere","../../layers/i3s/Intersector","../../terrain/Intersector","./intersectorUtils","./lodRendering/Intersector"],(function(e,t,r,n,s,i,l,u,c,o){"use strict";function a(e,t){return c.isObjectIntersectorResult(e)||c.isHudIntersectorResult(e)?y(e.target?.object,t):u.isTerrainIntersectorResult(e)?t.map?.ground:l.isPclIntersectorResult(e)||l.isI3sIntersectorResult(e)||u.isOverlayIntersectorResult(e)||l.isVoxelIntersectorResult(e)?y(e.target,t):null}function g(e,t){const r=d(e,t);return null!=r&&"graphic"===r.type?r.graphic:null}function d(e,t){if(null==e)return null;if(c.isObjectIntersectorResult(e)||c.isHudIntersectorResult(e))return p(e.target?.object,t);if(l.isPclIntersectorResult(e)){const t=e.target.createGraphic();return{type:"graphic",graphic:t,layer:t.layer}}if(l.isVoxelIntersectorResult(e)){const t=e.target.createVoxelGraphic();return{type:"graphic",graphic:t,layer:t.layer}}return u.isOverlayIntersectorResult(e)||o.isLodIntersectorResult(e)?p(e.target,t):l.isI3sIntersectorResult(e)?I(e.target,t):null}function p(e,t){if(null==e||null==e.graphicUid)return null;const r=y(e,t);if(null==r)return null;if(r===t.graphics)return null==t.graphicsView||"number"!=typeof e.graphicUid?null:t.graphicsView.getHit(e.graphicUid);const n=t.allLayerViews.find((e=>e.layer===r));return!n||n.suspended||null==e.graphicUid?null:"getHit"in n?n.getHit(e.graphicUid):null}function I(e,t){const r=y(e,t);if(null==r)return null;const n=t.allLayerViews.find((e=>e.layer===r));return n&&!n.suspended&&"getGraphicFromIntersectorTarget"in n?h(n.getGraphicFromIntersectorTarget(e)):null}function f(e,t){const r=y(e,t);if(null==r)return null;const n=t.allLayerViews.find((e=>e.layer===r));return n&&!n.suspended&&"getAABBFromIntersectorTarget"in n?n.getAABBFromIntersectorTarget(e):null}function h(e){return null!=e?{type:"graphic",graphic:e,layer:e.layer}:null}function y(e,t){return e&&null!=e.layerUid?null!=t.graphicsView&&e.layerUid===t.graphicsView.processor.layer.id?t.graphics:t.map.findLayerByUid(e.layerUid):null}function R(e,n){if(c.isObjectIntersectorResult(e)||c.isHudIntersectorResult(e))return i.getRadius(e.target.object.boundingVolumeWorldSpace.bounds);if(o.isLodIntersectorResult(e)){r.getScaling(b,e.transformation);const t=Math.max(b[0],b[1],b[2]);return e.target.baseBoundingSphere.radius*t}return l.isI3sIntersectorResult(e)?t.applySome(f(e.target,n),(e=>.5*s.diameter(e))):null}function m(e){return!c.isObjectIntersectorResult(e)&&!c.isHudIntersectorResult(e)&&(o.isLodIntersectorResult(e)?e.target.numLodLevels>1:!!l.isI3sIntersectorResult(e))}const b=n.create();e.getIntersectedFeatureBSRadius=R,e.hasLod=m,e.toGraphic=g,e.toHit=d,e.toOwner=a,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
