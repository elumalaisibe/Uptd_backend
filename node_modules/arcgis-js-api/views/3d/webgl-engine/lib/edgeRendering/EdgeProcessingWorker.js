/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["../../../../../chunks/_rollupPluginBabelHelpers","../../../support/buffer/workerHelper","./bufferLayouts","./edgePreprocessing","./edgeProcessing"],(function(e,t,n,r,i){"use strict";let a=function(){function n(){}var a=n.prototype;return a.extract=async function(e){const t=s(e),n=i.extract(t),r=[t.data.buffer];return{result:o(n,r),transferList:r}},a.extractComponentsEdgeLocations=async function(e){const n=s(e),a=i.extractEdgeInformation(n.data,n.skipDeduplicate,n.indices,n.indicesLength),o=r.extractEdges(a,l,d),c=[];return{result:t.packInterleavedBuffer(o.regular.instancesData,c),transferList:c}},a.extractEdgeLocations=async function(e){const n=s(e),a=i.extractEdgeInformation(n.data,n.skipDeduplicate,n.indices,n.indicesLength),o=r.extractEdges(a,f,d),c=[];return{result:t.packInterleavedBuffer(o.regular.instancesData,c),transferList:c}},e._createClass(n)}();function s(e){return{data:n.EdgeInputBufferLayout.createView(e.dataBuffer),indices:"Uint32Array"===e.indicesType?new Uint32Array(e.indices):"Uint16Array"===e.indicesType?new Uint16Array(e.indices):e.indices,indicesLength:e.indicesLength,writerSettings:e.writerSettings,skipDeduplicate:e.skipDeduplicate}}function o(e,n){n.push(e.regular.lodInfo.lengths.buffer),n.push(e.silhouette.lodInfo.lengths.buffer);return{regular:{instancesData:t.packInterleavedBuffer(e.regular.instancesData,n),lodInfo:{lengths:e.regular.lodInfo.lengths.buffer}},silhouette:{instancesData:t.packInterleavedBuffer(e.silhouette.instancesData,n),lodInfo:{lengths:e.silhouette.lodInfo.lengths.buffer}},averageEdgeLength:e.averageEdgeLength}}let c=function(){function t(){}var n=t.prototype;return n.allocate=function(e){return i.extractEdgeLocationsLayout.createBuffer(e)},n.trim=function(e,t){return e.slice(0,t)},n.write=function(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1)},e._createClass(t)}(),u=function(){function t(){}var n=t.prototype;return n.allocate=function(e){return i.extractComponentsEdgeLocationsLayout.createBuffer(e)},n.trim=function(e,t){return e.slice(0,t)},n.write=function(e,t,n){e.position0.setVec(t,n.position0),e.position1.setVec(t,n.position1),e.componentIndex.set(t,n.componentIndex)},e._createClass(t)}();const f=new c,l=new u,d={allocate:()=>null,write:()=>{},trim:()=>null};return a}));
