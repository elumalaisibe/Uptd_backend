/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/DefaultVertexAttributeLocations","../lib/Program","../lib/StencilUtils","../../../../chunks/NativeLine.glsl","../../../webgl/enums","../../../webgl/renderState"],(function(e,t,i,n,r,l,a,s,u,o,c,p){"use strict";let d=function(e){function t(){return e.apply(this,arguments)||this}i._inherits(t,e);var r=t.prototype;return r.initializeProgram=function(e){return new s.Program(e.rctx,t.shader.get().build(this.configuration),a.Default3D)},r.initializePipeline=function(){const e=this.configuration,t=p.separateBlendingParams(c.BlendFactor.SRC_ALPHA,c.BlendFactor.ONE,c.BlendFactor.ONE_MINUS_SRC_ALPHA,c.BlendFactor.ONE_MINUS_SRC_ALPHA),i=(t,i=null,n=null)=>p.makePipelineState({blending:i,depthTest:u.depthCompareLess,depthWrite:n,colorWrite:p.defaultColorWriteParams,stencilWrite:e.hasOccludees?u.stencilWriteMaskOn:null,stencilTest:e.hasOccludees?t?u.stencilToolMaskBaseParams:u.stencilBaseAllZerosParams:null});return e.output===n.ShaderOutput.Color?(this._occludeePipelineState=i(!0,e.transparent||this._stippleEnabled?t:null,p.defaultDepthWriteParams),i(!1,e.transparent||this._stippleEnabled?t:null,p.defaultDepthWriteParams)):i(!1)},r.getPipelineState=function(e,n){return n?this._occludeePipelineState:i._get(i._getPrototypeOf(t.prototype),"getPipelineState",this).call(this,e,n)},i._createClass(t,[{key:"_stippleEnabled",get:function(){return this.configuration.stippleEnabled&&this.configuration.output!==n.ShaderOutput.Highlight}},{key:"primitiveType",get:function(){return c.PrimitiveType.LINES}}]),t}(l.ShaderTechnique);d.shader=new r.ReloadableShaderModule(o.NativeLine,(()=>new Promise(((t,i)=>e(["./NativeLine.glsl"],t,i))))),t.NativeLineTechnique=d,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
