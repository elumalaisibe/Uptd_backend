/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["require","exports","../../../../chunks/_rollupPluginBabelHelpers","../../../ViewingMode","../core/shaderLibrary/ShaderOutput","../core/shaderTechnique/ReloadableShaderModule","../core/shaderTechnique/ShaderTechnique","../lib/DefaultVertexAttributeLocations","../lib/OrderIndependentTransparency","../lib/Program","../lib/TransparencyPassType","../../../../chunks/HUDMaterial.glsl","../../../webgl/enums","../../../webgl/renderState"],(function(e,t,i,n,r,a,o,l,u,s,c,p,h,d){"use strict";let g=function(e){function t(){return e.apply(this,arguments)||this}i._inherits(t,e);var a=t.prototype;return a.initializeConfiguration=function(e,t){t.spherical=e.viewingMode===n.ViewingMode.Global},a.initializeProgram=function(e){return new s.Program(e.rctx,t.shader.get().build(this.configuration),l.Default3D)},a._setPipelineState=function(e){const t=this.configuration,i=e===c.TransparencyPassType.NONE,n=e===c.TransparencyPassType.FrontFace,a=this.configuration.hasPolygonOffset?f:null,o=(i||n)&&t.output!==r.ShaderOutput.Highlight&&(t.depthEnabled||t.occlusionPass)?d.defaultDepthWriteParams:null;return d.makePipelineState({blending:t.output===r.ShaderOutput.Color||t.output===r.ShaderOutput.Alpha||t.output===r.ShaderOutput.Highlight?i?P:u.oitBlending(e):null,depthTest:{func:h.CompareFunction.LEQUAL},depthWrite:o,colorWrite:d.defaultColorWriteParams,polygonOffset:a})},a.initializePipeline=function(){return this._setPipelineState(this.configuration.transparencyPassType)},i._createClass(t,[{key:"primitiveType",get:function(){return this.configuration.occlusionPass?h.PrimitiveType.POINTS:h.PrimitiveType.TRIANGLES}}]),t}(o.ShaderTechnique);g.shader=new a.ReloadableShaderModule(p.HUDMaterial,(()=>new Promise(((t,i)=>e(["./HUDMaterial.glsl"],t,i)))));const f={factor:0,units:-4},P=d.simpleBlendingParams(h.BlendFactor.ONE,h.BlendFactor.ONE_MINUS_SRC_ALPHA);t.HUDMaterialTechnique=g,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})}));
