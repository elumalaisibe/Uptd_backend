/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/vec2f32","../../../../chunks/vec2f64","../../support/buffer/InterleavedLayout","../core/shaderLibrary/ShaderOutput","../core/shaderLibrary/hud/HUD.glsl","../lib/GLMaterial","../lib/Material","../lib/RenderSlot","../lib/VertexAttribute","./internal/bufferWriterUtils","../shaders/LineCalloutTechnique","../shaders/LineCalloutTechniqueConfiguration"],(function(e,t,r,i,n,a,s,u,o,l,c,f,h,d){"use strict";let p=function(e){function r(t){var i;return(i=e.call(this,t,new S)||this)._configuration=new d.LineCalloutTechniqueConfiguration,i._uniqueMaterialIdentifier=r.uniqueMaterialIdentifier(i.parameters),i}t._inherits(r,e);var i=r.prototype;return i.getPassParameters=function(){return this.parameters},i.getConfiguration=function(e,t){const r=t?.slot!==l.RenderSlot.LINE_CALLOUTS;return this._configuration.occlusionTestEnabled=this.parameters.occlusionTest,this._configuration.hasVerticalOffset=null!=this.parameters.verticalOffset,this._configuration.hasScreenSizePerspective=null!=this.parameters.screenSizePerspective,this._configuration.depthHudEnabled=r,this._configuration.depthHudAlignStartEnabled=!!this.parameters.depthHUDAlignStart,this._configuration.screenCenterOffsetUnitsEnabled="screen"===this.parameters.centerOffsetUnits?s.HUDSpace.Screen:s.HUDSpace.World,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.hasMultipassGeometry=t.multipassGeometry.enabled,this._configuration},i.intersect=function(){},i.requiresSlot=function(e,t){if(t===a.ShaderOutput.Color)switch(e){case l.RenderSlot.LINE_CALLOUTS:case l.RenderSlot.LINE_CALLOUTS_HUD_DEPTH:return!0}return!1},i.createGLMaterial=function(e){return new g(e)},i.createBufferWriter=function(){return new A},i.validateParameters=function(e){const t=r.uniqueMaterialIdentifier(e);t!==this._uniqueMaterialIdentifier&&(this._uniqueMaterialIdentifier=t)},r.uniqueMaterialIdentifier=function(e){return JSON.stringify({screenOffset:e.screenOffset||[0,0],centerOffsetUnits:e.centerOffsetUnits||"world"})},t._createClass(r,[{key:"uniqueMaterialIdentifier",get:function(){return this._uniqueMaterialIdentifier}}]),r}(o.Material),g=function(e){function r(){return e.apply(this,arguments)||this}return t._inherits(r,e),r.prototype.beginSlot=function(e){return this.ensureTechnique(h.LineCalloutTechnique,e)},t._createClass(r)}(u),S=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).screenOffset=i.ZEROS,t.color=[0,0,0,1],t.size=1,t.occlusionTest=!1,t.shaderPolygonOffset=1e-5,t.depthHUDAlignStart=!1,t.centerOffsetUnits="world",t.hasSlicePlane=!1,t}return t._inherits(r,e),t._createClass(r)}(o.MaterialParameters);const O=n.newLayout().vec3f(c.VertexAttribute.POSITION).vec3f(c.VertexAttribute.NORMAL).vec2f(c.VertexAttribute.UV0).vec4f(c.VertexAttribute.AUXPOS1),b=[r.fromValues(0,0),r.fromValues(1,0),r.fromValues(0,1),r.fromValues(1,0),r.fromValues(1,1),r.fromValues(0,1)];let A=function(){function e(){this.vertexBufferLayout=O}var r=e.prototype;return r.elementCount=function(e){return 6*e.indices.get(c.VertexAttribute.POSITION).length},r.write=function(e,t,r,i,n){f.writePosition(r.indices.get(c.VertexAttribute.POSITION),r.vertexAttributes.get(c.VertexAttribute.POSITION).data,e,i.position,n,6),f.writeNormal(r.indices.get(c.VertexAttribute.NORMAL),r.vertexAttributes.get(c.VertexAttribute.NORMAL).data,t,i.normal,n,6),f.writeBufferVec4(r.indices.get(c.VertexAttribute.AUXPOS1),r.vertexAttributes.get(c.VertexAttribute.AUXPOS1).data,i.auxpos1,n,6);for(let a=0;a<b.length;++a)i.uv0.setVec(n+a,b[a])},t._createClass(e)}();e.LineCalloutMaterial=p,e.Parameters=S,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
