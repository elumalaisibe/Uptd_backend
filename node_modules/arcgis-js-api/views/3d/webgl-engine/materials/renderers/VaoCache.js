/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../../chunks/_rollupPluginBabelHelpers","../../../../../core/MemCache","../../lib/VertexArrayObject","../../../../webgl/BufferObject","../../../../webgl/enums"],(function(e,t,n,o,c,r){"use strict";const i=n.MIN_PRIORITY+1;let s=function(){function e(e,t,n){this._rctx=e,this._locations=t,this._layout=n,this._cache=e.newCache("VaoCache",u)}var n=e.prototype;return n.dispose=function(){this._cache.destroy()},n.newVao=function(e){const t=e.toString(),n=this._cache.pop(t);if(null!=n){const o=n.pop();return n.length>0&&this._cache.put(t,n,e*n.length,i),o}const s=new o.VertexArrayObject(this._rctx,this._locations,{geometry:this._layout},{geometry:c.BufferObject.createVertex(this._rctx,r.Usage.STATIC_DRAW)});return s.vertexBuffers.geometry.setSize(e),s},n.deleteVao=function(e){if(null==e)return null;const t=e.byteSize,n=t.toString(),o=this._cache.pop(n);return null!=o?(o.push(e),this._cache.put(n,o,t*o.length,-1)):this._cache.put(n,[e],t,-1),null},t._createClass(e)}();function u(e,t){if(t===n.RemoveMode.ALL)return void e.forEach((e=>e.dispose()));const o=e.pop(),c=e.length*o.byteSize;return o.dispose(),c}e.VaoCache=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
