/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/uid"],(function(e,t,r){"use strict";let o=function(){function e(e,t,o){this._createTexture=e,this._parametersKey=t,this._repository=new Map,this._orphanCache=o.newCache(`procedural-texture-repository:${r.generateUID()}`,(e=>e.dispose()))}var o=e.prototype;return o.destroy=function(){for(const[e,{texture:t}]of this._repository)t.dispose();this._repository.clear(),this._orphanCache.destroy()},o.swap=function(e,t=null){const r=this._acquire(e);return this.release(t),r},o.release=function(e){if(null==e)return;const t=this._parametersKey(e),r=this._repository.get(t);if(r&&(r.refCount--,0===r.refCount)){this._repository.delete(t);const{texture:e}=r,o=e.gpuMemoryUsage;this._orphanCache.put(t,e,o)}},o._acquire=function(e){if(null==e)return null;const t=this._parametersKey(e),r=this._repository.get(t);if(r)return r.refCount++,r.texture;const o=this._orphanCache.pop(t)??this._createTexture(e),i=new s(o);return this._repository.set(t,i),o},t._createClass(e)}(),s=t._createClass((function(e){this.texture=e,this.refCount=1}));e.ProceduralTextureRepository=o,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
