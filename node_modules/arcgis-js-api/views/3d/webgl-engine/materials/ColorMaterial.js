/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/has","../../../../chunks/vec4f64","../../support/buffer/InterleavedLayout","../core/shaderLibrary/ShaderOutput","../lib/basicInterfaces","../lib/GLMaterial","../lib/OrderIndependentTransparency","../lib/RenderSlot","../lib/VertexAttribute","./DefaultBufferWriter","./TriangleMaterial","./VisualVariablePassParameters","../shaders/ColorMaterialTechnique","../shaders/ColorMaterialTechniqueConfiguration"],(function(e,t,r,a,i,n,s,o,u,l,c,h,p,f,d,O){"use strict";let _=function(e){function a(t){var r;return(r=e.call(this,t,new A)||this).supportsEdges=!0,r._configuration=new O.ColorMaterialTechniqueConfiguration,r}t._inherits(a,e);var s=a.prototype;return s.getConfiguration=function(e,t){return this._configuration.output=e,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasVertexColors=this.parameters.hasVertexColors&&!this.parameters.vvColor,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.polygonOffset=this.parameters.polygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=t.transparencyPassType,this._configuration.enableOffset=t.camera.relativeElevation<u.OITPolygonOffsetLimit,this._configuration.hasMultipassTerrain=t.multipassTerrain.enabled,this._configuration.cullAboveGround=t.multipassTerrain.cullAboveGround,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration},s.requiresSlot=function(e,t){if(t===n.ShaderOutput.Color||t===n.ShaderOutput.Alpha||t===n.ShaderOutput.Highlight||t===n.ShaderOutput.Depth&&this.parameters.writeLinearDepth||t===n.ShaderOutput.ObjectAndLayerIdColor){if(e===l.RenderSlot.DRAPED_MATERIAL)return!0;if(t===n.ShaderOutput.Highlight)return e===l.RenderSlot.OPAQUE_MATERIAL;return e===(this.parameters.transparent?this.parameters.writeDepth?l.RenderSlot.TRANSPARENT_MATERIAL:l.RenderSlot.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:l.RenderSlot.OPAQUE_MATERIAL)}return!1},s.createGLMaterial=function(e){return new g(e)},s.createBufferWriter=function(){const e=i.newLayout().vec3f(c.VertexAttribute.POSITION);return r("enable-feature:objectAndLayerId-rendering")&&e.vec4u8(c.VertexAttribute.OBJECTANDLAYERIDCOLOR),this.parameters.vvColor?e.f32(c.VertexAttribute.COLORFEATUREATTRIBUTE):e.vec4u8(c.VertexAttribute.COLOR),new h.DefaultBufferWriter(e)},t._createClass(a)}(p.TriangleMaterial),g=function(e){function r(){return e.apply(this,arguments)||this}t._inherits(r,e);var a=r.prototype;return a._updateOccludeeState=function(e){e.hasOccludees!==this._material.parameters.hasOccludees&&this._material.setParameters({hasOccludees:e.hasOccludees})},a.beginSlot=function(e){return this._output!==n.ShaderOutput.Color&&this._output!==n.ShaderOutput.Alpha||this._updateOccludeeState(e),this.ensureTechnique(d.ColorMaterialTechnique,e)},t._createClass(r)}(o),A=function(e){function r(){var t;return(t=e.apply(this,arguments)||this).color=a.ZEROS,t.transparent=!1,t.writeDepth=!0,t.writeLinearDepth=!1,t.hasVertexColors=!1,t.polygonOffset=!1,t.hasSlicePlane=!1,t.cullFace=s.CullFaceOptions.None,t.hasOccludees=!1,t}return t._inherits(r,e),t._createClass(r)}(f.VisualVariablePassParameters);e.ColorMaterial=_,e.Parameters=A,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
