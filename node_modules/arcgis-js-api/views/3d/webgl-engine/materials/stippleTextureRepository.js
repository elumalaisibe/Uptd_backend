/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../core/floatRGBA","./ProceduralTextureRepository","../../../webgl/enums","../../../webgl/Texture","../../../webgl/TextureDescriptor"],(function(e,t,r,o,n,i){"use strict";function u(e,t){return new r.ProceduralTextureRepository((t=>{const{encodedData:r,paddedPixels:u}=a(t),c=new i.TextureDescriptor;return c.internalFormat=o.PixelFormat.RGBA,c.width=u,c.height=1,c.wrapMode=o.TextureWrapMode.CLAMP_TO_EDGE,new n.Texture(e,c,r)}),(e=>`${e.pattern.join(",")}-r${e.pixelRatio}`),t)}function a(e){const r=c(e),o=1/e.pixelRatio,n=l(e),i=p(e),u=(Math.floor(.5*(i-1))+.5)*o,a=[];let d=1;for(const t of r){for(let e=0;e<t;e++){const r=d*(Math.min(e,t-1-e)+.5)*o/u*.5+.5;a.push(r)}d=-d}const f=Math.round(r[0]/2),x=[...a.slice(f),...a.slice(0,f)],T=n+s,h=new Uint8Array(4*T);let P=4;for(const c of x)t.packFloatRGBA(c,h,P),P+=4;return h.copyWithin(0,P-4,P),h.copyWithin(P,4,8),{encodedData:h,paddedPixels:T}}function c(e){return e.pattern.map((t=>Math.round(t*e.pixelRatio)))}function l(e){if(null==e)return 1;const t=c(e);return Math.floor(t.reduce(((e,t)=>e+t)))}function p(e){return c(e).reduce(((e,t)=>Math.max(e,t)))}const s=2;e.STIPPLE_TEXTURE_PADDING=s,e.computeLongestPattern=p,e.computeTextureSize=l,e.createStippleTextureRepository=u,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
