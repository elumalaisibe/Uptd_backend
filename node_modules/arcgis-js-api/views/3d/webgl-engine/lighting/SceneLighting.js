/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../core/mathUtils","../../../../chunks/vec3","../../../../chunks/vec3f64","./Lightsources","./SphericalHarmonics"],(function(i,t,n,s,e,h,r){"use strict";let a=t._createClass((function(){this.color=e.create(),this.intensity=1})),c=t._createClass((function(){this.direction=e.create(),this.ambient=new a,this.diffuse=new a}));const o=.4;let l=function(){function i(){this._shOrder=2,this._legacy=new c,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new h.SphericalHarmonicsAmbientLight,this._mainLight=new h.MainLight(e.create(),e.fromValues(1,0,0),!1)}var a=i.prototype;return a.set=function(i){r.combineLights(i,this._shOrder,this._mainLight,this._sphericalHarmonics),s.copy(this._legacy.direction,this._mainLight.direction);const t=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*t,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*t,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*t,s.scale(this._legacy.diffuse.color,this._mainLight.intensity,t),s.copy(g,this._legacy.diffuse.color),s.scale(g,g,o*this.globalFactor),s.add(this._legacy.ambient.color,this._legacy.ambient.color,g)},a.copyFrom=function(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),s.copy(this._mainLight.direction,i.mainLight.direction),s.copy(this._mainLight.intensity,i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor},a.lerpLighting=function(i,t,e){if(s.lerp(this._mainLight.intensity,i.mainLight.intensity,t.mainLight.intensity,e),this._mainLight.environmentStrength=n.lerp(i.mainLight.environmentStrength,t.mainLight.environmentStrength,e),this._mainLight.specularStrength=n.lerp(i.mainLight.specularStrength,t.mainLight.specularStrength,e),s.copy(this._mainLight.direction,t.mainLight.direction),this._mainLight.castShadows=t.mainLight.castShadows,this.globalFactor=n.lerp(i.globalFactor,t.globalFactor,e),this.noonFactor=n.lerp(i.noonFactor,t.noonFactor,e),i.sh.r.length===t.sh.r.length)for(let s=0;s<t.sh.r.length;s++)this._sphericalHarmonics.r[s]=n.lerp(i.sh.r[s],t.sh.r[s],e),this._sphericalHarmonics.g[s]=n.lerp(i.sh.g[s],t.sh.g[s],e),this._sphericalHarmonics.b[s]=n.lerp(i.sh.b[s],t.sh.b[s],e);else for(let n=0;n<t.sh.r.length;n++)this._sphericalHarmonics.r[n]=t.sh.r[n],this._sphericalHarmonics.g[n]=t.sh.g[n],this._sphericalHarmonics.b[n]=t.sh.b[n]},t._createClass(i,[{key:"legacy",get:function(){return this._legacy}},{key:"sh",get:function(){return this._sphericalHarmonics}},{key:"mainLight",get:function(){return this._mainLight}}]),i}();const g=e.create();i.SceneLighting=l,i.ambientBoost=o,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})}));
