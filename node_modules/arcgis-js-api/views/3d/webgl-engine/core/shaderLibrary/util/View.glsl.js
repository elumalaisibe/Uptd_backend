/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../../../chunks/mat4","../../../../../../chunks/mat4f64","../../../../../../chunks/vec3","../../../../../../chunks/vec3f64","../../../../terrain/Overlay","../../shaderModules/Float3DrawUniform","../../shaderModules/Float3PassUniform","../../shaderModules/FloatPassUniform","../../shaderModules/Matrix4DrawUniform","../../shaderModules/Matrix4PassUniform"],(function(a,r,e,i,n,o,s,t,c,m,d){"use strict";function l(a,r){r.instancedDoublePrecision?a.constants.add("cameraPosition","vec3",n.ZEROS):a.uniforms.add(new s.Float3DrawUniform("cameraPosition",((a,r)=>i.set(v,r.camera.viewInverseTransposeMatrix[3]-a.origin[0],r.camera.viewInverseTransposeMatrix[7]-a.origin[1],r.camera.viewInverseTransposeMatrix[11]-a.origin[2]))))}function f(a,e){if(!e.instancedDoublePrecision)return void a.uniforms.add(new d.Matrix4PassUniform("proj",((a,r)=>r.camera.projectionMatrix)),new m.Matrix4DrawUniform("view",((a,e)=>r.translate(w,e.camera.viewMatrix,a.origin))),new s.Float3DrawUniform("localOrigin",(a=>a.origin)));const n=a=>i.set(v,a.camera.viewInverseTransposeMatrix[3],a.camera.viewInverseTransposeMatrix[7],a.camera.viewInverseTransposeMatrix[11]);a.uniforms.add(new d.Matrix4PassUniform("proj",((a,r)=>r.camera.projectionMatrix)),new d.Matrix4PassUniform("view",((a,e)=>r.translate(w,e.camera.viewMatrix,n(e)))),new t.Float3PassUniform("localOrigin",((a,r)=>n(r))))}const w=e.create(),v=n.create();function u(a){a.uniforms.add(new d.Matrix4PassUniform("viewNormal",((a,r)=>r.camera.viewInverseTransposeMatrix)))}function M(a,r){a.uniforms.add(new c.FloatPassUniform("pixelRatio",((a,e)=>e.camera.pixelRatio/(r.draped?o.OverlayStretch:1))))}a.addCameraPosition=l,a.addPixelRatio=M,a.addProjViewLocalOrigin=f,a.addViewNormal=u,Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})}));
