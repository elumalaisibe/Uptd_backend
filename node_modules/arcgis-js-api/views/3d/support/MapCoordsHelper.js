/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../geometry","../../../core/Error","../../../core/unitUtils","../../../geometry/ellipsoidUtils","../../../portal/support/geometryServiceUtils","../../../rest/geometryService/project","../../../rest/support/ProjectParameters","../../../geometry/Point","../../../geometry/SpatialReference"],(function(e,t,r,i,o,s,n,c,a,p,l){"use strict";let m=function(){function e(e,t){this.spatialReference=t,this.unitInMeters=o.getMetersPerUnitForSR(this.spatialReference,s.getReferenceEllipsoid(this.spatialReference).metersPerDegree),this._geometryServiceURLPromise=n.getGeometryServiceURL(e&&e.get("portalItem")).catch((()=>{throw new i("mapcoordshelper:missing-geometry-service","Must specify geometryService in esri/config")}))}return e.prototype.toGeographic=async function(e){const t=await this._geometryServiceURLPromise;let r,i=!0;Array.isArray(e[0])&&"number"!=typeof e[0]?r=e:(r=[e],i=!1);const o=r.map((e=>e instanceof p?e:new p(e,this.spatialReference))),s=new a({geometries:o,outSpatialReference:l.WGS84}),n=(await c.project(t,s)).map((e=>"point"===e.type?[e.x,e.y]:void 0)).filter((e=>!!e));return i?n:n[0]},t._createClass(e)}();e.MapCoordsHelper=m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
