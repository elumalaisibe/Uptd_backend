/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../geometry/projection","../../../../geometry/support/DoubleArray","../../../../geometry/support/triangulationUtils","../../layers/graphics/elevationAlignmentUtils","../../terrain/OverlayRenderer"],(function(n,o,t,e,i,r,s){"use strict";function l(n,o,t,s){const l=i.pathsToTriangulationInfo(n.rings,!!n.hasZ,i.CounterClockwiseMode.CCW_IS_HOLE),u=e.newDoubleArray(l.position.length),c=r.applyPerVertexElevationAlignment(l.position,n.spatialReference,0,u,0,l.position,0,l.position.length/3,o,t,s),h=null!=c;return new y(l.position,u,p(l.polygons,l.position,u),a(l.outlines,l.position,u),h,c)}function u(n,o){const e=i.pathsToTriangulationInfo(n.rings,!1,i.CounterClockwiseMode.CCW_IS_HOLE),r=t.projectBuffer(e.position,n.spatialReference,0,e.position,o,0,e.position.length/3);for(let t=2;t<e.position.length;t+=3)e.position[t]=s.DRAPED_Z;return{position:e.position,polygons:p(e.polygons,e.position),outlines:a(e.outlines,e.position),projectionSuccess:r}}function a(n,o,t=null){return n.filter((({count:n})=>n>1)).map((({index:n,count:i})=>{const r=3*n,s=3*i;return null!=t?new h(n,i,e.doubleSubArray(o,r,s),e.doubleSubArray(t,r,s)):new c(n,i,e.doubleSubArray(o,r,s))}))}function p(n,o,t=null){const i=new Array;for(const{index:r,count:s,holeIndices:l,pathLengths:u}of n){if(s<=1)continue;const n=3*r,a=3*s,p=l.map((n=>n-r)),c=null!=t?new g(r,s,e.doubleSubArray(o,3*r,3*s),e.doubleSubArray(t,n,a),p,u):new f(r,s,e.doubleSubArray(o,3*r,3*s),p,u);i.push(c)}return i}let c=o._createClass((function(n,o,t){this.index=n,this.count=o,this.position=t})),h=function(n){function t(o,t,e,i){var r;return(r=n.call(this,o,t,e)||this).mapPositions=i,r}return o._inherits(t,n),o._createClass(t)}(c),g=function(n){function t(o,t,e,i,r,s){var l;return(l=n.call(this,o,t,e,i)||this).holeIndices=r,l.pathLengths=s,l}return o._inherits(t,n),o._createClass(t)}(h),f=function(n){function t(o,t,e,i,r){var s;return(s=n.call(this,o,t,e)||this).holeIndices=i,s.pathLengths=r,s}return o._inherits(t,n),o._createClass(t)}(c),y=o._createClass((function(n,o,t,e,i,r){this.position=n,this.mapPositions=o,this.polygons=t,this.outlines=e,this.projectionSuccess=i,this.sampledElevation=r}));n.PolygonRenderInfo=y,n.PolygonVertexData=g,n.PolygonVertexDataDraped=f,n.geometryToRenderInfo=l,n.geometryToRenderInfoDraped=u,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})}));
