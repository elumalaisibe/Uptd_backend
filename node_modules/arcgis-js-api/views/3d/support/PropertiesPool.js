/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../../core/ReentrantObjectPool","../../../core/accessorSupport/watch"],(function(e,t,o,r){"use strict";let s=function(){function e(e,t){this._owner=t,this._properties={},this._afterDispatchHandle=null;for(const r in e){const t=e[r],s=new o.ReentrantObjectPool(t,void 0,void 0,2,2);this._properties[r]={pool:s,acquired:[]}}this._afterDispatchHandle=r.afterDispatch((()=>this._release()))}var s=e.prototype;return s.destroy=function(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const t=this._properties[e];for(const e of t.acquired)r.isValueInUse(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this._properties=null,this._owner=null},s.get=function(e){const t=this._owner._get(e),o=this._properties[e];let r=o.pool.acquire();for(o.acquired.push(r);r===t;)o.acquired.push(r),r=o.pool.acquire();return r},s._release=function(){for(const e in this._properties){const t=this._properties[e];let o=0;for(const e of t.acquired)r.isValueInUse(e)?t.acquired[o++]=e:t.pool.release(e);t.acquired.length=o}},t._createClass(e)}();e.PropertiesPool=s,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
