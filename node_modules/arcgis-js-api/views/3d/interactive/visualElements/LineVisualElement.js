/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/mat4","../../../../chunks/mat4f64","../../../../chunks/vec3","../../../../chunks/vec3f64","../../../../chunks/vec4f64","./Object3DVisualElement","../../support/engineContent/line","../../webgl-engine/lib/Material","../../webgl-engine/materials/RibbonLineMaterial"],(function(e,t,r,n,s,i,o,a,l,u,c){"use strict";let m=function(e){function n(t,r){var n;return(n=e.call(this,t)||this)._hasExternalMaterial=!1,n._hasExternalMaterial=null!=r,n._material=null!=r?r:new c.RibbonLineMaterial({width:1,color:o.fromValues(1,0,1,1),stippleOffColor:null,stipplePattern:null,stipplePreferContinuous:!0,isClosed:!1,falloff:0,innerColor:null,innerWidth:1,hasPolygonOffset:!1,renderOccluded:u.RenderOccludedFlag.OccludeAndTransparent,writeDepth:!0}),n.applyProps(t),n}t._inherits(n,e);var a=n.prototype;return a.setGeometryFromRenderSpacePoint=function(e,t=1e3){this.geometry=[[[e[0]-t,e[1],e[2]],[e[0]+t,e[1],e[2]]],[[e[0],e[1]-t,e[2]],[e[0],e[1]+t,e[2]]],[[e[0],e[1],e[2]-t],[e[0],e[1],e[2]+t]]]},a.setGeometryFromExtent=function(e){const t=this.view.spatialReference,r=i.create(),n=i.create(),o=100,a=[];s.set(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),s.set(r,e[2],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),s.set(r,e[2],e[3],o),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),s.set(r,e[0],e[3],o),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),s.set(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),s.set(r,e[0],e[1],o),this.view.renderCoordsHelper.toRenderCoords(r,t,n),a.push([n[0],n[1],n[2]]),this.geometry=[a]},a.setGeometryFromFrustum=function(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]},a.setGeometryFromBoundedPlane=function(e){const t=[],r=e.origin,n=e.basis1,s=e.basis2,o=.5,a=i.create(),l=i.create(),u=i.create(),c=i.create();a[0]=r[0]-n[0]*o-s[0]*o,a[1]=r[1]-n[1]*o-s[1]*o,a[2]=r[2]-n[2]*o-s[2]*o,l[0]=r[0]-n[0]*o+s[0]*o,l[1]=r[1]-n[1]*o+s[1]*o,l[2]=r[2]-n[2]*o+s[2]*o,u[0]=r[0]+n[0]*o+s[0]*o,u[1]=r[1]+n[1]*o+s[1]*o,u[2]=r[2]+n[2]*o+s[2]*o,c[0]=r[0]+n[0]*o-s[0]*o,c[1]=r[1]+n[1]*o-s[1]*o,c[2]=r[2]+n[2]*o-s[2]*o,t.push([a[0],a[1],a[2]]),t.push([l[0],l[1],l[2]]),t.push([u[0],u[1],u[2]]),t.push([c[0],c[1],c[2]]),t.push([a[0],a[1],a[2]]),this.geometry=[t]},a.setGeometryFromSegment=function(e){const t=e.endRenderSpace;this.transform=r.fromTranslation(h,t);const{points:n}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[n]},a.setGeometryFromSegments=function(e,t=i.ZEROS){this.transform=r.fromTranslation(h,t),this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))},a.getTransformedGeometry=function(){return null==this._geometry?null:this._geometry.map((e=>e.map((e=>s.transformMat4(i.create(),e,this.transform)))))},a.createExternalResources=function(){},a.destroyExternalResources=function(){},a.createGeometries=function(e){for(const t of l.lineStripsToParameters(this.geometry)){const r=l.createGeometry(this._material,t);e.addGeometry(r)}},a.forEachExternalMaterial=function(e){this._hasExternalMaterial||e(this._material)},t._createClass(n,[{key:"renderOccluded",get:function(){return this._material.parameters.renderOccluded},set:function(e){this._material.setParameters({renderOccluded:e})}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.recreateGeometry()}},{key:"width",get:function(){return this._material.parameters.width},set:function(e){this._material.setParameters({width:e})}},{key:"color",get:function(){return this._material.parameters.color},set:function(e){const t=1===e[3];this._material.setParameters({color:o.clone(e),writeDepth:t})}},{key:"innerWidth",get:function(){return this._material.parameters.innerWidth},set:function(e){this._material.setParameters({innerWidth:e})}},{key:"innerColor",get:function(){return this._material.parameters.innerColor},set:function(e){this._material.setParameters({innerColor:null!=e?o.clone(e):null})}},{key:"stipplePattern",get:function(){return this._material.parameters.stipplePattern},set:function(e){null!=this._material&&this._material.setParameters({stipplePattern:e})}},{key:"stippleOffColor",get:function(){return this._material.parameters.stippleOffColor},set:function(e){this._material.setParameters({stippleOffColor:null!=e?o.clone(e):null})}},{key:"stipplePreferContinuous",get:function(){return this._material.parameters.stipplePreferContinuous},set:function(e){this._material.setParameters({stipplePreferContinuous:e})}},{key:"falloff",get:function(){return this._material.parameters.falloff},set:function(e){this._material.setParameters({falloff:e})}},{key:"polygonOffset",get:function(){return this._material.parameters.hasPolygonOffset},set:function(e){this._material.setParameters({hasPolygonOffset:e})}}]),n}(a.Object3DVisualElement);const h=n.create();e.LineVisualElement=m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
