/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
define(["exports","../../../../chunks/_rollupPluginBabelHelpers","../../../../chunks/mat4","../../../../chunks/mat4f64","../../../../chunks/vec4f32","./Object3DVisualElement","../../support/engineContent/line","../../webgl-engine/lib/Material","../../webgl-engine/materials/LineMarkerMaterial"],(function(e,t,r,i,a,n,l,s,o){"use strict";let m=function(e){function i(t,r){var i;return(i=e.call(this,t)||this)._hasExternalMaterial=!1,i._renderOccluded=s.RenderOccludedFlag.OccludeAndTransparent,i._width=1,i._color=a.fromValues(1,0,1,1),i._placement="end",i._markerPrimitive="arrow",i._material=r,i._hasExternalMaterial=null!=r,i.applyProps(t),i}t._inherits(i,e);var n=i.prototype;return n.setGeometryFromSegment=function(e,t){const i=e.endRenderSpace;this.transform=r.fromTranslation(c,i),this._normal=t;const{points:a}=e.createRenderGeometry(i,this.view.renderCoordsHelper);this.geometry=[a]},n.createExternalResources=function(){this._hasExternalMaterial||(this._material=new o.LineMarkerMaterial({width:this._width,color:this._color,placement:this._placement,renderOccluded:this._renderOccluded,markerPrimitive:this._markerPrimitive}))},n.destroyExternalResources=function(){this._hasExternalMaterial||(this._material=null)},n.createGeometries=function(e){for(const t of l.lineStripsToParameters(this.geometry,this.normal)){const r=l.createGeometry(this._material,t);e.addGeometry(r)}},n.forEachExternalMaterial=function(e){this._hasExternalMaterial||e(this._material)},t._createClass(i,[{key:"renderOccluded",get:function(){return null!=this._material?this._material.parameters.renderOccluded:this._renderOccluded},set:function(e){this._renderOccluded=e,null!=this._material&&this._material.setParameters({renderOccluded:e})}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this.recreateGeometry()}},{key:"normal",get:function(){return this._normal},set:function(e){this._normal=e,this.recreateGeometry()}},{key:"width",get:function(){return null!=this._material?this._material.parameters.width:this._width},set:function(e){this._width=e,null!=this._material&&this._material.setParameters({width:e})}},{key:"color",get:function(){return null!=this._material?this._material.parameters.color:this._color},set:function(e){this._color=a.clone(e),null!=this._material&&this._material.setParameters({color:this._color})}},{key:"placement",get:function(){return null!=this._material?this._material.parameters.placement:this._placement},set:function(e){this._placement=e,null!=this._material&&this._material.setParameters({placement:this._placement})}},{key:"markerPrimitive",get:function(){return this._material?.parameters.markerPrimitive??this._markerPrimitive},set:function(e){this._markerPrimitive=e,null!=this._material&&this._material.setParameters({markerPrimitive:e})}}]),i}(n.Object3DVisualElement);const c=i.create();e.MarkerVisualElement=m,Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}));
